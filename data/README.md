# Runtime Data

This folder stores runtime outputs generated by the EA Agentic Lab system.

## Purpose

Runtime data serves three key functions:

1. **Execution Traceability**, full audit trail of every playbook run
2. **Agent Memory**, historical context for improved decision-making
3. **Self-Improvement**, feedback loops for agent learning and optimization

## Folder Structure

```text
data/
├── runs/                          # Playbook execution outputs
│   └── {timestamp}_{playbook}_{client}/
│       ├── metadata.yaml          # Run configuration and parameters
│       ├── trace.json             # Step-by-step execution log
│       ├── report.md              # Human-readable summary
│       └── outputs/               # Generated artifacts
│           ├── decisions/         # Decision objects
│           └── risks/             # Risk objects
│
├── memory/                        # Agent memory (future)
│   └── {agent_id}/
│       ├── context_cache.json     # Recent context for continuity
│       └── learned_patterns.yaml  # Patterns from past executions
│
└── feedback/                      # Self-improvement data (future)
    ├── corrections/               # Human corrections to agent outputs
    └── metrics/                   # Performance metrics over time
```

## Data Lifecycle

| Data Type | Retention | Purpose |
|-----------|-----------|---------|
| runs/ | 30 days | Audit, debugging, replay |
| memory/ | Persistent | Cross-session context |
| feedback/ | Persistent | Learning and improvement |

## Usage

### Accessing Run Data

```python
from pathlib import Path

runs_dir = Path("data/runs")
latest_run = sorted(runs_dir.iterdir())[-1]

# Read execution trace
with open(latest_run / "trace.json") as f:
    trace = json.load(f)

# Read metadata
with open(latest_run / "metadata.yaml") as f:
    metadata = yaml.safe_load(f)
```

### Agent Memory (Future)

Agents will use memory data to:

- Recall previous interactions with the same client
- Apply learned patterns to similar situations
- Maintain context across sessions

### Self-Improvement (Future)

The feedback loop enables:

- Human corrections feed back into agent behavior
- Performance metrics identify areas for improvement
- Pattern recognition improves over time

## Git Behavior

All runtime data is **gitignored** (see `.gitignore`). This data is:

- Node-specific (each deployment has its own data)
- Potentially sensitive (client information)
- Large over time (execution traces accumulate)

## Cleanup

To clear old run data:

```bash
# Delete runs older than 30 days
find data/runs -type d -mtime +30 -exec rm -rf {} +
```

## Related Documentation

- [Playbook Executor](../application/src/core/playbook_engine/playbook_executor.py), generates run data
- [Architecture Overview](../docs/architecture/), system design context
