# Archetypes Configuration
# Engagement classification: Archetype × Domain × Track
# Archetypes define engagement patterns independent of technology domain
# Domain and Track are orthogonal dimensions applied on top
version: "2.0"

# -------------------------------------------------------------------
# Dimension 1: Archetype (engagement pattern)
# -------------------------------------------------------------------
archetypes:
  competitive_displacement:
    name: "Competitive Displacement"
    description: "Replacing an incumbent vendor"
    signals:
      - competitor_displacement
      - migration_timeline
      - multi_vendor_incumbent
    reference_blueprints:
      - id: A01_basic
        name: "Standard Displacement"
        description: "Single vendor replacement"
        playbooks: [PB_102, PB_201, PB_301]
      - id: A02_competitive
        name: "Competitive Displacement"
        description: "Multi-vendor consolidation with competitive analysis"
        playbooks: [PB_102, PB_201, PB_701, PB_301]
    typical_duration_weeks: 12
    complexity: high

  greenfield_adoption:
    name: "Greenfield Adoption"
    description: "New capability where no incumbent exists"
    signals:
      - no_incumbent
      - new_capability
      - greenfield_initiative
    reference_blueprints:
      - id: A01_basic
        name: "Standard Adoption"
        description: "Standard new deployment"
        playbooks: [PB_102, PB_201]
      - id: A02_enterprise
        name: "Enterprise Adoption"
        description: "Multi-team, multi-environment deployment"
        playbooks: [PB_102, PB_201, PB_001, PB_301, PB_401]
    typical_duration_weeks: 8
    complexity: medium

  platform_consolidation:
    name: "Platform Consolidation"
    description: "Merging multiple tools into a unified platform"
    signals:
      - platform_play
      - executive_sponsor
      - budget_consolidation
      - multi_tool_incumbent
    reference_blueprints:
      - id: A01_unified
        name: "Unified Platform"
        description: "Single platform for multiple use cases"
        playbooks: [PB_102, PB_201, PB_701, PB_301, PB_001, PB_401]
    typical_duration_weeks: 16
    complexity: very_high
    minimum_track: premium

  compliance_driven:
    name: "Compliance-Driven"
    description: "Implementation driven by regulatory deadline or audit finding"
    signals:
      - regulatory_deadline
      - audit_finding
      - risk_averse_culture
    reference_blueprints:
      - id: A01_audit_response
        name: "Audit Response"
        description: "Addressing specific audit findings"
        playbooks: [PB_102, PB_202, PB_201]
      - id: A02_regulatory
        name: "Regulatory Compliance"
        description: "Meeting regulatory requirements"
        playbooks: [PB_102, PB_202, PB_201, PB_301]
    typical_duration_weeks: 10
    complexity: high

  technical_evaluation:
    name: "Technical Evaluation"
    description: "POC or validation with a decision pending"
    signals:
      - technical_evaluation
      - short_timeline
      - limited_stakeholders
    reference_blueprints:
      - id: A01_technical
        name: "Technical POC"
        description: "Feature and capability validation"
        playbooks: [PB_101]
      - id: A02_comparative
        name: "Comparative POC"
        description: "Side-by-side evaluation vs competitor"
        playbooks: [PB_101, PB_701]
    typical_duration_weeks: 4
    complexity: low
    track_override: poc

  retention_renewal:
    name: "Retention / Renewal"
    description: "Protecting an existing relationship at risk"
    signals:
      - renewal_approaching
      - health_score_declining
      - champion_departed
    reference_blueprints:
      - id: A01_health_recovery
        name: "Health Recovery"
        description: "Address declining health metrics"
        playbooks: [PB_401, PB_102]
      - id: A02_champion_rebuild
        name: "Champion Rebuild"
        description: "Re-establish stakeholder relationships"
        playbooks: [PB_102, PB_401, PB_301]
    typical_duration_weeks: 6
    complexity: medium

  expansion:
    name: "Expansion"
    description: "Growing within an account that already adopted"
    signals:
      - adoption_success
      - new_use_case_identified
      - budget_cycle
    reference_blueprints:
      - id: A01_use_case
        name: "New Use Case"
        description: "Expand to adjacent use case"
        playbooks: [PB_201, PB_001]
      - id: A02_enterprise
        name: "Enterprise Expansion"
        description: "Scale to additional teams or business units"
        playbooks: [PB_102, PB_201, PB_001, PB_301]
    typical_duration_weeks: 8
    complexity: medium

  strategic_account:
    name: "Strategic Account"
    description: "Enterprise-wide, multi-initiative, executive-level"
    signals:
      - tier_1_account
      - multi_node
      - executive_relationship
    reference_blueprints:
      - id: A01_strategic
        name: "Strategic Account Governance"
        description: "Full governance for strategic accounts"
        playbooks: [PB_102, PB_201, PB_701, PB_301, PB_001, PB_401]
    typical_duration_weeks: ongoing
    complexity: very_high
    minimum_track: premium

# -------------------------------------------------------------------
# Dimension 2: Domain (specialist area, orthogonal to archetype)
# -------------------------------------------------------------------
domains:
  security:
    name: "Security"
    specialist_agent: "security_specialist"
    playbook_prefix: "PB_SEC"
    checklist: "security_evaluation_checklist"
    focus_areas:
      - "SIEM evaluation"
      - "Threat detection"
      - "MITRE ATT&CK coverage"
      - "SOC workflows"
      - "Compliance frameworks"

  search:
    name: "Search"
    specialist_agent: "search_specialist"
    playbook_prefix: "PB_SRCH"
    checklist: "search_evaluation_checklist"
    focus_areas:
      - "Relevance tuning"
      - "Vector search"
      - "RAG architecture"
      - "Schema design"
      - "Query performance"

  observability:
    name: "Observability"
    specialist_agent: "observability_specialist"
    playbook_prefix: "PB_OBS"
    checklist: "observability_evaluation_checklist"
    focus_areas:
      - "APM"
      - "SLO/SLI"
      - "Distributed tracing"
      - "Alerting strategy"
      - "Log management"

  multi_domain:
    name: "Multi-Domain"
    description: "Engagement spans multiple specialist areas"
    requires_domains: 2
    specialist_agent: null
    playbook_prefix: null

# -------------------------------------------------------------------
# Dimension 3: Track (defined in engagement_tracks.yaml, referenced here)
# -------------------------------------------------------------------
# POC, Economy, Premium, Fast Track
# See: domain/mappings/engagement_tracks.yaml

# -------------------------------------------------------------------
# Signal definitions for classification
# -------------------------------------------------------------------
signal_patterns:
  competitor_displacement:
    indicators:
      - "incumbent_vendor NOT NULL"
      - "migration_timeline EXISTS"
    weight: 0.8

  compliance_driver:
    indicators:
      - "regulatory_requirements.length > 0"
      - "audit_findings EXISTS"
    weight: 0.9

  platform_play:
    indicators:
      - "use_cases.length >= 3"
      - "executive_sponsor.level == 'C-level'"
    weight: 0.7

  health_score_declining:
    indicators:
      - "health_score < 60"
      - "health_trend == 'declining'"
    weight: 0.85

  no_incumbent:
    indicators:
      - "incumbent_vendor IS NULL"
      - "current_tooling == 'none' OR current_tooling == 'manual'"
    weight: 0.9

  adoption_success:
    indicators:
      - "health_score >= 80"
      - "usage_trend == 'growing'"
    weight: 0.7

  tier_1_account:
    indicators:
      - "account_tier == 1"
      - "arr >= threshold_strategic"
    weight: 0.9
