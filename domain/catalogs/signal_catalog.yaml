# ==============================================================================
# SIGNAL CATALOG
# ==============================================================================
# Version: 1.0
# Date: 2026-01-21
# Status: Canonical Reference
#
# This is the machine-readable signal contract. Signals are IMMUTABLE events
# that flow between agents. They represent facts about what happened, not
# commands to do something.
#
# For human documentation, see: docs/reference/signal-catalog.md
# ==============================================================================

# ------------------------------------------------------------------------------
# SCHEMA VERSION
# ------------------------------------------------------------------------------
schema_version: "1.0"
last_updated: "2026-01-21"

# ------------------------------------------------------------------------------
# SIGNAL CATEGORIES
# ------------------------------------------------------------------------------
categories:
  lifecycle:
    description: "Node and engagement lifecycle events"
    prefix: "SIG_LC"

  artifact:
    description: "Document and artifact events"
    prefix: "SIG_ART"

  stakeholder:
    description: "People and relationship events"
    prefix: "SIG_STK"

  commercial:
    description: "Deal and opportunity events"
    prefix: "SIG_COM"

  health:
    description: "Health, risk, and status events"
    prefix: "SIG_HLT"

  governance:
    description: "Decision and escalation events"
    prefix: "SIG_GOV"

  playbook:
    description: "Playbook execution events"
    prefix: "SIG_PB"

  tech_signal_map:
    description: "Tech Signal Map - decision-support artifact for technology intelligence from job posting analysis"
    prefix: "SIG_TECH"

  market_news:
    description: "Market News Analysis - company, industry, and solution-domain news intelligence"
    prefix: "SIG_MNA"

  custom:
    description: "User-defined signals (require orchestrator validation)"
    prefix: "SIG_CUSTOM"

# ------------------------------------------------------------------------------
# SIGNAL DEFINITIONS
# ------------------------------------------------------------------------------
signals:

  # ============================================================================
  # LIFECYCLE SIGNALS
  # ============================================================================

  - signal_id: "SIG_LC_001"
    name: "node_created"
    category: "lifecycle"
    version: 1
    description: "A new Node has been created within a Realm"

    producer: "Orchestration Agent"
    consumers:
      - agent: "All Agents"
        action: "Initialize Node context"

    payload:
      required:
        - field: "realm_id"
          type: "string"
          description: "Parent Realm identifier"
        - field: "node_id"
          type: "string"
          description: "New Node identifier"
        - field: "node_name"
          type: "string"
          description: "Human-readable Node name"
        - field: "created_by"
          type: "string"
          description: "Actor who created the Node"
        - field: "created_at"
          type: "datetime"
          description: "ISO 8601 timestamp"
      optional:
        - field: "operating_mode"
          type: "enum"
          values: ["pre_sales", "implementation", "post_sales", "renewal"]
          description: "Initial operating mode"
        - field: "enabled_playbooks"
          type: "array"
          description: "List of playbook IDs enabled for this Node"

    emitted_when: "User or system creates a new Node via API or UI"

    idempotency: "node_id must be unique; duplicate signals ignored"

    anti_patterns:
      - "Do not emit for temporary or test Nodes"
      - "Do not emit before Realm exists"
      - "Never modify payload after emission"

    example:
      realm_id: "realm_bmw"
      node_id: "node_bmw_security_consolidation"
      node_name: "Security Platform Consolidation"
      created_by: "human:sa_lead"
      created_at: "2026-01-21T10:00:00Z"
      operating_mode: "pre_sales"

  - signal_id: "SIG_LC_002"
    name: "node_status_changed"
    category: "lifecycle"
    version: 1
    description: "Node status has transitioned to a new state"

    producer: "Governance Agent"
    consumers:
      - agent: "Orchestration Agent"
        action: "Update process triggers"
      - agent: "Nudger Agent"
        action: "Adjust nudge frequency"
      - agent: "All Node Agents"
        action: "Adjust behavior based on status"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "previous_status"
          type: "enum"
          values: ["planning", "active", "on_hold", "completed", "cancelled"]
        - field: "new_status"
          type: "enum"
          values: ["planning", "active", "on_hold", "completed", "cancelled"]
        - field: "changed_by"
          type: "string"
        - field: "changed_at"
          type: "datetime"
      optional:
        - field: "reason"
          type: "string"
          description: "Explanation for status change"

    emitted_when: "Node status field is updated"

    idempotency: "Emit only on actual state change; same-state updates ignored"

    anti_patterns:
      - "Do not emit if status unchanged"
      - "Do not emit for transient states"

    valid_transitions:
      - from: "planning"
        to: ["active", "cancelled"]
      - from: "active"
        to: ["on_hold", "completed", "cancelled"]
      - from: "on_hold"
        to: ["active", "cancelled"]
      - from: "completed"
        to: []  # Terminal state
      - from: "cancelled"
        to: []  # Terminal state

  - signal_id: "SIG_LC_003"
    name: "operating_mode_changed"
    category: "lifecycle"
    version: 1
    description: "Node operating mode has changed (e.g., pre_sales to implementation)"

    producer: "Governance Agent"
    consumers:
      - agent: "Playbook Curator"
        action: "Adjust enabled playbooks for new mode"
      - agent: "All Node Agents"
        action: "Shift operational focus"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "previous_mode"
          type: "enum"
          values: ["pre_sales", "implementation", "post_sales", "renewal"]
        - field: "new_mode"
          type: "enum"
          values: ["pre_sales", "implementation", "post_sales", "renewal"]
        - field: "changed_at"
          type: "datetime"
      optional:
        - field: "trigger_event"
          type: "string"
          description: "What caused the mode change (e.g., deal_closed_won)"

    emitted_when: "Operating mode is explicitly changed or auto-transitioned"

  # ============================================================================
  # ARTIFACT SIGNALS
  # ============================================================================

  - signal_id: "SIG_ART_001"
    name: "artifact_created"
    category: "artifact"
    version: 1
    description: "A new artifact has been created in the InfoHub"

    producer: "Any Agent"
    consumers:
      - agent: "InfoHub Curator"
        action: "Validate and index artifact"
      - agent: "Dependent Agents"
        action: "Process if subscribed to artifact type"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "artifact_id"
          type: "string"
          description: "Unique artifact identifier"
        - field: "artifact_type"
          type: "enum"
          values: ["meeting_notes", "decision", "risk", "action", "framework_output",
                   "architecture", "value_model", "stakeholder", "rfp", "proposal", "adr"]
        - field: "artifact_path"
          type: "string"
          description: "InfoHub path to artifact"
        - field: "created_by"
          type: "string"
        - field: "created_at"
          type: "datetime"
      optional:
        - field: "source_signal"
          type: "string"
          description: "Signal that triggered this artifact creation"
        - field: "playbook_id"
          type: "string"
          description: "Playbook that produced this artifact"
        - field: "summary"
          type: "string"
          description: "Brief description of artifact content"

    emitted_when: "Any agent writes a new file to InfoHub"

    anti_patterns:
      - "Do not emit for temporary or draft artifacts"
      - "Do not emit for external files not in InfoHub"

  - signal_id: "SIG_ART_002"
    name: "artifact_updated"
    category: "artifact"
    version: 1
    description: "An existing artifact has been modified"

    producer: "Any Agent"
    consumers:
      - agent: "InfoHub Curator"
        action: "Re-validate and update index"
      - agent: "Dependent Agents"
        action: "Re-process if dependent on this artifact"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "artifact_id"
          type: "string"
        - field: "artifact_path"
          type: "string"
        - field: "updated_by"
          type: "string"
        - field: "updated_at"
          type: "datetime"
        - field: "version"
          type: "integer"
          description: "New version number"
      optional:
        - field: "change_summary"
          type: "string"
        - field: "fields_changed"
          type: "array"
          description: "List of changed field paths"

    emitted_when: "Any agent modifies an existing InfoHub artifact"

  - signal_id: "SIG_ART_003"
    name: "meeting_processed"
    category: "artifact"
    version: 1
    description: "Meeting notes have been processed and artifacts extracted"

    producer: "Meeting Notes Agent"
    consumers:
      - agent: "Action Tracker Agent"
        action: "Register extracted actions"
      - agent: "Risk Radar Agent"
        action: "Assess extracted risks"
      - agent: "Decision Registrar"
        action: "Log extracted decisions"
      - agent: "Stakeholder Agent"
        action: "Update stakeholder interactions"
      - agent: "VoC Agent"
        action: "Capture voice of customer feedback"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "meeting_id"
          type: "string"
        - field: "meeting_type"
          type: "enum"
          values: ["external", "internal", "deal_review", "qbr", "kickoff", "checkpoint"]
        - field: "meeting_date"
          type: "date"
        - field: "artifact_path"
          type: "string"
        - field: "processed_at"
          type: "datetime"
      optional:
        - field: "attendees"
          type: "array"
          description: "List of attendee identifiers"
        - field: "extracted_actions_count"
          type: "integer"
        - field: "extracted_risks_count"
          type: "integer"
        - field: "extracted_decisions_count"
          type: "integer"
        - field: "sentiment"
          type: "enum"
          values: ["positive", "neutral", "negative", "mixed"]
        - field: "key_topics"
          type: "array"

    emitted_when: "Meeting Notes Agent completes processing of meeting notes"

    anti_patterns:
      - "Do not emit until all extractions complete"
      - "Do not emit for incomplete or draft notes"

  - signal_id: "SIG_ART_004"
    name: "rfp_received"
    category: "artifact"
    version: 1
    description: "A new RFP document has been uploaded and registered"

    producer: "Document Ingestion"
    consumers:
      - agent: "SA Agent"
        action: "Analyze technical requirements"
      - agent: "AE Agent"
        action: "Update opportunity tracking"
      - agent: "Competitive Intelligence Agent"
        action: "Scan for competitor mentions"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "rfp_id"
          type: "string"
        - field: "artifact_path"
          type: "string"
        - field: "received_at"
          type: "datetime"
      optional:
        - field: "deadline"
          type: "datetime"
          description: "RFP response deadline"
        - field: "has_security_section"
          type: "boolean"
        - field: "has_compliance_section"
          type: "boolean"
        - field: "estimated_value"
          type: "number"
        - field: "page_count"
          type: "integer"

    emitted_when: "RFP document is uploaded to InfoHub"

  # ============================================================================
  # STAKEHOLDER SIGNALS
  # ============================================================================

  - signal_id: "SIG_STK_001"
    name: "stakeholder_added"
    category: "stakeholder"
    version: 1
    description: "A new stakeholder has been identified and added to the Node"

    producer: "Stakeholder Agent"
    consumers:
      - agent: "AE Agent"
        action: "Update relationship strategy"
      - agent: "Journey Agent"
        action: "Initialize stakeholder journey"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "stakeholder_id"
          type: "string"
        - field: "name"
          type: "string"
        - field: "role"
          type: "string"
        - field: "added_at"
          type: "datetime"
      optional:
        - field: "influence_level"
          type: "enum"
          values: ["champion", "influencer", "decision_maker", "blocker", "end_user"]
        - field: "department"
          type: "string"
        - field: "contact_info"
          type: "object"
        - field: "discovered_via"
          type: "string"
          description: "How stakeholder was identified (meeting, referral, etc.)"

    emitted_when: "New stakeholder is registered in stakeholder map"

  - signal_id: "SIG_STK_002"
    name: "stakeholder_role_changed"
    category: "stakeholder"
    version: 1
    description: "A stakeholder's role or influence level has changed"

    producer: "Stakeholder Agent"
    consumers:
      - agent: "AE Agent"
        action: "Reassess engagement strategy"
      - agent: "Risk Radar Agent"
        action: "Evaluate if change introduces risk"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "stakeholder_id"
          type: "string"
        - field: "previous_role"
          type: "string"
        - field: "new_role"
          type: "string"
        - field: "changed_at"
          type: "datetime"
      optional:
        - field: "previous_influence"
          type: "string"
        - field: "new_influence"
          type: "string"
        - field: "reason"
          type: "string"

    emitted_when: "Stakeholder profile is updated with role/influence change"

  # ============================================================================
  # COMMERCIAL SIGNALS
  # ============================================================================

  - signal_id: "SIG_COM_001"
    name: "deal_stage_changed"
    category: "commercial"
    version: 1
    description: "Opportunity has moved to a new sales stage"

    producer: "AE Agent"
    consumers:
      - agent: "SA Agent"
        action: "Adjust technical engagement level"
      - agent: "Value Engineering Agent"
        action: "Trigger value activities for stage"
      - agent: "Governance Agent"
        action: "Update governance requirements"
      - agent: "POC Agent"
        action: "Prepare if entering POC stage"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "opportunity_id"
          type: "string"
        - field: "previous_stage"
          type: "string"
        - field: "new_stage"
          type: "string"
        - field: "changed_at"
          type: "datetime"
      optional:
        - field: "deal_value"
          type: "number"
        - field: "close_date"
          type: "date"
        - field: "probability"
          type: "number"
          description: "Win probability percentage"
        - field: "stage_entry_criteria_met"
          type: "boolean"

    emitted_when: "Opportunity stage is updated in CRM or manually"

    anti_patterns:
      - "Do not emit for CRM sync artifacts"
      - "Do not emit if stage unchanged after update"

  - signal_id: "SIG_COM_002"
    name: "deal_closed"
    category: "commercial"
    version: 1
    description: "Deal has reached terminal state (won or lost)"

    producer: "AE Agent"
    consumers:
      - agent: "Retrospective Agent"
        action: "Trigger win/loss retrospective"
      - agent: "Governance Agent"
        action: "Transition Node operating mode"
      - agent: "All Node Agents"
        action: "Archive or transition activities"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "opportunity_id"
          type: "string"
        - field: "outcome"
          type: "enum"
          values: ["won", "lost"]
        - field: "closed_at"
          type: "datetime"
      optional:
        - field: "final_value"
          type: "number"
        - field: "loss_reason"
          type: "string"
          description: "Required if outcome=lost"
        - field: "competitor_won"
          type: "string"
          description: "Competitor name if lost to competitor"
        - field: "contract_term_months"
          type: "integer"

    emitted_when: "Deal is marked closed-won or closed-lost"

  - signal_id: "SIG_COM_003"
    name: "competitor_identified"
    category: "commercial"
    version: 1
    description: "A competitor has been identified in the opportunity"

    producer: "Competitive Intelligence Agent"
    consumers:
      - agent: "SA Agent"
        action: "Prepare technical differentiation"
      - agent: "AE Agent"
        action: "Adjust sales strategy"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "competitor_name"
          type: "string"
        - field: "identified_at"
          type: "datetime"
      optional:
        - field: "source"
          type: "string"
          description: "How competitor was identified"
        - field: "threat_level"
          type: "enum"
          values: ["low", "medium", "high", "critical"]
        - field: "incumbent"
          type: "boolean"
          description: "Is this the current vendor?"
        - field: "products_competing"
          type: "array"

    emitted_when: "Competitor is added to competitive context"

  # ============================================================================
  # HEALTH SIGNALS
  # ============================================================================

  - signal_id: "SIG_HLT_001"
    name: "risk_identified"
    category: "health"
    version: 1
    description: "A new risk has been identified and logged"

    producer: "Risk Radar Agent"
    consumers:
      - agent: "Governance Agent"
        action: "Evaluate escalation need"
      - agent: "Nudger Agent"
        action: "Schedule risk review nudge"
      - agent: "AE Agent"
        action: "Factor into deal strategy"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "risk_id"
          type: "string"
        - field: "title"
          type: "string"
        - field: "category"
          type: "enum"
          values: ["technical", "commercial", "timeline", "resource", "stakeholder",
                   "competitive", "delivery", "adoption"]
        - field: "severity"
          type: "enum"
          values: ["low", "medium", "high", "critical"]
        - field: "identified_at"
          type: "datetime"
        - field: "identified_by"
          type: "string"
      optional:
        - field: "probability"
          type: "enum"
          values: ["unlikely", "possible", "likely", "certain"]
        - field: "impact"
          type: "string"
        - field: "mitigation"
          type: "string"
        - field: "owner"
          type: "string"
        - field: "source_signal"
          type: "string"
          description: "Signal that led to risk identification"

    emitted_when: "New risk is added to risk register"

  - signal_id: "SIG_HLT_002"
    name: "risk_status_changed"
    category: "health"
    version: 1
    description: "Risk status or severity has changed"

    producer: "Risk Radar Agent"
    consumers:
      - agent: "Governance Agent"
        action: "Re-evaluate escalation"
      - agent: "Health Score Agent"
        action: "Recalculate Node health"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "risk_id"
          type: "string"
        - field: "change_type"
          type: "enum"
          values: ["severity_changed", "status_changed", "mitigated", "escalated", "closed"]
        - field: "changed_at"
          type: "datetime"
      optional:
        - field: "previous_severity"
          type: "string"
        - field: "new_severity"
          type: "string"
        - field: "previous_status"
          type: "string"
        - field: "new_status"
          type: "string"
        - field: "resolution"
          type: "string"

    emitted_when: "Risk register entry is updated"

  - signal_id: "SIG_HLT_003"
    name: "health_score_changed"
    category: "health"
    version: 1
    description: "Node health score has crossed a threshold"

    producer: "Health Score Agent"
    consumers:
      - agent: "Governance Agent"
        action: "Trigger health-based governance"
      - agent: "AE Agent"
        action: "Adjust engagement intensity"
      - agent: "Nudger Agent"
        action: "Adjust nudge urgency"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "previous_score"
          type: "integer"
          description: "0-100 scale"
        - field: "new_score"
          type: "integer"
        - field: "threshold_crossed"
          type: "enum"
          values: ["critical", "warning", "healthy", "none"]
        - field: "calculated_at"
          type: "datetime"
      optional:
        - field: "contributing_factors"
          type: "array"
          description: "Factors that caused the change"
        - field: "trend"
          type: "enum"
          values: ["improving", "stable", "declining"]

    emitted_when: "Health score crosses defined thresholds (e.g., 50, 70, 85)"

    anti_patterns:
      - "Do not emit for minor fluctuations within same band"
      - "Emit only on threshold crossings, not every recalculation"

  - signal_id: "SIG_HLT_004"
    name: "action_overdue"
    category: "health"
    version: 1
    description: "An action item has passed its due date"

    producer: "Action Tracker Agent"
    consumers:
      - agent: "Nudger Agent"
        action: "Send overdue reminder"
      - agent: "Governance Agent"
        action: "Evaluate escalation"
      - agent: "Health Score Agent"
        action: "Factor into health calculation"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "action_id"
          type: "string"
        - field: "title"
          type: "string"
        - field: "owner"
          type: "string"
        - field: "due_date"
          type: "date"
        - field: "days_overdue"
          type: "integer"
        - field: "detected_at"
          type: "datetime"
      optional:
        - field: "priority"
          type: "enum"
          values: ["low", "medium", "high", "critical"]
        - field: "escalation_count"
          type: "integer"
          description: "How many times this has been escalated"

    emitted_when: "Daily scan detects action past due date"

  - signal_id: "SIG_HLT_005"
    name: "action_completion_detected"
    category: "health"
    version: 1
    description: "Signal Matcher has detected evidence that an action may be completed"

    producer: "Signal Matcher Agent"
    consumers:
      - agent: "Nudger Agent"
        action: "Cancel pending reminders for this action if auto-completed"
      - agent: "Task Shepherd Agent"
        action: "Validate completion evidence quality"
      - agent: "Health Score Agent"
        action: "Factor into health recalculation"
      - agent: "Reporter Agent"
        action: "Include in weekly digest"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "action_id"
          type: "string"
        - field: "confidence"
          type: "number"
          description: "Match confidence score (0.0-1.0)"
        - field: "resolution"
          type: "enum"
          values: ["auto_completed", "confirmation_requested", "evidence_attached"]
        - field: "signal_source"
          type: "string"
          description: "Vault path to the artifact that provided evidence"
        - field: "detected_at"
          type: "datetime"
      optional:
        - field: "signal_excerpt"
          type: "string"
          description: "Relevant text from the source artifact"
        - field: "done_means"
          type: "string"
          description: "The completion criteria that was matched against"
        - field: "completed_late"
          type: "boolean"
          description: "True if signal date > action due date"

    emitted_when: "Signal Matcher finds evidence matching an open action's done_means with confidence >= 0.30"

    anti_patterns:
      - "Do not emit for draft or unconfirmed meeting notes"
      - "Do not emit multiple times for the same action-signal pair"
      - "Do not emit if action has no done_means defined"

    example:
      realm_id: "ACME_CORP"
      node_id: "SECURITY_CONSOLIDATION"
      action_id: "ACT_P0_001"
      confidence: 0.92
      resolution: "auto_completed"
      signal_source: "vault/ACME_CORP/SECURITY_CONSOLIDATION/raw/meetings/external/2026-01-22-poc-kickoff.md"
      signal_excerpt: "POC kickoff meeting held, revised proposal was presented and accepted"
      done_means: "POC proposal document submitted to customer"
      detected_at: "2026-01-22T16:00:00Z"

  - signal_id: "SIG_HLT_006"
    name: "action_completion_confirmed"
    category: "health"
    version: 1
    description: "Action owner has confirmed a suggested completion via one-tap confirm"

    producer: "UI / Human Actor"
    consumers:
      - agent: "Signal Matcher Agent"
        action: "Mark action as completed in tracker with human-confirmed evidence"
      - agent: "Nudger Agent"
        action: "Cancel all pending reminders for this action"
      - agent: "InfoHub Curator"
        action: "Start 30-day deprecation timer"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "action_id"
          type: "string"
        - field: "confirmed_by"
          type: "string"
          description: "Human who confirmed completion"
        - field: "confirmed_at"
          type: "datetime"
      optional:
        - field: "original_signal_source"
          type: "string"
          description: "The signal that triggered the confirmation request"
        - field: "correction"
          type: "string"
          description: "If owner selected 'Wrong match', their explanation"

    emitted_when: "Owner taps Confirm/Not yet/Wrong match on a completion suggestion"

    anti_patterns:
      - "Do not auto-emit; must originate from human interaction"
      - "Do not emit for auto-completed actions (those use SIG_HLT_005 only)"

  - signal_id: "SIG_HLT_007"
    name: "action_completion_reverted"
    category: "health"
    version: 1
    description: "An auto-completed action has been reverted by the owner within the revert window"

    producer: "UI / Human Actor"
    consumers:
      - agent: "Signal Matcher Agent"
        action: "Revert action status to previous state, log mismatch for learning"
      - agent: "Nudger Agent"
        action: "Re-enable reminders for this action"
      - agent: "Task Shepherd Agent"
        action: "Review done_means clarity if multiple reverts occur"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "action_id"
          type: "string"
        - field: "reverted_by"
          type: "string"
        - field: "reverted_at"
          type: "datetime"
        - field: "reason"
          type: "string"
          description: "Why the auto-completion was wrong"
      optional:
        - field: "original_confidence"
          type: "number"
          description: "Confidence score of the match that was reverted"
        - field: "original_signal_source"
          type: "string"

    emitted_when: "Owner reverts an auto-completed action within the 48h revert window"

    anti_patterns:
      - "Do not allow revert after revert window expires"
      - "Do not allow revert on human-confirmed completions (those are final)"

  # ============================================================================
  # GOVERNANCE SIGNALS
  # ============================================================================

  - signal_id: "SIG_GOV_001"
    name: "decision_logged"
    category: "governance"
    version: 1
    description: "A decision has been recorded in the decision log"

    producer: "Decision Registrar"
    consumers:
      - agent: "InfoHub Curator"
        action: "Index decision for retrieval"
      - agent: "Dependent Agents"
        action: "Act on decision if relevant"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "decision_id"
          type: "string"
        - field: "title"
          type: "string"
        - field: "category"
          type: "enum"
          values: ["technical", "commercial", "process", "resource", "strategic"]
        - field: "decided_by"
          type: "string"
        - field: "decided_at"
          type: "datetime"
      optional:
        - field: "context"
          type: "string"
        - field: "alternatives_considered"
          type: "array"
        - field: "rationale"
          type: "string"
        - field: "impact"
          type: "string"
        - field: "reversible"
          type: "boolean"
        - field: "review_date"
          type: "date"

    emitted_when: "Decision is added to decision log"

  - signal_id: "SIG_GOV_002"
    name: "escalation_triggered"
    category: "governance"
    version: 1
    description: "An issue has been escalated to higher authority"

    producer: "Governance Agent"
    consumers:
      - agent: "Notification Service"
        action: "Alert escalation target"
      - agent: "Audit Logger"
        action: "Record escalation event"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "escalation_id"
          type: "string"
        - field: "issue_type"
          type: "enum"
          values: ["risk", "blocker", "decision_needed", "resource", "timeline", "conflict"]
        - field: "issue_id"
          type: "string"
          description: "ID of the escalated item"
        - field: "escalated_to"
          type: "string"
        - field: "escalation_level"
          type: "integer"
          description: "1 = first level, 2 = second level, etc."
        - field: "escalated_at"
          type: "datetime"
      optional:
        - field: "escalated_by"
          type: "string"
        - field: "reason"
          type: "string"
        - field: "deadline"
          type: "datetime"
        - field: "previous_escalation_id"
          type: "string"

    emitted_when: "Escalation threshold is breached or manual escalation requested"

  - signal_id: "SIG_GOV_003"
    name: "escalation_resolved"
    category: "governance"
    version: 1
    description: "An escalation has been addressed and closed"

    producer: "Governance Agent"
    consumers:
      - agent: "Original Requester Agent"
        action: "Process resolution"
      - agent: "Audit Logger"
        action: "Record resolution"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "escalation_id"
          type: "string"
        - field: "resolved_by"
          type: "string"
        - field: "resolved_at"
          type: "datetime"
        - field: "resolution"
          type: "string"
      optional:
        - field: "decision_id"
          type: "string"
          description: "If resolution resulted in a logged decision"
        - field: "time_to_resolve_hours"
          type: "number"

    emitted_when: "Escalation is marked resolved"

  - signal_id: "SIG_GOV_004"
    name: "approval_requested"
    category: "governance"
    version: 1
    description: "An agent has produced an artifact or recommendation that requires human approval before downstream processing continues"

    producer: "Any Agent"
    consumers:
      - agent: "Notification Service"
        action: "Notify approver via UI or push notification"
      - agent: "Nudger Agent"
        action: "Track approval SLA and send reminders if overdue"
      - agent: "Audit Logger"
        action: "Record approval request"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "approval_id"
          type: "string"
          description: "Unique identifier for this approval request"
        - field: "approval_type"
          type: "enum"
          values: ["node_activation", "content_share", "strategic_recommendation",
                   "escalation_resolution", "blueprint_change", "high_value_action"]
          description: "Category of approval needed"
        - field: "artifact_path"
          type: "string"
          description: "InfoHub path to the artifact requiring approval"
        - field: "requested_by"
          type: "string"
          description: "Agent that produced the artifact"
        - field: "approver"
          type: "string"
          description: "Human role or person expected to approve"
        - field: "requested_at"
          type: "datetime"
        - field: "summary"
          type: "string"
          description: "One-line description of what needs approval"
      optional:
        - field: "sla_hours"
          type: "integer"
          description: "Hours before this approval is considered overdue. Default: 24"
        - field: "blocked_signals"
          type: "array"
          description: "Downstream signals that are held until approval is granted"
        - field: "context"
          type: "string"
          description: "Additional context for the approver"
        - field: "source_playbook"
          type: "string"
          description: "Playbook ID that triggered this approval gate"

    emitted_when: "Agent produces a high-stakes artifact that crosses a defined approval threshold"

    approval_thresholds:
      - type: "node_activation"
        condition: "Node transitions from planning to active"
        approver: "AE or Senior Manager"
      - type: "content_share"
        condition: "Artifact written to external-infohub and flagged for customer sharing"
        approver: "SA Agent owner or AE"
      - type: "strategic_recommendation"
        condition: "Playbook output recommends strategic posture change (e.g. defensive pivot)"
        approver: "Senior Manager"
      - type: "high_value_action"
        condition: "Action impacts deal > $1M or involves executive stakeholder"
        approver: "Senior Manager"

    anti_patterns:
      - "Do not request approval for routine governance actions (nudges, staleness flags)"
      - "Do not request approval for artifacts written to internal-infohub only"
      - "Do not create duplicate approval requests for the same artifact"

    example:
      realm_id: "ACME"
      node_id: "SECURITY_CONSOLIDATION"
      approval_id: "APR_2026_02_10_001"
      approval_type: "content_share"
      artifact_path: "vault/ACME_CORP/SECURITY_CONSOLIDATION/external-infohub/architecture/ADR_001_security_platform.md"
      requested_by: "sa_agent"
      approver: "Jane Smith"
      requested_at: "2026-02-10T14:30:00Z"
      summary: "ADR for security platform selection ready for customer sharing"
      sla_hours: 24
      blocked_signals: ["SIG_ART_001"]

  - signal_id: "SIG_GOV_005"
    name: "approval_resolved"
    category: "governance"
    version: 1
    description: "A human has approved, rejected, or requested changes on a pending approval"

    producer: "UI / Human Actor"
    consumers:
      - agent: "Orchestration Agent"
        action: "Release blocked signals if approved, or route back to producing agent if rejected"
      - agent: "Nudger Agent"
        action: "Cancel pending approval reminders"
      - agent: "Audit Logger"
        action: "Record approval outcome"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "approval_id"
          type: "string"
          description: "Matches the original approval request"
        - field: "outcome"
          type: "enum"
          values: ["approved", "rejected", "changes_requested"]
        - field: "resolved_by"
          type: "string"
          description: "Human who resolved the approval"
        - field: "resolved_at"
          type: "datetime"
      optional:
        - field: "feedback"
          type: "string"
          description: "Approver's comments, required if outcome is rejected or changes_requested"
        - field: "time_to_resolve_hours"
          type: "number"
        - field: "decision_id"
          type: "string"
          description: "If approval resulted in a logged decision"

    emitted_when: "Human submits approval, rejection, or change request via UI"

    anti_patterns:
      - "Do not auto-approve; this signal must originate from a human action"
      - "Do not resolve without feedback when rejecting or requesting changes"

    example:
      realm_id: "ACME"
      node_id: "SECURITY_CONSOLIDATION"
      approval_id: "APR_2026_02_10_001"
      outcome: "approved"
      resolved_by: "human:jane_smith"
      resolved_at: "2026-02-10T16:45:00Z"
      time_to_resolve_hours: 2.25

  # ============================================================================
  # KNOWLEDGE VAULT GOVERNANCE SIGNALS
  # ============================================================================

  - signal_id: "SIG_GOV_006"
    name: "knowledge_proposal_received"
    category: "governance"
    version: 1
    description: "A new knowledge item has been proposed to the Global Knowledge Vault"

    producer: "Any Agent"
    consumers:
      - agent: "Knowledge Vault Curator"
        action: "Validate proposal for anonymization, deduplication, schema, and tagging"

    payload:
      required:
        - field: "proposal_id"
          type: "string"
        - field: "proposal_path"
          type: "string"
          description: "Path in .proposals/ directory"
        - field: "proposed_by"
          type: "string"
        - field: "proposed_at"
          type: "datetime"
        - field: "knowledge_type"
          type: "enum"
          values: ["best_practice", "lesson_learned", "pattern", "template", "reference"]
      optional:
        - field: "source_realm"
          type: "string"
        - field: "source_node"
          type: "string"
        - field: "domain"
          type: "string"
        - field: "archetype"
          type: "string"

    emitted_when: "Agent writes a new knowledge proposal to vault/knowledge/.proposals/"

    anti_patterns:
      - "Do not emit for items written directly to vault by humans (those bypass proposal queue)"
      - "Do not emit for updates to existing proposals"

  - signal_id: "SIG_GOV_007"
    name: "knowledge_proposal_validated"
    category: "governance"
    version: 1
    description: "Knowledge Vault Curator has validated a proposal and prepared it for human review"

    producer: "Knowledge Vault Curator"
    consumers:
      - agent: "Notification Service"
        action: "Notify human reviewers that a proposal is ready"
      - agent: "Nudger Agent"
        action: "Track review SLA"

    payload:
      required:
        - field: "proposal_id"
          type: "string"
        - field: "validation_status"
          type: "enum"
          values: ["ready_for_review", "needs_rework", "duplicate_detected", "anonymization_failed"]
        - field: "validated_at"
          type: "datetime"
      optional:
        - field: "duplicate_of"
          type: "string"
          description: "ID of existing item if duplicate detected"
        - field: "validation_notes"
          type: "string"
        - field: "anonymization_issues"
          type: "array"

    emitted_when: "Knowledge Vault Curator completes validation of a proposal"

  - signal_id: "SIG_GOV_008"
    name: "knowledge_gap_detected"
    category: "governance"
    version: 1
    description: "A playbook execution context lacks relevant knowledge items in the vault"

    producer: "Knowledge Vault Curator"
    consumers:
      - agent: "Playbook Curator"
        action: "Factor into playbook health reporting"
      - agent: "Reporter Agent"
        action: "Include in knowledge vault health report"

    payload:
      required:
        - field: "domain"
          type: "string"
        - field: "archetype"
          type: "string"
        - field: "phase"
          type: "string"
        - field: "gap_type"
          type: "enum"
          values: ["no_items", "low_confidence_only", "stale_items_only"]
        - field: "detected_at"
          type: "datetime"
      optional:
        - field: "playbook_id"
          type: "string"
        - field: "occurrences"
          type: "integer"
          description: "Number of executions that hit this gap"

    emitted_when: "Playbook execution completes with no matching knowledge items for its context"

  - signal_id: "SIG_GOV_009"
    name: "knowledge_item_obsolete"
    category: "governance"
    version: 1
    description: "A knowledge vault item has been flagged as potentially obsolete"

    producer: "Knowledge Vault Curator"
    consumers:
      - agent: "Notification Service"
        action: "Notify human curators for review"

    payload:
      required:
        - field: "item_id"
          type: "string"
        - field: "item_path"
          type: "string"
        - field: "reason"
          type: "enum"
          values: ["contradicted_by_recent", "not_consumed_12_months", "domain_superseded", "manual_flag"]
        - field: "flagged_at"
          type: "datetime"
      optional:
        - field: "contradicting_evidence"
          type: "string"
        - field: "last_consumed_at"
          type: "datetime"

    emitted_when: "Weekly vault health check identifies items meeting obsolescence criteria"

  - signal_id: "SIG_GOV_010"
    name: "engagement_learnings_ready"
    category: "governance"
    version: 1
    description: "An engagement is closing and key artifacts are available for knowledge extraction"

    producer: "InfoHub Curator"
    consumers:
      - agent: "Knowledge Vault Curator"
        action: "Ensure engagement artifacts are processed for potential knowledge extraction"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "artifact_summary"
          type: "object"
          description: "Count and types of artifacts in the closing engagement"
        - field: "emitted_at"
          type: "datetime"
      optional:
        - field: "key_artifacts"
          type: "array"
          description: "Paths to high-value artifacts for extraction priority"
        - field: "engagement_outcome"
          type: "enum"
          values: ["won", "lost", "on_hold", "cancelled"]

    emitted_when: "Node status changes to completed and InfoHub Curator identifies extractable content"

  # ============================================================================
  # PLAYBOOK SIGNALS
  # ============================================================================

  - signal_id: "SIG_PB_001"
    name: "playbook_started"
    category: "playbook"
    version: 1
    description: "A playbook execution has begun"

    producer: "Playbook Engine"
    consumers:
      - agent: "Orchestration Agent"
        action: "Track execution"
      - agent: "Audit Logger"
        action: "Log execution start"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "playbook_id"
          type: "string"
        - field: "execution_id"
          type: "string"
          description: "Unique ID for this execution instance"
        - field: "playbook_type"
          type: "enum"
          values: ["strategic", "operational"]
        - field: "triggered_by"
          type: "string"
          description: "Signal or actor that triggered execution"
        - field: "started_at"
          type: "datetime"
      optional:
        - field: "input_artifacts"
          type: "array"
        - field: "executing_agent"
          type: "string"

    emitted_when: "Playbook engine begins playbook execution"

  - signal_id: "SIG_PB_002"
    name: "playbook_completed"
    category: "playbook"
    version: 1
    description: "A playbook execution has finished"

    producer: "Playbook Engine"
    consumers:
      - agent: "Orchestration Agent"
        action: "Update execution tracking"
      - agent: "Dependent Processes"
        action: "Trigger downstream processes"
      - agent: "Audit Logger"
        action: "Log execution completion"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "playbook_id"
          type: "string"
        - field: "execution_id"
          type: "string"
        - field: "status"
          type: "enum"
          values: ["success", "partial", "failed", "cancelled"]
        - field: "completed_at"
          type: "datetime"
      optional:
        - field: "output_artifacts"
          type: "array"
          description: "List of artifact paths produced"
        - field: "duration_seconds"
          type: "integer"
        - field: "error_message"
          type: "string"
          description: "Required if status=failed"
        - field: "steps_completed"
          type: "integer"
        - field: "steps_total"
          type: "integer"

    emitted_when: "Playbook engine completes playbook execution"

  - signal_id: "SIG_PB_003"
    name: "playbook_step_completed"
    category: "playbook"
    version: 1
    description: "A single step within a playbook has completed"

    producer: "Playbook Engine"
    consumers:
      - agent: "Orchestration Agent"
        action: "Track step progress"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
        - field: "playbook_id"
          type: "string"
        - field: "execution_id"
          type: "string"
        - field: "step_id"
          type: "string"
        - field: "step_name"
          type: "string"
        - field: "status"
          type: "enum"
          values: ["success", "skipped", "failed"]
        - field: "completed_at"
          type: "datetime"
      optional:
        - field: "output"
          type: "object"
        - field: "skipped_reason"
          type: "string"

    emitted_when: "Individual playbook step completes"

  # ============================================================================
  # TECH SIGNAL MAP SIGNALS
  # ============================================================================

  - signal_id: "SIG_TECH_001"
    name: "tech_signal_map_updated"
    category: "tech_signal_map"
    version: 1
    description: "Tech Signal Map has been recalculated with new data"

    producer: "Tech Signal Analyzer Agent"
    consumers:
      - agent: "SA Agent"
        action: "Review technology changes for customer alignment"
      - agent: "Competitive Intelligence Agent"
        action: "Update competitive positioning"
      - agent: "AE Agent"
        action: "Identify sales opportunities from tech trends"

    payload:
      required:
        - field: "realm_id"
          type: "string"
          description: "Realm identifier"
        - field: "updated_at"
          type: "datetime"
          description: "When radar was recalculated"
        - field: "technology_count"
          type: "integer"
          description: "Total technologies on radar"
        - field: "jobs_analyzed"
          type: "integer"
          description: "Number of job postings analyzed"
      optional:
        - field: "new_technologies_count"
          type: "integer"
          description: "New technologies added this period"
        - field: "ring_changes_count"
          type: "integer"
          description: "Technologies that changed rings"
        - field: "competitor_mentions_count"
          type: "integer"
          description: "Competitor tool mentions detected"
        - field: "radar_path"
          type: "string"
          description: "InfoHub path to radar file"

    emitted_when: "Tech Signal Map is regenerated from new job posting data"

    anti_patterns:
      - "Do not emit if no changes from previous map"
      - "Do not emit for partial or failed scans"

    example:
      realm_id: "ACME"
      updated_at: "2026-01-21T14:30:00Z"
      technology_count: 23
      jobs_analyzed: 147
      new_technologies_count: 3
      ring_changes_count: 2
      competitor_mentions_count: 8

  - signal_id: "SIG_TECH_002"
    name: "new_technology_detected"
    category: "tech_signal_map"
    version: 1
    description: "A new technology has been detected in job postings for the first time"

    producer: "Tech Signal Analyzer Agent"
    consumers:
      - agent: "SA Agent"
        action: "Evaluate technology relevance to current engagements"
      - agent: "Product Manager Agent"
        action: "Assess integration or partnership opportunities"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "technology_name"
          type: "string"
          description: "Canonical technology name"
        - field: "quadrant"
          type: "enum"
          values: ["Techniques", "Tools", "Platforms", "Languages & Frameworks"]
        - field: "ring"
          type: "enum"
          values: ["Adopt", "Trial", "Assess", "Hold"]
        - field: "first_seen_at"
          type: "datetime"
        - field: "initial_mention_count"
          type: "integer"
      optional:
        - field: "is_competitor"
          type: "boolean"
          description: "Is this a competitor technology"
        - field: "competitor_to"
          type: "string"
          description: "Which of our products it competes with"
        - field: "our_offering_match"
          type: "string"
          description: "Our product that aligns with this technology"
        - field: "avg_seniority_score"
          type: "number"
          description: "Average seniority of roles mentioning this tech"

    emitted_when: "Technology appears in job postings for the first time"

    example:
      realm_id: "ACME"
      technology_name: "Rust"
      quadrant: "Languages & Frameworks"
      ring: "Assess"
      first_seen_at: "2026-01-05T00:00:00Z"
      initial_mention_count: 5
      avg_seniority_score: 4.8

  - signal_id: "SIG_TECH_003"
    name: "technology_trending"
    category: "tech_signal_map"
    version: 1
    description: "A technology has changed rings or shows significant trend change"

    producer: "Tech Signal Analyzer Agent"
    consumers:
      - agent: "SA Agent"
        action: "Update technology recommendations"
      - agent: "Competitive Intelligence Agent"
        action: "Track competitive shifts (for competitor tech)"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "technology_name"
          type: "string"
        - field: "trend_direction"
          type: "enum"
          values: ["up", "down"]
        - field: "trend_percentage"
          type: "number"
          description: "Percentage change (positive or negative)"
        - field: "detected_at"
          type: "datetime"
      optional:
        - field: "previous_ring"
          type: "string"
        - field: "new_ring"
          type: "string"
        - field: "current_mentions"
          type: "integer"
        - field: "previous_mentions"
          type: "integer"
        - field: "is_competitor"
          type: "boolean"
        - field: "insight"
          type: "string"
          description: "AI-generated insight about the trend"

    emitted_when: "Technology shows >15% change or moves between rings"

    anti_patterns:
      - "Do not emit for minor fluctuations (<15%)"
      - "Do not emit for technologies with very low mention counts (<3)"

    example:
      realm_id: "ACME"
      technology_name: "LegacySIEM"
      trend_direction: "down"
      trend_percentage: -45.0
      detected_at: "2026-01-21T14:30:00Z"
      previous_ring: "Trial"
      new_ring: "Hold"
      is_competitor: true
      insight: "LegacySIEM mentions declining 45% - prime displacement opportunity"

  - signal_id: "SIG_TECH_004"
    name: "job_scan_completed"
    category: "tech_signal_map"
    version: 1
    description: "A job posting scan has completed for a realm"

    producer: "Tech Signal Scanner Agent"
    consumers:
      - agent: "Tech Signal Analyzer Agent"
        action: "Process scan results and update radar"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "scan_id"
          type: "string"
          description: "Unique scan identifier"
        - field: "status"
          type: "enum"
          values: ["completed", "partial", "failed"]
        - field: "completed_at"
          type: "datetime"
        - field: "jobs_found"
          type: "integer"
        - field: "jobs_processed"
          type: "integer"
      optional:
        - field: "jobs_skipped"
          type: "integer"
          description: "Duplicates or excluded jobs"
        - field: "technologies_extracted"
          type: "integer"
        - field: "new_technologies"
          type: "integer"
        - field: "sources_scanned"
          type: "array"
          description: "List of job sources scanned"
        - field: "scan_duration_seconds"
          type: "integer"
        - field: "errors"
          type: "array"
          description: "Error messages if any"

    emitted_when: "Job scan completes (success or failure)"

    example:
      realm_id: "ACME"
      scan_id: "scan_20260121_143000"
      status: "completed"
      completed_at: "2026-01-21T14:35:00Z"
      jobs_found: 150
      jobs_processed: 147
      jobs_skipped: 3
      technologies_extracted: 23
      new_technologies: 3
      sources_scanned: ["linkedin", "indeed", "company_careers"]

  # ============================================================================
  # MARKET NEWS ANALYSIS SIGNALS
  # ============================================================================

  - signal_id: "SIG_MNA_001"
    name: "market_news_digest_updated"
    category: "market_news"
    version: 1
    description: "A market news digest has been generated or updated for a realm or node"

    producer: "Market News Analysis Agent"
    consumers:
      - agent: "AE Agent"
        action: "Review digest for commercial opportunities and talking points"
      - agent: "SA Agent"
        action: "Review technical and market trend implications"
      - agent: "Risk Radar Agent"
        action: "Scan digest for risk signals and deal threats"

    payload:
      required:
        - field: "realm_id"
          type: "string"
          description: "Realm identifier"
        - field: "digest_scope"
          type: "enum"
          values: ["realm", "node"]
          description: "Whether this is a realm-level or node-level digest"
        - field: "generated_at"
          type: "datetime"
        - field: "period_start"
          type: "date"
        - field: "period_end"
          type: "date"
        - field: "items_relevant"
          type: "integer"
          description: "Number of relevant news items in the digest"
      optional:
        - field: "node_id"
          type: "string"
          description: "Node identifier (required when digest_scope is 'node')"
        - field: "domain"
          type: "string"
          description: "Solution domain (e.g., 'security', 'observability', 'search')"
        - field: "sources_scanned"
          type: "integer"
        - field: "high_impact_count"
          type: "integer"
          description: "Number of high-impact items in the digest"
        - field: "digest_path"
          type: "string"
          description: "Vault path to the generated digest file"

    emitted_when: "Weekly digest is generated for a realm or node"

    anti_patterns:
      - "Do not emit if no relevant news items were found"
      - "Do not emit for partial scans that fail quality gates"

    example:
      realm_id: "ACME_CORP"
      digest_scope: "node"
      node_id: "SECURITY_CONSOLIDATION"
      domain: "security"
      generated_at: "2026-02-10T06:00:00Z"
      period_start: "2026-02-03"
      period_end: "2026-02-10"
      items_relevant: 11
      sources_scanned: 7
      high_impact_count: 3
      digest_path: "vault/ACME_CORP/SECURITY_CONSOLIDATION/internal-infohub/market_intelligence/news_digest.yaml"

  - signal_id: "SIG_MNA_002"
    name: "high_impact_news_detected"
    category: "market_news"
    version: 1
    description: "A high-impact news item has been detected that requires immediate attention"

    producer: "Market News Analysis Agent"
    consumers:
      - agent: "AE Agent"
        action: "Assess commercial impact and adjust engagement strategy"
      - agent: "Risk Radar Agent"
        action: "Evaluate risk implications and update risk register"
      - agent: "Orchestration Agent"
        action: "Determine if immediate stakeholder notification is needed"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "headline"
          type: "string"
          description: "News headline or summary"
        - field: "category"
          type: "enum"
          values: ["financial", "leadership", "product", "regulatory", "competitive", "strategic"]
        - field: "source"
          type: "string"
        - field: "confidence"
          type: "enum"
          values: ["confirmed", "reported", "rumored"]
        - field: "relevance_score"
          type: "number"
          description: "Relevance score (0.0-1.0)"
        - field: "detected_at"
          type: "datetime"
      optional:
        - field: "affected_nodes"
          type: "array"
          description: "Node IDs affected by this news"
        - field: "impact_assessment"
          type: "string"
          description: "AI-generated impact analysis"
        - field: "recommended_actions"
          type: "array"
          description: "Suggested actions by role"
        - field: "urgency"
          type: "enum"
          values: ["IMMEDIATE", "THIS_WEEK", "NEXT_REVIEW", "MONITOR"]

    emitted_when: "News item exceeds urgency threshold (relevance_score >= 0.8)"

    anti_patterns:
      - "Do not emit for routine company updates (blog posts, minor PR)"
      - "Do not emit for unverified rumors unless confidence is explicitly 'rumored'"
      - "Do not emit more than 3 high-impact signals per realm per day"

    example:
      realm_id: "INITECH"
      headline: "Initech closes $45M Series C led by Insight Partners"
      category: "financial"
      source: "TechCrunch"
      confidence: "confirmed"
      relevance_score: 0.93
      detected_at: "2026-02-04T09:15:00Z"
      affected_nodes: ["SEARCH_EVALUATION"]
      impact_assessment: "Fresh capital eliminates budget risk for search platform investment"
      urgency: "THIS_WEEK"

  - signal_id: "SIG_MNA_003"
    name: "competitive_news_detected"
    category: "market_news"
    version: 1
    description: "News directly involving a competitor in an active node engagement"

    producer: "Market News Analysis Agent"
    consumers:
      - agent: "Competitive Intelligence Agent"
        action: "Update battlecards and competitive positioning"
      - agent: "SA Agent"
        action: "Prepare technical counter-positioning"
      - agent: "AE Agent"
        action: "Adjust deal strategy based on competitive shift"

    payload:
      required:
        - field: "realm_id"
          type: "string"
        - field: "node_id"
          type: "string"
          description: "Node where competitor is active"
        - field: "competitor"
          type: "string"
          description: "Competitor name"
        - field: "news_type"
          type: "enum"
          values: ["product_launch", "pricing_change", "partnership", "acquisition", "analyst_rating", "outage_incident"]
        - field: "headline"
          type: "string"
        - field: "source"
          type: "string"
        - field: "detected_at"
          type: "datetime"
      optional:
        - field: "our_response"
          type: "string"
          description: "Recommended counter-response"
        - field: "urgency"
          type: "enum"
          values: ["IMMEDIATE", "THIS_WEEK", "NEXT_REVIEW", "MONITOR"]
        - field: "confidence"
          type: "enum"
          values: ["confirmed", "reported", "rumored"]
        - field: "impact_on_deal"
          type: "enum"
          values: ["positive", "negative", "neutral"]
          description: "Whether this helps or hurts our position"

    emitted_when: "News directly involves a competitor listed in a node's competitive_context"

    anti_patterns:
      - "Do not emit for competitors not in any active node's competitive context"
      - "Do not emit for generic competitor marketing content"
      - "Do not duplicate signals already emitted by CI Agent from other sources"

    example:
      realm_id: "INITECH"
      node_id: "SEARCH_EVALUATION"
      competitor: "Algolia"
      news_type: "pricing_change"
      headline: "Algolia announces 30% price increase for growth-tier customers"
      source: "Industry pricing intelligence"
      detected_at: "2026-01-18T10:00:00Z"
      our_response: "Update TCO comparison; $100K+ annual savings opportunity"
      urgency: "THIS_WEEK"
      confidence: "reported"
      impact_on_deal: "positive"

# ------------------------------------------------------------------------------
# CUSTOM SIGNAL VALIDATION RULES
# ------------------------------------------------------------------------------
custom_signal_rules:
  registration_required: true
  validation_schema:
    required_fields:
      - "signal_id"      # Must start with SIG_CUSTOM_
      - "name"           # Lowercase, underscores
      - "producer"       # Must be valid agent
      - "payload"        # Must define required fields
      - "emitted_when"   # Human description

    naming_rules:
      signal_id: "^SIG_CUSTOM_[A-Z0-9]{3,}$"
      name: "^[a-z][a-z0-9_]*$"

    validation_process:
      1: "Submit custom signal definition to Orchestration Agent"
      2: "Orchestration Agent validates against schema"
      3: "Orchestration Agent checks for conflicts with existing signals"
      4: "If approved, signal is added to custom_signals section"
      5: "Consumers can then subscribe to the new signal"

    rejection_reasons:
      - "Signal name conflicts with existing signal"
      - "Payload schema invalid"
      - "No valid consumers defined"
      - "Duplicates functionality of existing signal"

  # Registered custom signals go here
  custom_signals: []

# ------------------------------------------------------------------------------
# SIGNAL FLOW METADATA
# ------------------------------------------------------------------------------
signal_flows:
  meeting_to_actions:
    description: "Flow from meeting processing to action items"
    signals:
      - "SIG_ART_003"  # meeting_processed
      - "SIG_ART_001"  # artifact_created (action items)
      - "SIG_HLT_004"  # action_overdue (if deadline passes)

  deal_progression:
    description: "Flow through deal lifecycle"
    signals:
      - "SIG_LC_001"   # node_created
      - "SIG_COM_001"  # deal_stage_changed (multiple)
      - "SIG_COM_002"  # deal_closed
      - "SIG_LC_002"   # node_status_changed

  risk_lifecycle:
    description: "Flow of risk from identification to resolution"
    signals:
      - "SIG_HLT_001"  # risk_identified
      - "SIG_HLT_002"  # risk_status_changed
      - "SIG_GOV_002"  # escalation_triggered (if severe)
      - "SIG_GOV_003"  # escalation_resolved

  tech_signal_map_update:
    description: "Flow from job scan to signal map update and insights"
    signals:
      - "SIG_TECH_004"  # job_scan_completed
      - "SIG_TECH_001"  # tech_signal_map_updated
      - "SIG_TECH_002"  # new_technology_detected (for each new tech)
      - "SIG_TECH_003"  # technology_trending (for significant changes)

  approval_workflow:
    description: "Flow from agent output through human approval gate to downstream release"
    signals:
      - "SIG_GOV_004"  # approval_requested (agent produces high-stakes artifact)
      - "SIG_HLT_004"  # action_overdue (Nudger reminds if SLA breached)
      - "SIG_GOV_005"  # approval_resolved (human approves, rejects, or requests changes)
      - "SIG_ART_002"  # artifact_updated (if changes_requested, agent revises)

  market_news_intelligence:
    description: "Flow from news scan to digest generation and high-impact alerts"
    signals:
      - "SIG_MNA_001"  # market_news_digest_updated (weekly)
      - "SIG_MNA_002"  # high_impact_news_detected (on-demand)
      - "SIG_MNA_003"  # competitive_news_detected (feeds CI Agent)

  action_signal_completion:
    description: "Flow from seller activity signals to automatic action completion"
    signals:
      - "SIG_ART_003"  # meeting_processed (triggers signal scan)
      - "SIG_ART_001"  # artifact_created (new vault content as signal)
      - "SIG_ART_002"  # artifact_updated (changed vault content as signal)
      - "SIG_HLT_005"  # action_completion_detected (match found)
      - "SIG_HLT_006"  # action_completion_confirmed (human confirms suggestion)
      - "SIG_HLT_007"  # action_completion_reverted (human reverts auto-complete)

  knowledge_vault_governance:
    description: "Flow from engagement close through knowledge extraction to vault curation"
    signals:
      - "SIG_LC_002"   # node_status_changed (to completed)
      - "SIG_GOV_010"  # engagement_learnings_ready (InfoHub Curator)
      - "SIG_GOV_006"  # knowledge_proposal_received (any agent)
      - "SIG_GOV_007"  # knowledge_proposal_validated (Knowledge Vault Curator)
      - "SIG_GOV_004"  # approval_requested (human review)
      - "SIG_GOV_005"  # approval_resolved (human approves/rejects)
      - "SIG_GOV_008"  # knowledge_gap_detected (coverage analysis)
      - "SIG_GOV_009"  # knowledge_item_obsolete (obsolescence detection)
