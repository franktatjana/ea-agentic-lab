# PLAYBOOK: TECHDRIVE Technical Qualification Framework
# The SA's Equivalent of MEDDPICC - Technical qualification for enterprise deals
# Version 1.0 - PLAYBOOK_EXECUTION_SPECIFICATION standard

# ==============================================================================
# PLAYBOOK STECKBRIEF
# ==============================================================================
steckbrief:
  playbook_id: "PB_802"
  name: "TECHDRIVE"
  category: "solution_architects"
  mode: "ASSESSMENT"
  version: "1.0"
  status: "production_ready"

  one_liner: "Qualify technical fit and implementation readiness using TECHDRIVE methodology to assess technical health, identify blockers, and determine deployment success probability"
  framework_origin: "Industry SA Best Practices - Technical Qualification"

  owner_agent: "SA Agent"
  supporting_agents: ["POC Agent", "Specialist Agent", "Delivery Agent"]

  triggers_summary:
    - "Customer requests POC or technical evaluation"
    - "Opportunity moves to Stage 3 (Technical Validation) or discovery complete"
    - "Stage 2+ with high technical complexity, or POC requested without assessment"

  anti_patterns:
    - "Opportunity in Stage 1 (use discovery framework first)"
    - "Renewal-only with no technical changes"
    - "Standard product sale with no integration"
    - "Customer has existing deployment with same use case"

  key_inputs:
    - "Technical discovery findings"
    - "Customer's current technical environment and architecture"
    - "Technical requirements from customer"

  key_outputs:
    - artifact: "TECHDRIVE Assessment Scorecard"
      format: "yaml"
    - artifact: "Risk Register with Technical Blockers"
      format: "yaml"
    - artifact: "POC Readiness Assessment"
      format: "yaml"

  key_decisions:
    - "No Technical Champion: identify and develop technical advocate before proceeding"
    - "Critical blockers: address before POC, escalate to SA leadership + product team"
    - "Not POC-ready (score < 52%): complete discovery and resolve gaps first"
    - "Well-qualified (score >= 74%): proceed with POC or implementation"
    - "Enterprise readiness gap on large deal ($250K+): conduct readiness assessment"

  complexity: "HIGH"
  estimated_inputs: 7
  estimated_rules: 7

  source_file: "domain/playbooks/solution_architects/PB_802_techdrive.yaml"
  last_updated: "2026-01-20"

# ==============================================================================
# PLAYBOOK METADATA
# ==============================================================================
framework_name: "TECHDRIVE"
framework_source: "Industry SA Best Practices - Technical Qualification"
playbook_mode: "ASSESSMENT"
playbook_category: "pursuit_sales_support"
intended_agent_role: "SA Agent"
secondary_agents: ["POC Agent", "Specialist Agent", "Delivery Agent"]

primary_objective: "Qualify technical fit and implementation readiness using TECHDRIVE methodology to assess technical health, identify blockers, and determine deployment success probability"

when_not_to_use:
  - "Opportunity in Stage 1 (use discovery framework first)"
  - "Renewal-only with no technical changes"
  - "Standard product sale with no integration"
  - "Customer has existing deployment with same use case"

# ==============================================================================
# TECHDRIVE FRAMEWORK DEFINITION
# ==============================================================================
# T - Technical Requirements
# E - Environment
# C - Champion (Technical)
# H - Hurdles
# D - Decision Criteria (Tech)
# R - Risk Mitigation
# I - Implementation Path
# V - Validation Plan
# E - Enterprise Readiness

# ==============================================================================
# TRIGGER CONDITIONS
# ==============================================================================
trigger_conditions:
  automatic:
    - event: "poc_requested"
      description: "Customer requests POC or technical evaluation"

    - event: "opportunity_stage_3"
      description: "Opportunity moves to Stage 3 (Technical Validation)"

    - event: "technical_discovery_complete"
      description: "SA has completed technical discovery"

    - event: "complex_integration_identified"
      description: "Multi-system integration required"

  manual:
    - "SA requests technical qualification assessment"
    - "AE requests technical health check before forecast"
    - "Pre-POC technical readiness review"

  conditional:
    - condition: "$.opportunity.stage >= 2 AND $.technical.complexity == 'HIGH'"
      description: "Stage 2+ with high technical complexity"

    - condition: "$.poc.requested == true AND $.techdrive.last_assessed == null"
      description: "POC requested but no TECHDRIVE assessment"

# ==============================================================================
# REQUIRED INPUTS
# ==============================================================================
validation_inputs:
  mandatory:
    - artifact: "{account}/external-infohub/opportunities/{opportunity}/discovery.yaml"
      description: "Technical discovery findings"
    - artifact: "{account}/external-infohub/architecture/current_state.yaml"
      description: "Customer's current technical environment"
    - artifact: "{account}/external-infohub/opportunities/{opportunity}/requirements.yaml"
      description: "Technical requirements from customer"

  optional:
    - artifact: "{account}/external-infohub/context/stakeholder_map.yaml"
      use: "Identify technical champion"
    - artifact: "{account}/external-infohub/architecture/target_state.yaml"
      use: "Understand desired end state"
    - artifact: "Meeting notes from technical sessions"
      use: "Extract technical signals"
    - artifact: "POC Success Plan"
      use: "Align with validation criteria"

  minimum_data_threshold:
    - "At least 3 use cases or technical requirements documented"
    - "Technical champion or evaluator identified"
    - "High-level environment understood"

# ==============================================================================
# KEY QUESTIONS TO EXTRACT (TECHDRIVE Framework)
# ==============================================================================
key_questions:
  technical_requirements:
    focus: "What are the core use cases and technical pain points we're addressing?"
    questions:
      - "What specific use cases must the solution address?"
      - "What are the primary technical pain points?"
      - "What functional requirements are must-have vs. nice-to-have?"
      - "What performance requirements exist (throughput, latency, scale)?"
      - "What data types, volumes, and sources need to be handled?"
    evidence_required: ["Requirements doc", "use case descriptions", "performance SLAs"]

  environment:
    focus: "What's the existing tech stack, architecture, data flows, and integrations?"
    questions:
      - "What is the current technology stack and architecture?"
      - "What data sources need to be integrated?"
      - "What existing tools will our solution replace or complement?"
      - "What cloud platforms or infrastructure are in use?"
      - "What APIs, protocols, or data formats are required?"
    evidence_required: ["Architecture diagram", "integration requirements", "tech stack inventory"]

  champion:
    focus: "Who is the technical champion? Are they influential, informed, and active?"
    questions:
      - "Who is the technical evaluator or champion?"
      - "Does the technical champion have influence over the decision?"
      - "Is the technical champion actively engaged and responsive?"
      - "Does the champion understand and advocate for our solution?"
      - "Will the champion help us navigate technical objections?"
    evidence_required: ["Champion name/role", "engagement evidence", "advocacy indicators"]

  hurdles:
    focus: "What are the technical risks, blockers, constraints, or unknowns?"
    questions:
      - "What technical blockers or constraints exist?"
      - "What security or compliance requirements could block deployment?"
      - "What resource or skill gaps exist on the customer side?"
      - "What unknowns or uncertainties need to be resolved?"
      - "What previous technical failures or concerns exist?"
    evidence_required: ["Blocker list", "security requirements", "constraint documentation"]

  decision_criteria_tech:
    focus: "What technical success criteria must be met? Performance, compliance, security?"
    questions:
      - "What technical criteria will determine success?"
      - "What performance benchmarks must be met?"
      - "What security or compliance certifications are required?"
      - "How will technical success be measured and validated?"
      - "What criteria favor us vs. competitors technically?"
    evidence_required: ["Success criteria list", "benchmark requirements", "compliance checklist"]

  risk_mitigation:
    focus: "How are we addressing technical, operational, or timeline-related risks?"
    questions:
      - "What is our mitigation plan for each technical risk?"
      - "How are we addressing integration complexity?"
      - "What operational risks exist and how will we address them?"
      - "How are we managing timeline risks?"
      - "What contingency plans exist for technical failures?"
    evidence_required: ["Risk register", "mitigation plans", "contingency documentation"]

  implementation_path:
    focus: "Is there a clear technical roadmap? POC → MVP → Production? Who does what?"
    questions:
      - "What is the implementation roadmap and timeline?"
      - "What are the phases (POC → Pilot → Production)?"
      - "Who owns each phase from customer and vendor side?"
      - "What resources and skills are required for each phase?"
      - "What dependencies exist between phases?"
    evidence_required: ["Implementation plan", "phase definitions", "resource plan"]

  validation_plan:
    focus: "How will technical success be measured? What KPIs, test plans, or SLAs apply?"
    questions:
      - "How will we validate technical success?"
      - "What test plans or acceptance criteria exist?"
      - "What KPIs or metrics will be measured?"
      - "What SLAs or performance targets must be met?"
      - "Who signs off on technical validation?"
    evidence_required: ["Test plan", "acceptance criteria", "KPI definitions"]

  enterprise_readiness:
    focus: "Is the solution scalable, secure, maintainable, and production-ready?"
    questions:
      - "Does the solution meet enterprise scale requirements?"
      - "Does the solution meet security and compliance requirements?"
      - "Is the solution maintainable and supportable long-term?"
      - "Is there a path to production-ready deployment?"
      - "What ongoing operational requirements exist?"
    evidence_required: ["Scale assessment", "security review", "supportability analysis"]

# ==============================================================================
# DECISION LOGIC (DLL Syntax)
# ==============================================================================
decision_logic:
  scoring:
    # Each TECHDRIVE element scored 0-3
    # 0 = Not addressed, 1 = Partially addressed, 2 = Well understood, 3 = Validated/Confirmed
    max_score: 27  # 9 elements x 3
    green_threshold: 20  # 74%
    yellow_threshold: 14  # 52%
    red_threshold: 13     # Below 52%

  rules:
    - id: "no_technical_champion"
      condition: "$.techdrive.champion.score <= 1"
      severity: "HIGH"
      output_type: "Risk + Action"
      decision:
        title: "No Technical Champion or Weak Technical Advocate"
        context: "Technical champion is critical for navigating technical evaluation"
        recommendation: "Identify and develop technical champion"
        actions:
          - "Identify potential technical champion candidates"
          - "Provide technical enablement to champion"
          - "Schedule technical deep-dive with champion"
        owner: "Solution Architect"
      creates:
        - object_type: "Risk"
          category: "relationship"
          severity: "HIGH"

    - id: "critical_hurdles"
      condition: "$.techdrive.hurdles.blockers.length > 0 AND $.techdrive.hurdles.blockers[?(@.severity=='CRITICAL')].length > 0"
      severity: "HIGH"
      output_type: "Risk + Escalation"
      decision:
        title: "Critical Technical Blockers Identified"
        context: "Unresolved blockers will prevent successful deployment"
        recommendation: "Address critical blockers before proceeding with POC"
        actions:
          - "Document each blocker with resolution path"
          - "Engage specialists if needed"
          - "Escalate to product team if feature gap"
        escalate_to: "SA Leadership + Product Team"
      creates:
        - object_type: "Risk"
          category: "technical"
          severity: "CRITICAL"

    - id: "unclear_requirements"
      condition: "$.techdrive.technical_requirements.score <= 1"
      severity: "MEDIUM"
      output_type: "Action"
      decision:
        title: "Technical Requirements Not Clearly Defined"
        context: "Cannot scope solution or POC without clear requirements"
        recommendation: "Conduct technical discovery to clarify requirements"
        actions:
          - "Schedule technical discovery workshop"
          - "Document use cases in detail"
          - "Validate requirements with customer"
        owner: "Solution Architect"

    - id: "no_implementation_path"
      condition: "$.techdrive.implementation_path.score == 0"
      severity: "MEDIUM"
      output_type: "Risk"
      decision:
        title: "No Implementation Roadmap Defined"
        context: "Customer and vendor alignment on implementation path is critical"
        recommendation: "Co-develop implementation roadmap with customer"
        actions:
          - "Define phases: POC → Pilot → Production"
          - "Identify resource requirements per phase"
          - "Agree on timeline with customer"
        owner: "Solution Architect + Delivery"

    - id: "not_poc_ready"
      condition: "$.techdrive.total_score < 14 AND $.poc.requested == true"
      severity: "HIGH"
      output_type: "Risk + Escalation"
      decision:
        title: "Not Ready for POC - TECHDRIVE Score Below Threshold"
        context: "Starting POC with significant technical gaps risks failure"
        recommendation: "Address gaps before starting POC"
        actions:
          - "Complete technical discovery"
          - "Resolve critical hurdles"
          - "Define clear success criteria"
        escalate_to: "SA Leadership"
      creates:
        - object_type: "Risk"
          category: "technical"
          severity: "HIGH"

    - id: "well_qualified_technically"
      condition: "$.techdrive.total_score >= 20"
      severity: "LOW"
      output_type: "Confidence"
      decision:
        title: "Technically Well-Qualified - Ready for POC/Implementation"
        context: "Strong TECHDRIVE score indicates high technical success probability"
        recommendation: "Proceed with POC or implementation"
        actions:
          - "Finalize POC Success Plan"
          - "Allocate SA resources"
          - "Begin technical implementation"

    - id: "enterprise_readiness_gap"
      condition: "$.techdrive.enterprise_readiness.score <= 1 AND $.opportunity.arr >= 250000"
      severity: "MEDIUM"
      output_type: "Risk"
      decision:
        title: "Enterprise Readiness Concerns for Large Deal"
        context: "Large enterprise deals require validated enterprise readiness"
        recommendation: "Conduct enterprise readiness assessment"
        actions:
          - "Review scalability requirements"
          - "Validate security and compliance"
          - "Assess long-term supportability"
        owner: "Solution Architect + Specialist"

# ==============================================================================
# EXPECTED OUTPUTS
# ==============================================================================
validation_outputs:
  primary_artifact:
    path: "{account}/external-infohub/opportunities/{opportunity}/techdrive_assessment_{YYYY-MM-DD}.yaml"
    format: "yaml"
    sections:
      - executive_summary
      - techdrive_scorecard
      - gap_analysis
      - risk_register
      - action_plan
      - poc_readiness

    schema:
      technical_requirements:
        score: {type: "integer", min: 0, max: 3}
        use_cases: {type: "array"}
        pain_points: {type: "array"}
        requirements:
          must_have: {type: "array"}
          nice_to_have: {type: "array"}
        status: {type: "string", enum: ["RED", "YELLOW", "GREEN"]}
        gaps: {type: "array"}

      environment:
        score: {type: "integer", min: 0, max: 3}
        tech_stack: {type: "array"}
        integrations: {type: "array"}
        cloud_platform: {type: "string"}
        data_sources: {type: "array"}
        status: {type: "string", enum: ["RED", "YELLOW", "GREEN"]}

      champion:
        score: {type: "integer", min: 0, max: 3}
        name: {type: "string", nullable: true}
        title: {type: "string", nullable: true}
        influence: {type: "string", enum: ["HIGH", "MEDIUM", "LOW", "UNKNOWN"]}
        engagement: {type: "string", enum: ["ACTIVE", "PASSIVE", "DISENGAGED"]}
        status: {type: "string", enum: ["RED", "YELLOW", "GREEN"]}

      hurdles:
        score: {type: "integer", min: 0, max: 3}
        blockers:
          type: "array"
          items:
            blocker: {type: "string"}
            severity: {type: "string", enum: ["CRITICAL", "HIGH", "MEDIUM", "LOW"]}
            mitigation: {type: "string"}
            owner: {type: "string"}
        constraints: {type: "array"}
        unknowns: {type: "array"}
        status: {type: "string", enum: ["RED", "YELLOW", "GREEN"]}

      decision_criteria_tech:
        score: {type: "integer", min: 0, max: 3}
        criteria:
          type: "array"
          items:
            criterion: {type: "string"}
            target: {type: "string"}
            our_position: {type: "string", enum: ["EXCEEDS", "MEETS", "AT_RISK", "UNKNOWN"]}
        compliance_requirements: {type: "array"}
        status: {type: "string", enum: ["RED", "YELLOW", "GREEN"]}

      risk_mitigation:
        score: {type: "integer", min: 0, max: 3}
        risks:
          type: "array"
          items:
            risk: {type: "string"}
            category: {type: "string"}
            mitigation: {type: "string"}
            status: {type: "string"}
        contingency_plans: {type: "array"}
        status: {type: "string", enum: ["RED", "YELLOW", "GREEN"]}

      implementation_path:
        score: {type: "integer", min: 0, max: 3}
        phases:
          type: "array"
          items:
            phase: {type: "string"}
            duration: {type: "string"}
            owner: {type: "string"}
            deliverables: {type: "array"}
        timeline: {type: "string"}
        resource_requirements: {type: "array"}
        status: {type: "string", enum: ["RED", "YELLOW", "GREEN"]}

      validation_plan:
        score: {type: "integer", min: 0, max: 3}
        success_criteria: {type: "array"}
        test_plan: {type: "string", nullable: true}
        kpis: {type: "array"}
        acceptance_owner: {type: "string", nullable: true}
        status: {type: "string", enum: ["RED", "YELLOW", "GREEN"]}

      enterprise_readiness:
        score: {type: "integer", min: 0, max: 3}
        scalability:
          assessment: {type: "string"}
          status: {type: "string", enum: ["READY", "NEEDS_WORK", "UNKNOWN"]}
        security:
          assessment: {type: "string"}
          certifications_required: {type: "array"}
          status: {type: "string", enum: ["READY", "NEEDS_WORK", "UNKNOWN"]}
        maintainability:
          assessment: {type: "string"}
          status: {type: "string", enum: ["READY", "NEEDS_WORK", "UNKNOWN"]}
        status: {type: "string", enum: ["RED", "YELLOW", "GREEN"]}

      total_score:
        value: {type: "integer", min: 0, max: 27}
        percentage: {type: "number"}
        overall_status: {type: "string", enum: ["RED", "YELLOW", "GREEN"]}
        poc_ready: {type: "boolean"}

  risk_objects:
    path: "{account}/internal-infohub/risks/"
    create_if:
      - "Critical technical blocker identified"
      - "Enterprise readiness gap for large deal"
      - "TECHDRIVE score below threshold"

  action_objects:
    path: "{account}/internal-infohub/actions/"
    create_if:
      - "Gap requires specific technical action"
      - "Discovery needed before proceeding"

# ==============================================================================
# STOP CONDITIONS
# ==============================================================================
stop_conditions:
  escalate_to_human:
    - condition: "$.techdrive.total_score < 9"
      reason: "Fundamentally not ready for technical engagement"
      action: "Recommend additional discovery before technical evaluation"

    - condition: "$.techdrive.hurdles.blockers[?(@.severity=='CRITICAL')].length >= 2"
      reason: "Multiple critical blockers require human judgment"
      action: "Escalate to SA leadership for deal review"

    - condition: "$.poc.start_date < 7_days AND $.techdrive.total_score < 14"
      reason: "POC imminent but not technically qualified"
      action: "Alert SA leadership - recommend POC delay"

  insufficient_data_signals:
    - "No technical discovery completed"
    - "No requirements documented"
    - "No architecture information available"

# ==============================================================================
# VALIDATION CHECKS
# ==============================================================================
validation_checks:
  pre_execution:
    - check: "$.opportunity.id EXISTS"
      description: "Opportunity must exist"
    - check: "$.technical_discovery.completed == true"
      description: "Technical discovery should be completed"

  post_execution:
    - check: "$.techdrive.total_score IS_CALCULATED"
      description: "Total score must be calculated"
    - check: "$.techdrive.hurdles.blockers[*].mitigation EXISTS WHERE $.techdrive.hurdles.blockers.length > 0"
      description: "All blockers must have mitigation plans"

  output_quality:
    - "All technical requirements must be specific and measurable"
    - "Blockers must have severity and mitigation"
    - "Implementation phases must have owners"

# ==============================================================================
# FRAMEWORK REFERENCE
# ==============================================================================
framework_reference:
  techdrive_elements:
    technical_requirements:
      definition: "Core use cases and technical pain points being addressed"
      focus: "What problem are we solving technically?"
      score_guide:
        0: "Requirements unknown"
        1: "High-level requirements known"
        2: "Detailed requirements documented"
        3: "Requirements validated with customer"

    environment:
      definition: "Existing tech stack, architecture, data flows, integrations"
      focus: "What does the technical landscape look like?"
      score_guide:
        0: "Environment unknown"
        1: "High-level environment known"
        2: "Detailed architecture documented"
        3: "Integration points validated"

    champion:
      definition: "Technical champion who is influential, informed, and active"
      focus: "Who is our technical advocate?"
      score_guide:
        0: "No technical champion"
        1: "Technical contact exists but not advocating"
        2: "Technical champion identified and engaged"
        3: "Influential champion actively advocating"

    hurdles:
      definition: "Technical risks, blockers, constraints, unknowns"
      focus: "What could prevent technical success?"
      score_guide:
        0: "Hurdles unknown or unaddressed"
        1: "Hurdles identified"
        2: "Hurdles assessed with mitigation plans"
        3: "Hurdles mitigated or resolved"

    decision_criteria_tech:
      definition: "Technical success criteria - performance, compliance, security"
      focus: "How will technical success be judged?"
      score_guide:
        0: "Criteria unknown"
        1: "General criteria known"
        2: "Specific criteria documented"
        3: "Criteria validated, we meet/exceed"

    risk_mitigation:
      definition: "Plans for technical, operational, timeline risks"
      focus: "How are we managing technical risks?"
      score_guide:
        0: "Risks not addressed"
        1: "Risks identified"
        2: "Mitigation plans in place"
        3: "Mitigation validated, contingencies ready"

    implementation_path:
      definition: "Technical roadmap - POC → MVP → Production"
      focus: "What's the path to production?"
      score_guide:
        0: "No implementation path"
        1: "High-level phases known"
        2: "Detailed roadmap with owners"
        3: "Roadmap agreed with customer"

    validation_plan:
      definition: "How success is measured - KPIs, test plans, SLAs"
      focus: "How will we prove technical success?"
      score_guide:
        0: "No validation plan"
        1: "General success measures"
        2: "Specific KPIs and test plan"
        3: "Acceptance criteria agreed with customer"

    enterprise_readiness:
      definition: "Scalability, security, maintainability, production readiness"
      focus: "Is the solution enterprise-grade?"
      score_guide:
        0: "Enterprise readiness unknown"
        1: "Partial assessment"
        2: "Comprehensive assessment"
        3: "Enterprise readiness validated"

# ==============================================================================
# EXECUTION METADATA
# ==============================================================================
last_updated: "2026-01-20"
version: "1.0"
status: "production_ready"
notes: "TECHDRIVE technical qualification framework - SA equivalent of MEDDPICC"
