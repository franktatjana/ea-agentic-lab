# PLAYBOOK: Ansoff Matrix (Product-Market Growth Strategy)
# Framework operationalization for AI agents
# PLAYBOOK_EXECUTION_SPECIFICATION v1.0 standard

# ==============================================================================
# PLAYBOOK METADATA
# ==============================================================================
framework_name: "Ansoff Matrix"
framework_source: "Igor Ansoff (1957)"
playbook_mode: "GENERATIVE"
intended_agent_role: "AE Agent"
secondary_agents: ["SA Agent", "PM Agent", "Value Engineering Agent"]

primary_objective: "Identify growth strategies across four quadrants (Market Penetration, Product Development, Market Development, Diversification) to guide account expansion and resource allocation decisions"

when_not_to_use:
  - "Account < $100K ARR (insufficient scale for strategic planning)"
  - "First 60 days of customer relationship (insufficient baseline)"
  - "Customer in churn/litigation (resolve crisis first)"
  - "No product catalog or roadmap visibility"

# ==============================================================================
# TRIGGER CONDITIONS
# ==============================================================================
trigger_conditions:
  automatic:
    - event: "annual_account_planning"
      description: "Annual strategic account planning cycle"

    - event: "growth_strategy_request"
      description: "Explicit request for expansion strategy"

    - event: "stagnant_growth_detected"
      description: "ARR growth < 5% for 2+ quarters"
      condition: "$.metrics.arr_growth_rate < 0.05 AND $.metrics.quarters_stagnant >= 2"

    - event: "new_product_launch"
      description: "New product capability relevant to account"

  manual:
    - "AE requests growth opportunity analysis"
    - "Sales leadership requests account expansion strategy"
    - "Customer requests multi-product discussion"

  conditional:
    - condition: "$.opportunities.expansion.length == 0 AND $.account.arr > 250000"
      description: "Significant account with no documented expansion opportunities"

# ==============================================================================
# REQUIRED INPUTS
# ==============================================================================
validation_inputs:
  mandatory:
    - artifact: "{realm}/{node}/external-infohub/overview.md"
      description: "Account overview with current products and ARR"
    - artifact: "{realm}/{node}/external-infohub/installed_base.md"
      description: "Current product deployment and usage"
    - artifact: "Product Catalog"
      description: "Available products and capabilities"

  optional:
    - artifact: "{realm}/{node}/internal-infohub/stakeholders/relationship_map.md"
      use: "Identify decision makers for new products/markets"
    - artifact: "PM Agent product roadmap"
      use: "Understand upcoming capabilities"
    - artifact: "{realm}/{node}/external-infohub/meetings/*"
      use: "Extract customer needs and pain points"
    - artifact: "{realm}/intelligence/tech_signal_map/current_radar.yaml"
      use: "Technology adoption trends"

  minimum_data_threshold:
    - "Current ARR and product breakdown available"
    - "At least 3 months of customer engagement history"
    - "Product catalog accessible"

# ==============================================================================
# KEY QUESTIONS TO EXTRACT
# ==============================================================================
key_questions:
  market_penetration_existing_product_existing_market:
    - "What is current product adoption rate vs. potential within existing deployment?"
    - "What features are underutilized that could drive more value?"
    - "What upsell opportunities exist (tier upgrades, additional capacity)?"
    - "What competitive displacement opportunities exist within current scope?"
    - "What optimization or efficiency gains could justify increased investment?"

  product_development_new_product_existing_market:
    - "What customer pain points could be addressed by products not yet deployed?"
    - "What adjacent capabilities align with customer's existing use cases?"
    - "What upcoming product features align with customer roadmap?"
    - "What integration opportunities exist with customer's current tech stack?"
    - "What cross-sell opportunities exist within current stakeholder relationships?"

  market_development_existing_product_new_market:
    - "What other business units, regions, or teams could benefit from deployed products?"
    - "What new use cases could be addressed with existing products?"
    - "What organizational changes create expansion opportunities (M&A, reorgs)?"
    - "What partner or ecosystem opportunities exist?"
    - "What geographic expansion is possible?"

  diversification_new_product_new_market:
    - "What transformational opportunities exist beyond current scope?"
    - "What strategic initiatives could position vendor as critical infrastructure?"
    - "What emerging customer needs require new capabilities in new areas?"
    - "What industry trends create opportunities for new product categories?"
    - "What risk/reward considerations apply to diversification plays?"

# ==============================================================================
# DECISION LOGIC (DLL Syntax)
# ==============================================================================
decision_logic:
  rules:
    # Market Penetration opportunity detected
    - id: "market_penetration_priority"
      condition: "$.ansoff.market_penetration.items[?(@.confidence=='high')].length >= 2"
      severity: "MEDIUM"
      output_type: "Initiative"
      decision:
        title: "Prioritize market penetration for {node}"
        context: "Multiple high-confidence opportunities to expand within current footprint"
        recommendation: "Focus on adoption, optimization, and upsell before pursuing new products/markets"
        actions:
          - "Document specific upsell opportunities with ARR estimates"
          - "Engage customer success for adoption improvement"
          - "Schedule optimization review with technical stakeholders"
        owner: "Account Executive"
      creates:
        - object_type: "Initiative"
          priority: "HIGH"

    # Product Development opportunity
    - id: "product_development_opportunity"
      condition: "$.ansoff.product_development.items[?(@.estimated_arr > 100000)].length >= 1"
      severity: "MEDIUM"
      output_type: "Initiative"
      decision:
        title: "Cross-sell opportunity identified for {node}"
        context: "Customer need aligns with product not currently deployed"
        recommendation: "Engage specialist for discovery and qualification"
        actions:
          - "Identify relevant product specialist"
          - "Prepare customer context brief"
          - "Schedule discovery session"
        owner: "Solution Architect"
      creates:
        - object_type: "Initiative"
          priority: "MEDIUM"

    # Market Development opportunity
    - id: "market_development_expansion"
      condition: "$.ansoff.market_development.items[?(@.type=='new_business_unit' || @.type=='geographic')].length >= 1"
      severity: "MEDIUM"
      output_type: "Initiative + Risk"
      decision:
        title: "Land-and-expand opportunity in {node}"
        context: "Existing product success enables expansion to new internal markets"
        recommendation: "Leverage reference success to engage new stakeholders"
        actions:
          - "Identify decision makers in target business unit/region"
          - "Prepare reference case from current deployment"
          - "Engage AE for new market relationship building"
        owner: "Account Executive"
      creates:
        - object_type: "Initiative"
          priority: "MEDIUM"
        - object_type: "Risk"
          category: "execution"
          description: "New stakeholder relationships required"

    # Diversification requires caution
    - id: "diversification_risk_assessment"
      condition: "$.ansoff.diversification.items.length >= 1"
      severity: "LOW"
      output_type: "Decision"
      decision:
        title: "Diversification strategy evaluation for {node}"
        context: "New product in new market carries highest risk"
        recommendation: "Evaluate risk/reward carefully, consider only with executive sponsorship"
        actions:
          - "Validate customer strategic alignment"
          - "Assess internal capability to deliver"
          - "Require executive sponsor commitment before pursuing"
        owner: "Sales Leadership"
      creates:
        - object_type: "Decision"
          severity: "MEDIUM"

    # No growth opportunities identified
    - id: "growth_gap_alert"
      condition: "$.ansoff.total_opportunities < 2"
      severity: "HIGH"
      output_type: "Risk"
      decision:
        title: "Growth opportunity gap for {node}"
        context: "Limited expansion opportunities identified across all quadrants"
        recommendation: "Deep discovery required to uncover latent opportunities"
        actions:
          - "Schedule customer strategy discussion"
          - "Review customer public announcements and initiatives"
          - "Engage specialists for capability assessment"
        escalate_to: "Sales Leadership"
      creates:
        - object_type: "Risk"
          category: "strategic"
          severity: "MEDIUM"

# ==============================================================================
# EXPECTED OUTPUTS
# ==============================================================================
validation_outputs:
  primary_artifact:
    path: "{realm}/{node}/internal-infohub/frameworks/ansoff_matrix_{YYYY-MM-DD}.md"
    format: "markdown"
    sections:
      - executive_summary
      - market_penetration_analysis
      - product_development_analysis
      - market_development_analysis
      - diversification_analysis
      - recommended_strategy
      - action_plan

    schema:
      market_penetration:
        type: "array"
        items:
          opportunity: {type: "string", required: true}
          current_state: {type: "string", required: true}
          target_state: {type: "string", required: true}
          estimated_arr_impact: {type: "number"}
          confidence: {type: "string", enum: ["high", "medium", "low"]}
          evidence:
            type: "array"
            required: true
            items:
              source_artifact: {type: "string", required: true}
              date: {type: "string", required: true}
              excerpt: {type: "string", required: true}

      product_development:
        type: "array"
        items:
          product: {type: "string", required: true}
          customer_need: {type: "string", required: true}
          alignment_score: {type: "string", enum: ["high", "medium", "low"]}
          estimated_arr: {type: "number"}
          specialist_required: {type: "string", nullable: true}
          timeline: {type: "string"}
          evidence:
            type: "array"
            required: true

      market_development:
        type: "array"
        items:
          type: {type: "string", enum: ["new_business_unit", "geographic", "new_use_case", "partner"]}
          target_market: {type: "string", required: true}
          existing_product: {type: "string", required: true}
          estimated_arr: {type: "number"}
          stakeholders_identified: {type: "boolean"}
          evidence:
            type: "array"
            required: true

      diversification:
        type: "array"
        items:
          opportunity: {type: "string", required: true}
          new_product: {type: "string", required: true}
          new_market: {type: "string", required: true}
          strategic_rationale: {type: "string", required: true}
          risk_level: {type: "string", enum: ["high", "very_high"]}
          executive_sponsor_required: {type: "boolean", default: true}
          evidence:
            type: "array"
            required: true

  decision_objects:
    path: "{realm}/{node}/external-infohub/decisions/"
    create_if:
      - "Strategic direction choice between quadrants"
      - "Resource allocation decision required"

  initiative_objects:
    path: "{realm}/{node}/internal-infohub/initiatives/"
    create_if:
      - "Specific growth opportunity qualified"
      - "Specialist engagement required"

# ==============================================================================
# STOP CONDITIONS
# ==============================================================================
stop_conditions:
  escalate_to_human:
    - condition: "$.account.arr == null OR $.account.arr == 0"
      reason: "Cannot analyze growth strategy without current revenue baseline"
      action: "Request AE to confirm current ARR"

    - condition: "$.products.installed.length == 0"
      reason: "Cannot map existing products without installed base data"
      action: "Request installed base documentation"

    - condition: "diversification_opportunities_only"
      reason: "High-risk strategy requires executive decision"
      action: "Escalate to Sales Leadership for strategic guidance"

  insufficient_data_signals:
    - "No product usage data available"
    - "Customer organizational structure unknown"
    - "No customer strategic initiatives documented"

  ambiguity_signals:
    - "Unclear product ownership across business units"
    - "Conflicting customer priorities documented"

# ==============================================================================
# VALIDATION CHECKS
# ==============================================================================
validation_checks:
  pre_execution:
    - check: "$.client_id EXISTS"
      description: "Client ID must exist in InfoHub"
    - check: "$.account.arr > 0"
      description: "Current ARR must be documented"

  post_execution:
    - check: "$.ansoff.total_opportunities >= 1"
      description: "At least one opportunity identified"
    - check: "evidence_validation_passed"
      description: "All opportunities have evidence citations"
    - check: "$.ansoff.recommended_quadrant EXISTS"
      description: "Clear strategic recommendation provided"

  output_quality:
    - "No unsourced opportunity claims"
    - "All ARR estimates have confidence levels"
    - "Quadrant classification is correct (internal vs external, existing vs new)"

# ==============================================================================
# FRAMEWORK REFERENCE
# ==============================================================================
framework_reference:
  ansoff_quadrants:
    market_penetration:
      definition: "Grow existing products in existing markets"
      risk_level: "Low"
      examples: ["Upsell current users", "Increase adoption", "Displace competitors"]

    product_development:
      definition: "Introduce new products to existing markets"
      risk_level: "Medium"
      examples: ["Cross-sell new capabilities", "Deploy new product line"]

    market_development:
      definition: "Sell existing products to new markets"
      risk_level: "Medium"
      examples: ["Expand to new business units", "Enter new regions", "New use cases"]

    diversification:
      definition: "New products in new markets"
      risk_level: "High"
      examples: ["Transformational initiatives", "New strategic partnerships"]

# ==============================================================================
# EXECUTION METADATA
# ==============================================================================
last_updated: "2026-02-02"
version: "1.0"
status: "production_ready"
notes: "Ansoff Matrix playbook for product-market growth strategy analysis"
