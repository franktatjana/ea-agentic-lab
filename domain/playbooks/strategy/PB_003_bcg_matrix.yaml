# PLAYBOOK: BCG Growth-Share Matrix (Portfolio Analysis)
# Framework operationalization for AI agents
# PLAYBOOK_EXECUTION_SPECIFICATION v1.0 standard

# ==============================================================================
# PLAYBOOK METADATA
# ==============================================================================
framework_name: "BCG Growth-Share Matrix"
framework_source: "Boston Consulting Group (Bruce Henderson, 1970)"
playbook_mode: "GENERATIVE"
intended_agent_role: "AE Agent"
secondary_agents: ["SA Agent", "Value Engineering Agent", "PM Agent"]

primary_objective: "Classify account revenue streams and opportunities into Stars, Cash Cows, Question Marks, and Dogs to guide investment decisions, resource allocation, and portfolio rebalancing"

when_not_to_use:
  - "Single-product deployment (matrix requires multiple revenue streams)"
  - "Account < $200K ARR (insufficient portfolio complexity)"
  - "First 90 days of customer relationship (insufficient trend data)"
  - "No market growth data available for customer's industry"

# ==============================================================================
# TRIGGER CONDITIONS
# ==============================================================================
trigger_conditions:
  automatic:
    - event: "portfolio_review_cycle"
      description: "Quarterly or annual portfolio review"

    - event: "resource_allocation_request"
      description: "Request for investment prioritization"

    - event: "multiple_products_deployed"
      description: "Account has 3+ product lines deployed"
      condition: "$.products.deployed.length >= 3"

    - event: "budget_constraints"
      description: "Customer signals budget constraints requiring prioritization"

  manual:
    - "AE requests portfolio prioritization"
    - "Sales leadership requests account investment analysis"
    - "Customer requests ROI review across deployments"

  conditional:
    - condition: "$.products.deployed.length >= 2 AND $.metrics.arr_growth_variance > 0.2"
      description: "Multiple products with significant growth variance"

# ==============================================================================
# REQUIRED INPUTS
# ==============================================================================
validation_inputs:
  mandatory:
    - artifact: "{realm}/{node}/external-infohub/overview.md"
      description: "Account overview with ARR breakdown"
    - artifact: "{realm}/{node}/external-infohub/installed_base.md"
      description: "Product deployment details with usage metrics"
    - artifact: "Product/Solution ARR breakdown"
      description: "Revenue by product line"

  optional:
    - artifact: "{realm}/{node}/external-infohub/value/value_tracker.yaml"
      use: "Quantified business value by solution"
    - artifact: "Market growth data"
      use: "Industry growth rates for customer's market"
    - artifact: "Competitive intelligence"
      use: "Relative market position assessment"
    - artifact: "{realm}/{node}/internal-infohub/risks/*.md"
      use: "Identify risks to revenue streams"
    - artifact: "Usage analytics"
      use: "Product adoption and engagement trends"

  minimum_data_threshold:
    - "At least 2 distinct revenue streams/product lines"
    - "ARR data for each product line"
    - "6+ months of trend data for growth assessment"

# ==============================================================================
# KEY QUESTIONS TO EXTRACT
# ==============================================================================
key_questions:
  market_growth_assessment:
    - "What is the overall growth rate of the customer's industry/market?"
    - "Which product categories are growing fastest in the customer's context?"
    - "What technology adoption trends affect market growth (cloud, AI, security)?"
    - "What customer initiatives indicate high-growth areas?"
    - "What market disruptions could accelerate or decelerate growth?"

  relative_position_assessment:
    - "What is our market share within this account for each product?"
    - "How does our solution compare to alternatives the customer could use?"
    - "What is our competitive position for each use case?"
    - "What is customer satisfaction/NPS for each product line?"
    - "What renewal confidence exists for each revenue stream?"

  stars_high_growth_high_share:
    - "Which products are both growing rapidly AND have strong adoption?"
    - "What investments are needed to maintain star positions?"
    - "What competitive threats could erode star positions?"
    - "What expansion potential exists for star products?"

  cash_cows_low_growth_high_share:
    - "Which products have stable revenue with high adoption but limited growth?"
    - "What optimization opportunities exist to maximize cash cow efficiency?"
    - "What renewal risks threaten cash cow revenue?"
    - "How can cash cow stability fund investment in stars/question marks?"

  question_marks_high_growth_low_share:
    - "Which products have high market potential but low current adoption?"
    - "What investment is needed to convert question marks to stars?"
    - "What barriers prevent question mark adoption?"
    - "Should we invest or divest in question mark products?"

  dogs_low_growth_low_share:
    - "Which products have both low growth and low adoption?"
    - "Should dog products be maintained, divested, or repositioned?"
    - "What costs are associated with maintaining dog products?"
    - "Are there strategic reasons to maintain dogs (customer relationship, bundling)?"

# ==============================================================================
# DECISION LOGIC (DLL Syntax)
# ==============================================================================
decision_logic:
  rules:
    # Star investment required
    - id: "star_investment_priority"
      condition: "$.bcg.stars.items.length >= 1 AND $.bcg.stars.items[0].investment_needed == true"
      severity: "HIGH"
      output_type: "Initiative"
      decision:
        title: "Invest in star products for {node}"
        context: "Star products require continued investment to maintain leadership"
        recommendation: "Prioritize resources for star product expansion"
        actions:
          - "Allocate specialist resources to star products"
          - "Develop expansion roadmap for star use cases"
          - "Monitor competitive threats to star positions"
        owner: "Account Executive"
      creates:
        - object_type: "Initiative"
          priority: "HIGH"

    # Cash cow optimization
    - id: "cash_cow_optimization"
      condition: "$.bcg.cash_cows.items.length >= 1 AND $.bcg.cash_cows.total_arr > 500000"
      severity: "MEDIUM"
      output_type: "Initiative"
      decision:
        title: "Optimize cash cow efficiency for {node}"
        context: "Stable revenue streams should be optimized for maximum return"
        recommendation: "Focus on renewal assurance and operational efficiency"
        actions:
          - "Ensure high renewal confidence for cash cows"
          - "Identify cost optimization opportunities"
          - "Use cash cow stability to justify star/question mark investments"
        owner: "Account Executive"
      creates:
        - object_type: "Initiative"
          priority: "MEDIUM"

    # Question mark decision required
    - id: "question_mark_decision"
      condition: "$.bcg.question_marks.items.length >= 1"
      severity: "MEDIUM"
      output_type: "Decision"
      decision:
        title: "Investment decision required for question mark products in {node}"
        context: "Question marks require strategic decision: invest to convert to stars or divest"
        recommendation: "Evaluate investment requirements vs. probability of success"
        actions:
          - "Quantify investment needed to achieve star position"
          - "Assess competitive barriers and customer commitment"
          - "Make explicit invest/divest decision with timeline"
        stakeholders: ["AE", "SA", "Sales Leadership"]
      creates:
        - object_type: "Decision"
          severity: "MEDIUM"

    # Dog divestment consideration
    - id: "dog_assessment"
      condition: "$.bcg.dogs.items.length >= 1 AND $.bcg.dogs.total_arr > 0"
      severity: "LOW"
      output_type: "Decision"
      decision:
        title: "Assess dog product strategy for {node}"
        context: "Low-growth, low-share products may drain resources"
        recommendation: "Evaluate maintain vs. divest vs. reposition"
        actions:
          - "Calculate true cost of maintaining dog products"
          - "Identify any strategic value (bundling, relationship)"
          - "Consider graceful exit or repositioning strategy"
        owner: "Account Executive"
      creates:
        - object_type: "Decision"
          severity: "LOW"

    # Portfolio imbalance risk
    - id: "portfolio_imbalance_risk"
      condition: "$.bcg.cash_cows.items.length == 0 AND $.bcg.stars.items.length == 0"
      severity: "HIGH"
      output_type: "Risk"
      decision:
        title: "Portfolio imbalance risk for {node}"
        context: "No stable revenue (cash cows) or growth leaders (stars)"
        recommendation: "Urgent portfolio rebalancing required"
        actions:
          - "Prioritize converting question marks to stars"
          - "Identify opportunities to establish cash cow stability"
          - "Consider account health risk escalation"
        escalate_to: "Sales Leadership"
      creates:
        - object_type: "Risk"
          category: "strategic"
          severity: "HIGH"

    # Over-reliance on cash cows
    - id: "cash_cow_dependency_risk"
      condition: "$.bcg.cash_cows.percentage_of_total_arr > 0.80 AND $.bcg.stars.items.length == 0"
      severity: "MEDIUM"
      output_type: "Risk"
      decision:
        title: "Cash cow dependency risk for {node}"
        context: "Revenue concentrated in low-growth products with no growth leaders"
        recommendation: "Develop pipeline for star products"
        actions:
          - "Identify emerging high-growth opportunities"
          - "Invest in question marks with star potential"
          - "Monitor cash cow displacement risks"
        owner: "Account Executive"
      creates:
        - object_type: "Risk"
          category: "strategic"
          severity: "MEDIUM"

# ==============================================================================
# EXPECTED OUTPUTS
# ==============================================================================
validation_outputs:
  primary_artifact:
    path: "{realm}/{node}/internal-infohub/frameworks/bcg_matrix_{YYYY-MM-DD}.md"
    format: "markdown"
    sections:
      - executive_summary
      - portfolio_overview
      - stars_analysis
      - cash_cows_analysis
      - question_marks_analysis
      - dogs_analysis
      - investment_recommendations
      - action_plan

    schema:
      stars:
        type: "array"
        items:
          product: {type: "string", required: true}
          arr: {type: "number", required: true}
          growth_rate: {type: "number", required: true}
          market_share: {type: "string", enum: ["dominant", "strong", "competitive"]}
          investment_needed: {type: "boolean"}
          competitive_threats: {type: "array"}
          evidence:
            type: "array"
            required: true
            items:
              source_artifact: {type: "string", required: true}
              date: {type: "string", required: true}
              excerpt: {type: "string", required: true}

      cash_cows:
        type: "array"
        items:
          product: {type: "string", required: true}
          arr: {type: "number", required: true}
          growth_rate: {type: "number"}
          market_share: {type: "string", enum: ["dominant", "strong", "competitive"]}
          renewal_confidence: {type: "string", enum: ["high", "medium", "low"]}
          optimization_opportunities: {type: "array"}
          evidence:
            type: "array"
            required: true

      question_marks:
        type: "array"
        items:
          product: {type: "string", required: true}
          arr: {type: "number", required: true}
          growth_potential: {type: "string", enum: ["high", "medium"]}
          current_share: {type: "string", enum: ["low", "emerging"]}
          investment_required: {type: "number"}
          probability_of_success: {type: "string", enum: ["high", "medium", "low"]}
          recommendation: {type: "string", enum: ["invest", "divest", "hold"]}
          evidence:
            type: "array"
            required: true

      dogs:
        type: "array"
        items:
          product: {type: "string", required: true}
          arr: {type: "number", required: true}
          strategic_value: {type: "string", nullable: true}
          recommendation: {type: "string", enum: ["maintain", "divest", "reposition"]}
          exit_cost: {type: "number", nullable: true}
          evidence:
            type: "array"
            required: true

      portfolio_summary:
        type: "object"
        properties:
          total_arr: {type: "number", required: true}
          stars_percentage: {type: "number"}
          cash_cows_percentage: {type: "number"}
          question_marks_percentage: {type: "number"}
          dogs_percentage: {type: "number"}
          portfolio_health: {type: "string", enum: ["healthy", "imbalanced", "at_risk"]}

  decision_objects:
    path: "{realm}/{node}/external-infohub/decisions/"
    create_if:
      - "Investment decision required for question marks"
      - "Divestment decision for dogs"
      - "Portfolio rebalancing required"

  risk_objects:
    path: "{realm}/{node}/internal-infohub/risks/"
    create_if:
      - "Portfolio imbalance detected"
      - "Cash cow dependency risk"
      - "No star products identified"

  initiative_objects:
    path: "{realm}/{node}/internal-infohub/initiatives/"
    create_if:
      - "Star investment required"
      - "Cash cow optimization opportunity"
      - "Question mark conversion plan"

# ==============================================================================
# STOP CONDITIONS
# ==============================================================================
stop_conditions:
  escalate_to_human:
    - condition: "$.products.deployed.length < 2"
      reason: "BCG Matrix requires multiple product lines for portfolio analysis"
      action: "Use alternative framework (Three Horizons, Ansoff) for single-product accounts"

    - condition: "$.arr.breakdown_by_product == null"
      reason: "Cannot classify quadrants without ARR breakdown"
      action: "Request AE to provide ARR by product line"

    - condition: "$.bcg.all_dogs == true"
      reason: "All products classified as dogs - critical account health issue"
      action: "Escalate to Sales Leadership immediately"

  insufficient_data_signals:
    - "No growth trend data available"
    - "Market share/competitive position unknown"
    - "Less than 6 months of revenue history"

  ambiguity_signals:
    - "Unclear product boundaries (bundled solutions)"
    - "Conflicting growth indicators"
    - "Market definition unclear"

# ==============================================================================
# VALIDATION CHECKS
# ==============================================================================
validation_checks:
  pre_execution:
    - check: "$.client_id EXISTS"
      description: "Client ID must exist in InfoHub"
    - check: "$.products.deployed.length >= 2"
      description: "At least 2 product lines required"
    - check: "$.arr.total > 0"
      description: "Total ARR must be documented"

  post_execution:
    - check: "$.bcg.total_classified_arr == $.arr.total"
      description: "All ARR classified into quadrants"
    - check: "evidence_validation_passed"
      description: "All classifications have evidence"
    - check: "$.bcg.portfolio_summary EXISTS"
      description: "Portfolio summary generated"

  output_quality:
    - "No products classified without growth/share data"
    - "All quadrant assignments have rationale"
    - "Investment recommendations have quantified estimates"

# ==============================================================================
# FRAMEWORK REFERENCE
# ==============================================================================
framework_reference:
  bcg_quadrants:
    stars:
      definition: "High market growth, high relative market share"
      strategy: "Invest heavily to maintain position and capture growth"
      characteristics: ["Growing revenue", "Requires investment", "Future cash cows"]

    cash_cows:
      definition: "Low market growth, high relative market share"
      strategy: "Harvest profits to fund stars and question marks"
      characteristics: ["Stable revenue", "High profitability", "Minimal investment needed"]

    question_marks:
      definition: "High market growth, low relative market share"
      strategy: "Invest selectively to become stars or divest"
      characteristics: ["Growth potential", "Uncertain outcome", "Requires decision"]

    dogs:
      definition: "Low market growth, low relative market share"
      strategy: "Divest or maintain only if strategic value exists"
      characteristics: ["Low profitability", "Limited potential", "Resource drain"]

  classification_criteria:
    growth_rate_threshold: "Market growth > 10% = high growth"
    market_share_threshold: "Relative share > 1.0 (vs. largest competitor) = high share"

# ==============================================================================
# EXECUTION METADATA
# ==============================================================================
last_updated: "2026-02-02"
version: "1.0"
status: "production_ready"
notes: "BCG Matrix playbook for portfolio analysis and investment prioritization"
