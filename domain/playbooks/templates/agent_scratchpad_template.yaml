# Agent Scratchpad Template
# Working memory for intermediate reasoning during multi-step tasks
#
# Purpose:
# - Track reasoning evolution during complex tasks
# - Capture uncertainty and confidence levels
# - Preserve intermediate conclusions for later validation
# - Enable long-horizon task coherence without consuming working context

# ==============================================================================
# SESSION METADATA
# ==============================================================================
session:
  session_id: "{uuid}"
  agent_id: "{agent_id}"
  agent_role: "{ae|sa|ca|ve|ci|governance}"

  task:
    type: "{playbook_execution|analysis|meeting_prep|discovery|triage}"
    playbook_id: "{if applicable}"
    description: "{brief task description}"

  context:
    realm: "{realm_id}"
    node: "{node_id}"
    related_artifacts: []  # Paths to relevant InfoHub artifacts

  timing:
    started_at: "{ISO 8601 timestamp}"
    last_activity: "{ISO 8601 timestamp}"
    estimated_completion: "{ISO 8601 timestamp or null}"

  status: "active"  # active | paused | completed | abandoned

# ==============================================================================
# WORKING NOTES
# ==============================================================================
# Capture observations, hypotheses, and reasoning as task progresses

working_notes:
  # Example entry:
  # - timestamp: "2026-01-22T10:30:00Z"
  #   note_type: "observation"
  #   content: "Customer mentioned LegacySIEM fatigue in meeting - need to verify against tech signal map"
  #   confidence: 0.7
  #   evidence_refs:
  #     - "ACME/SECURITY/external-infohub/meetings/2026-01-22_discovery.md"
  #   resolved: false
  #   resolution: null

  - timestamp: "{ISO 8601}"
    note_type: "{observation|hypothesis|question|conclusion|evidence|concern}"
    content: "{note content}"
    confidence: "{0.0-1.0, where 1.0 = certain}"
    evidence_refs: []
    resolved: false
    resolution: null

# ==============================================================================
# OPEN QUESTIONS
# ==============================================================================
# Questions that need answers before task can complete

open_questions:
  # Example entry:
  # - question_id: "q_001"
  #   question: "What is the customer's timeline for LegacySIEM contract renewal?"
  #   priority: "high"
  #   blocking: true
  #   context: "Needed for displacement opportunity sizing"
  #   asked_at: "2026-01-22T10:35:00Z"
  #   potential_sources:
  #     - "AE Agent - commercial context"
  #     - "CRM - contract data"
  #   answered_at: null
  #   answer: null

  - question_id: "{q_NNN}"
    question: "{question text}"
    priority: "{critical|high|medium|low}"
    blocking: "{true if task cannot proceed without answer}"
    context: "{why this question matters}"
    asked_at: "{ISO 8601}"
    potential_sources: []
    answered_at: null
    answer: null

# ==============================================================================
# INTERIM CONCLUSIONS
# ==============================================================================
# Tentative conclusions that may be revised as more evidence emerges

interim_conclusions:
  # Example entry:
  # - conclusion_id: "c_001"
  #   conclusion: "Customer is a strong candidate for {vendor} Security displacement"
  #   confidence: 0.75
  #   supporting_evidence:
  #     - evidence: "LegacySIEM mentions down 45% in tech signal map"
  #       source: "{realm}/intelligence/technology_scout/current_map.yaml"
  #       weight: 0.3
  #     - evidence: "Customer mentioned 'LegacySIEM fatigue' in discovery call"
  #       source: "ACME/SECURITY/external-infohub/meetings/2026-01-22_discovery.md"
  #       weight: 0.25
  #     - evidence: "Budget approved for security modernization"
  #       source: "ACME/SECURITY/external-infohub/opportunities/opp_001.yaml"
  #       weight: 0.2
  #   contradicting_evidence:
  #     - evidence: "IT team has LegacySIEM certifications"
  #       source: "stakeholder interview"
  #       weight: 0.15
  #   status: "tentative"
  #   revision_history: []

  - conclusion_id: "{c_NNN}"
    conclusion: "{conclusion statement}"
    confidence: "{0.0-1.0}"
    supporting_evidence:
      - evidence: "{evidence description}"
        source: "{artifact path or source}"
        weight: "{0.0-1.0 contribution to confidence}"
    contradicting_evidence: []
    status: "{tentative|confirmed|revised|rejected}"
    revision_history: []

# ==============================================================================
# CONTEXT LOADED
# ==============================================================================
# Track what context was loaded and when (for debugging and optimization)

context_loaded:
  # Tracks token usage and freshness of loaded context
  # Example:
  # - artifact_path: "{realm}/intelligence/technology_scout/current_map.yaml"
  #   loaded_at: "2026-01-22T10:30:00Z"
  #   token_count: 1250
  #   freshness_at_load: "current"
  #   data_age_days: 1

  total_tokens_loaded: 0
  budget_remaining: "{from context_budget config}"

  artifacts:
    - artifact_path: "{path}"
      loaded_at: "{ISO 8601}"
      token_count: "{estimated tokens}"
      freshness_at_load: "{current|verify|stale}"
      data_age_days: "{days since last_updated}"

# ==============================================================================
# DECISION POINTS
# ==============================================================================
# Key decision points during task execution

decision_points:
  # Example:
  # - decision_id: "d_001"
  #   timestamp: "2026-01-22T11:00:00Z"
  #   decision: "Proceed with Security displacement positioning"
  #   alternatives_considered:
  #     - "Focus on Observability expansion instead"
  #     - "Wait for more competitive intel"
  #   rationale: "Tech signal map shows strong displacement signal, customer expressed interest"
  #   confidence: 0.8
  #   reversible: true
  #   dependencies: ["c_001"]  # Links to interim conclusions

  - decision_id: "{d_NNN}"
    timestamp: "{ISO 8601}"
    decision: "{decision made}"
    alternatives_considered: []
    rationale: "{why this decision}"
    confidence: "{0.0-1.0}"
    reversible: "{true|false}"
    dependencies: []

# ==============================================================================
# TOOL CALLS
# ==============================================================================
# Track tool usage during session (for context management)

tool_calls:
  # Example:
  # - call_id: "t_001"
  #   timestamp: "2026-01-22T10:32:00Z"
  #   tool: "read_artifact"
  #   inputs:
  #     path: "{realm}/intelligence/technology_scout/current_map.yaml"
  #   result_summary: "Tech signal map with 23 technologies, LegacySIEM in Hold ring"
  #   tokens_returned: 1250
  #   cached: false

  - call_id: "{t_NNN}"
    timestamp: "{ISO 8601}"
    tool: "{tool name}"
    inputs: {}
    result_summary: "{brief summary of result}"
    tokens_returned: "{token count}"
    cached: "{true if result was cached}"

# ==============================================================================
# SESSION SUMMARY
# ==============================================================================
# Generated when session completes - becomes the persistent record

session_summary:
  # Populated on session completion
  completed_at: null
  duration_minutes: null

  # Key outcomes
  final_conclusions: []
  decisions_made: []
  actions_created: []
  risks_identified: []

  # Metrics
  total_tool_calls: 0
  total_tokens_used: 0
  questions_answered: 0
  questions_unanswered: 0

  # Learning (for pattern sharing)
  patterns_observed: []
  suggestions_for_future: []

# ==============================================================================
# CHANGE LOG
# ==============================================================================
change_log:
  - timestamp: "{ISO 8601}"
    action: "session_created"
    details: "{initial task description}"
