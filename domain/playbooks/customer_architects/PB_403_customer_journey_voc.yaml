# PLAYBOOK: Customer Journey Mapping & Voice of Customer
# Framework operationalization for AI agents

# ==============================================================================
# PLAYBOOK METADATA
# ==============================================================================
framework_name: "Customer Journey Mapping & Voice of Customer"
framework_source: "Industry B2B Customer Experience Best Practices"
intended_agent_role: "CA Agent (post-sales), SA Agent (pre-sales)"
secondary_agents: ["AE Agent provides commercial touchpoints", "Meeting Notes Agent extracts sentiment", "Nudger Agent triggers VoC alerts"]

primary_objective: "Map complete customer journey from awareness to advocacy, capture and act on Voice of Customer feedback to improve experience and predict churn/expansion"

when_not_to_use:
  - "New accounts with insufficient touchpoint history (< 3 months)"
  - "Transaction-only relationships with no ongoing engagement"
  - "Customer explicitly opts out of feedback programs"
  - "One-time project engagements"

# ==============================================================================
# TRIGGER CONDITIONS
# ==============================================================================
trigger_conditions:
  automatic:
    # Journey Mapping Triggers
    - "Opportunity enters Stage 2 (initial journey mapping)"
    - "Deal closed won (journey handoff to post-sales)"
    - "Quarterly journey review cycle"
    - "Significant touchpoint milestone (go-live, expansion, renewal)"

    # VoC Collection Triggers
    - "Post-implementation (30 days after go-live)"
    - "Quarterly NPS survey schedule"
    - "After key interactions (support escalation, QBR, training)"
    - "Pre-renewal period (90 days before)"

    # VoC Alert Triggers
    - "NPS score < 7 (detractor identified)"
    - "CSAT score < 3.5 (dissatisfaction signal)"
    - "Negative sentiment detected in meeting notes"
    - "Support escalation pattern detected"

  manual:
    - "CA requests journey health assessment"
    - "SA requests pre-sales journey mapping"
    - "Leadership requests VoC analysis for account"
    - "Customer interview conducted"

  conditional:
    - "IF nps_score <= 6 THEN trigger_detractor_response"
    - "IF days_since_last_voc_collection > 90 THEN trigger_survey"
    - "IF sentiment_trend == 'declining' THEN trigger_intervention"

# ==============================================================================
# CUSTOMER JOURNEY STAGES
# ==============================================================================
journey_stages:
  pre_sales:
    awareness:
      description: "Customer recognizes problem/opportunity"
      touchpoints:
        - "Content consumption (blog, webinar, analyst report)"
        - "Peer recommendation"
        - "Event/conference"
        - "Outbound contact"
      customer_questions:
        - "What problem am I trying to solve?"
        - "Who else has this problem?"
        - "What solutions exist?"
      owner: "Marketing / AE Agent"
      health_indicators:
        green: "Multiple touchpoints, engaged with content"
        yellow: "Single touchpoint, low engagement"
        red: "No clear entry point, cold outreach only"

    consideration:
      description: "Customer actively evaluating options"
      touchpoints:
        - "Website visits"
        - "Demo requests"
        - "Technical discovery"
        - "Competitive research"
      customer_questions:
        - "Which solution fits my needs?"
        - "What are the trade-offs?"
        - "Who has done this before?"
      owner: "SA Agent / AE Agent"
      health_indicators:
        green: "Active engagement, multiple stakeholders involved"
        yellow: "Single contact, sporadic engagement"
        red: "Gone dark, competitor preferred"

    decision:
      description: "Customer making vendor selection"
      touchpoints:
        - "POV/POC"
        - "Proposal review"
        - "Executive presentations"
        - "Contract negotiation"
      customer_questions:
        - "Will this deliver promised value?"
        - "Can I trust this vendor?"
        - "What are the risks?"
      owner: "SA Agent / AE Agent"
      health_indicators:
        green: "Clear timeline, champion advocating, budget confirmed"
        yellow: "Timeline slipping, decision committee unclear"
        red: "Stalled, no champion, competitor selected"

  post_sales:
    onboarding:
      description: "Initial deployment and activation"
      touchpoints:
        - "Kickoff meeting"
        - "Implementation"
        - "Training"
        - "Go-live"
      customer_questions:
        - "How do I get started?"
        - "Who helps me succeed?"
        - "When will I see value?"
      owner: "CA Agent / Delivery Agent"
      health_indicators:
        green: "On-time delivery, engaged stakeholders, successful go-live"
        yellow: "Delays, limited engagement, partial go-live"
        red: "Stalled implementation, stakeholder resistance"
      voc_collection: "Onboarding CSAT (30 days post go-live)"

    adoption:
      description: "Growing usage and value realization"
      touchpoints:
        - "Health checks"
        - "QBRs"
        - "Support interactions"
        - "Feature discovery"
      customer_questions:
        - "Am I getting full value?"
        - "What else can I do?"
        - "How do I compare to peers?"
      owner: "CA Agent"
      health_indicators:
        green: "High utilization, value realized, proactive engagement"
        yellow: "Moderate utilization, unclear value, reactive engagement"
        red: "Low utilization, value not realized, disengaged"
      voc_collection: "Quarterly NPS, Post-QBR CSAT"

    expansion:
      description: "Growing relationship scope"
      touchpoints:
        - "Use case expansion"
        - "Department rollout"
        - "Upsell conversations"
      customer_questions:
        - "Where else can this help?"
        - "What's the ROI of expanding?"
      owner: "CA Agent / AE Agent"
      health_indicators:
        green: "Active expansion pipeline, customer-initiated interest"
        yellow: "Expansion discussed but not progressing"
        red: "No expansion interest, contraction risk"

    advocacy:
      description: "Customer becomes promoter"
      touchpoints:
        - "Reference calls"
        - "Case studies"
        - "Community participation"
        - "Referrals"
      customer_questions:
        - "How do I share my success?"
        - "What do I get for advocating?"
      owner: "CA Agent / Marketing"
      health_indicators:
        green: "Active reference, case study published, referrals"
        yellow: "Willing but not active"
        red: "Declined advocacy, negative sentiment"

# ==============================================================================
# STAKEHOLDER JOURNEYS
# ==============================================================================
stakeholder_journeys:
  executive:
    roles: ["CTO", "CIO", "CFO", "VP"]
    primary_concerns:
      - "Technical fit and architecture"
      - "ROI and TCO"
      - "Strategic alignment"
      - "Vendor relationship"
    key_touchpoints:
      - "Executive briefings"
      - "Roadmap sessions"
      - "QBRs"
      - "Business case reviews"
    voc_focus: "Strategic satisfaction, partnership quality"

  technical:
    roles: ["Architect", "Engineer", "Admin"]
    primary_concerns:
      - "Technical capability"
      - "Integration complexity"
      - "Operational burden"
      - "Support quality"
    key_touchpoints:
      - "Technical discovery"
      - "Architecture reviews"
      - "Training sessions"
      - "Support interactions"
    voc_focus: "Technical satisfaction, ease of use"

  end_users:
    roles: ["Analyst", "Operator", "Developer"]
    primary_concerns:
      - "Ease of use"
      - "Training availability"
      - "Day-to-day functionality"
      - "Support responsiveness"
    key_touchpoints:
      - "Training"
      - "Documentation"
      - "Support tickets"
      - "Feature requests"
    voc_focus: "User satisfaction, CES scores"

  procurement:
    roles: ["Procurement", "Legal", "Vendor Management"]
    primary_concerns:
      - "Contract terms"
      - "Pricing"
      - "Vendor risk"
      - "Compliance"
    key_touchpoints:
      - "RFP response"
      - "Contract negotiation"
      - "Vendor reviews"
      - "Renewal discussions"
    voc_focus: "Process satisfaction, terms flexibility"

# ==============================================================================
# VOICE OF CUSTOMER PROGRAM
# ==============================================================================
voc_program:
  listen:
    quantitative_channels:
      nps:
        type: "Net Promoter Score"
        question: "How likely are you to recommend us to a colleague? (0-10)"
        frequency: "Quarterly"
        target_audience: "All active stakeholders"
        calculation: "% Promoters (9-10) - % Detractors (0-6)"
        targets:
          excellent: ">50"
          good: "30-50"
          needs_improvement: "<30"

      csat:
        type: "Customer Satisfaction"
        question: "How satisfied were you with [interaction]? (1-5)"
        frequency: "After key interactions"
        target_audience: "Participants in interaction"
        targets:
          excellent: ">4.5"
          good: "4.0-4.5"
          needs_improvement: "<4.0"

      ces:
        type: "Customer Effort Score"
        question: "How easy was it to [accomplish task]? (1-7)"
        frequency: "After support/implementation"
        target_audience: "Users who completed task"
        targets:
          excellent: ">6.0"
          good: "5.0-6.0"
          needs_improvement: "<5.0"

    qualitative_channels:
      customer_interviews:
        frequency: "Quarterly for strategic accounts"
        duration: "30-60 minutes"
        focus: "Deep dive on experience and needs"
        output: "Interview summary with key insights"

      qbr_feedback:
        frequency: "Quarterly"
        focus: "Relationship health and value"
        output: "QBR feedback summary"

      support_analysis:
        frequency: "Continuous"
        focus: "Pain points and friction"
        output: "Ticket trend analysis"

      meeting_sentiment:
        frequency: "After key meetings"
        focus: "Sentiment and concerns"
        output: "Meeting Notes Agent extracts sentiment"

    behavioral_signals:
      usage_analytics:
        frequency: "Continuous"
        metrics: ["Login frequency", "Feature adoption", "Data volume"]
        health_correlation: "Usage trends predict NPS"

      engagement_signals:
        frequency: "Continuous"
        metrics: ["Meeting attendance", "Response times", "Stakeholder changes"]

      support_patterns:
        frequency: "Continuous"
        metrics: ["Ticket volume", "Escalations", "CSAT on tickets"]

  analyze:
    methods:
      - "Sentiment analysis on qualitative feedback"
      - "Trend analysis across time periods"
      - "Segmentation by account tier, use case, region"
      - "Root cause analysis on negative feedback"
      - "Correlation with churn/expansion signals"

    outputs:
      voc_dashboard: "Real-time metrics and trends"
      insight_reports: "Quarterly leadership summaries"
      account_sentiment: "Per-account sentiment tracking"
      product_feedback: "Aggregated product feedback for PM"

  act:
    immediate_response:
      detractor_response:
        trigger: "NPS 0-6"
        sla: "48 hours"
        owner: "CA Agent / AE"
        actions:
          - "Personal outreach to understand concerns"
          - "Document specific issues"
          - "Create action plan"
          - "Escalate if needed"

      critical_feedback:
        trigger: "CSAT < 3 or escalation in feedback"
        sla: "24 hours"
        owner: "CA Agent"
        actions:
          - "Immediate acknowledgment"
          - "Escalate to leadership"
          - "Emergency action plan"

    tactical_actions:
      pain_point_resolution:
        trigger: "Recurring negative theme"
        owner: "CA Agent / Product"
        actions:
          - "Document pain point pattern"
          - "Prioritize resolution"
          - "Communicate timeline to customers"

      touchpoint_improvement:
        trigger: "Low-scoring touchpoint"
        owner: "Process Owner"
        actions:
          - "Analyze touchpoint feedback"
          - "Redesign touchpoint experience"
          - "Measure improvement"

    strategic_actions:
      product_roadmap_input:
        frequency: "Quarterly"
        owner: "Product Team"
        input: "Aggregated VoC product feedback"

      service_evolution:
        frequency: "Semi-annually"
        owner: "Customer Success Leadership"
        input: "VoC trends and journey analysis"

    closing_the_loop:
      - action: "Acknowledge feedback received"
        sla: "24 hours"
      - action: "Communicate actions taken"
        sla: "7 days"
      - action: "Follow up on resolution"
        sla: "30 days"
      - action: "Measure impact"
        sla: "90 days"

# ==============================================================================
# DECISION LOGIC
# ==============================================================================
decision_logic:
  rules:
    # Detractor Alert
    - condition: "nps_score <= 6"
      severity: "HIGH"
      output_type: "Risk + Initiative"
      decision: |
        CREATE Risk:
          title: "Detractor identified at {node}"
          severity: "HIGH"
          category: "retention"
          description: "NPS score {score}/10 indicates detractor status"

        CREATE Initiative:
          title: "Detractor response for {node}"
          owner: "CA Agent"
          urgency: "IMMEDIATE"
          sla: "48 hours"
          actions:
            - "Personal outreach to {respondent}"
            - "Understand specific concerns"
            - "Create resolution action plan"
            - "Schedule follow-up"

    # Promoter Opportunity
    - condition: "nps_score >= 9"
      output_type: "Initiative"
      decision: |
        CREATE Initiative:
          title: "Advocacy opportunity for {node}"
          owner: "CA Agent"
          actions:
            - "Thank customer for positive feedback"
            - "Explore reference/case study opportunity"
            - "Invite to community/events"
            - "Request referrals if appropriate"

    # VoC Collection Overdue
    - condition: "days_since_last_voc > 90"
      severity: "MEDIUM"
      output_type: "Initiative"
      decision: |
        CREATE Initiative:
          title: "VoC collection overdue for {node}"
          owner: "CA Agent"
          actions:
            - "Schedule NPS survey"
            - "Plan customer check-in"
            - "Update VoC tracker"

    # Declining Sentiment Trend
    - condition: "sentiment_trend == 'declining' AND sentiment_trend_duration > 30_days"
      severity: "HIGH"
      output_type: "Risk + Initiative"
      decision: |
        CREATE Risk:
          title: "Declining sentiment trend at {node}"
          severity: "HIGH"
          category: "retention"
          description: "Sentiment declining for {duration} days"

        CREATE Initiative:
          title: "Sentiment intervention for {node}"
          owner: "CA Agent"
          actions:
            - "Analyze root causes"
            - "Schedule executive touchpoint"
            - "Create improvement plan"
            - "Increase engagement frequency"

    # Journey Stage Stalled
    - condition: "journey_stage_duration > expected_duration * 1.5"
      severity: "MEDIUM"
      output_type: "Risk"
      decision: |
        CREATE Risk:
          title: "Journey stalled at {stage} for {node}"
          severity: "MEDIUM"
          category: "adoption"
          description: "Customer stuck at {stage} stage for {duration}"
          actions:
            - "Identify blockers"
            - "Re-engage stakeholders"
            - "Adjust success criteria if needed"

# ==============================================================================
# EXPECTED OUTPUTS
# ==============================================================================
expected_outputs:
  primary_artifact:
    path: "infohub/{realm}/{node}/journey/customer_journey_map.yaml"
    format: "yaml"
    schema:
      metadata:
        account: "string"
        created: "date"
        last_updated: "date"
        owner: "string"
        journey_health: "enum[GREEN|YELLOW|RED]"

      current_stage:
        stage: "enum[awareness|consideration|decision|onboarding|adoption|expansion|advocacy]"
        entered_date: "date"
        expected_duration: "string"
        health_status: "enum[GREEN|YELLOW|RED]"

      stage_history:
        - stage: "string"
          entered: "date"
          exited: "date"
          key_events: "array"
          health_at_exit: "string"

      touchpoint_log:
        - date: "date"
          type: "string"
          participants: "array"
          outcome: "string"
          sentiment: "enum[positive|neutral|negative]"
          next_actions: "array"

      stakeholder_journeys:
        - stakeholder_type: "enum[executive|technical|end_user|procurement]"
          primary_contact: "string"
          engagement_level: "enum[high|medium|low]"
          satisfaction: "number (1-5)"
          key_concerns: "array"

  voc_artifact:
    path: "infohub/{realm}/{node}/voc/voc_tracker.yaml"
    format: "yaml"
    schema:
      metadata:
        account: "string"
        last_collection: "date"
        next_scheduled: "date"
        program_health: "enum[healthy|needs_attention|at_risk]"

      metrics:
        nps:
          current_score: "number (-100 to 100)"
          last_survey_date: "date"
          trend: "enum[improving|stable|declining]"
          response_rate: "number (percentage)"

        csat:
          average_score: "number (1-5)"
          by_touchpoint: "object"
          trend: "enum[improving|stable|declining]"

        ces:
          average_score: "number (1-7)"
          by_interaction_type: "object"
          trend: "enum[improving|stable|declining]"

      feedback_log:
        - date: "date"
          channel: "string"
          respondent: "string"
          type: "enum[nps|csat|ces|interview|meeting]"
          score: "number (if applicable)"
          verbatim: "string"
          sentiment: "enum[positive|neutral|negative]"
          themes: "array"
          action_taken: "string"
          closed_loop: "boolean"

      open_actions:
        - feedback_ref: "string"
          action: "string"
          owner: "string"
          due_date: "date"
          status: "enum[open|in_progress|closed]"

  notifications:
    - recipient: "CA Agent"
      condition: "nps_score <= 6"
      message: "ALERT: Detractor at {node} - NPS {score}, requires 48hr response"

    - recipient: "CA Agent"
      condition: "voc_overdue > 90_days"
      message: "VoC collection overdue for {node} - last collection {days} days ago"

    - recipient: "AE Agent"
      condition: "nps_score >= 9"
      message: "Promoter identified at {node} - advocacy opportunity"

    - recipient: "Leadership"
      condition: "nps_score <= 3"
      message: "CRITICAL: Severe detractor at {node} - NPS {score}, escalation required"

# ==============================================================================
# STOP CONDITIONS
# ==============================================================================
stop_conditions:
  escalate_to_human:
    - condition: "nps_score <= 3 OR multiple_detractors"
      reason: "Critical dissatisfaction requires executive intervention"
      action: "Escalate to Customer Success VP and Account Executive"

    - condition: "no_response_to_outreach > 3_attempts"
      reason: "Customer disengaged from feedback loop"
      action: "Escalate for executive-level re-engagement"

    - condition: "feedback_indicates_churn_intent"
      reason: "Customer explicitly indicates leaving"
      action: "Immediate escalation, retention intervention"

  insufficient_data:
    - "No feedback collected in 180+ days"
    - "No touchpoint history available"
    - "Key stakeholders unknown"

  human_judgment_required:
    - "Interpreting ambiguous feedback"
    - "Prioritizing competing customer concerns"
    - "Determining appropriate response to complex issues"
    - "Deciding on advocacy requests (reference, case study)"

# ==============================================================================
# VALIDATION CHECKS
# ==============================================================================
validation_checks:
  pre_execution:
    - "Account exists in InfoHub"
    - "At least 3 months of relationship history (for analysis)"
    - "Stakeholder contacts known for VoC collection"

  post_execution:
    - "Journey stage correctly identified"
    - "VoC metrics calculated correctly"
    - "All detractors have response actions"
    - "Closed-loop tracking is current"

  output_quality:
    - "Sentiment assessments are supported by evidence"
    - "Actions are specific and have owners"
    - "Timelines are realistic"
    - "No feedback left without acknowledgment"

# ==============================================================================
# EXECUTION METADATA
# ==============================================================================
estimated_execution_time: "Journey mapping: 15-30 min, VoC analysis: 10-15 min"
frequency: "Journey: quarterly refresh, VoC: continuous + quarterly NPS"
human_review_required: true
approval_workflow:
  - reviewer: "CA Agent"
    approval_gate: "Validate journey assessment, VoC accuracy"
  - reviewer: "Account Executive"
    condition: "strategic_account OR detractor_identified"
    approval_gate: "Approve response strategy"

last_updated: "2026-01-22"
version: "1.0"
status: "production_ready"
