# PLAYBOOK: Customer Success Plan Lifecycle
# Framework operationalization for AI agents

# ==============================================================================
# PLAYBOOK METADATA
# ==============================================================================
framework_name: "Customer Success Plan (CSP)"
framework_source: "Industry Customer Success Best Practices"
intended_agent_role: "SA Agent (pre-sales), CA Agent (post-sales)"
secondary_agents: ["AE Agent provides commercial context", "VE Agent provides value quantification", "Meeting Notes Agent extracts updates"]
playbook_mode: "GENERATIVE"
playbook_category: "relationship_governance"

primary_objective: "Create and maintain customer-facing success plans that document outcomes, milestones, and value realization from pre-sales through adoption"

when_not_to_use:
  - "Transaction-only deals (no ongoing relationship expected)"
  - "Commercial accounts < $100K ARR without strategic designation"
  - "Proof-of-concept without committed production path"
  - "Customer explicitly declines collaborative planning"

# ==============================================================================
# CSP CREATION CRITERIA
# ==============================================================================
csp_creation_criteria:
  required:
    - "Opportunity > $100K ARR at Stage 2+"
    - "SA-validated technical evaluation (any ARR)"
    - "Strategic account designation (any opportunity)"

  optional:
    - "Commercial account < $100K at SA Manager discretion"
    - "High-profile logo regardless of deal size"

# ==============================================================================
# TRIGGER CONDITIONS
# ==============================================================================
trigger_conditions:
  automatic:
    # CSP Initiation
    - "Opportunity enters Stage 2 with ARR > $100K"
    - "Account designated as strategic"
    - "SA assigned to opportunity"

    # CSP Development
    - "Technical evaluation beginning"
    - "Discovery findings documented"

    # CSP Finalization
    - "Deal approaching Stage 4 (Proposal)"
    - "Customer requests success plan review"

    # CSP Execution (Post-Sales)
    - "Deal closed won - handoff trigger"
    - "Monthly value review cadence"
    - "Quarterly refresh cycle"

    # CSP Health Alerts
    - "CSP not updated in 30+ days"
    - "Milestone due date approaching (7 days, 1 day)"
    - "CSP incomplete at Stage 4"

  manual:
    - "SA requests CSP initialization"
    - "CA requests CSP refresh for QBR"
    - "AE requests CSP for customer presentation"

  conditional:
    - "IF opportunity.stage == 'Stage 2' AND opportunity.arr > 100000 THEN initiate_csp"
    - "IF csp.last_updated > 30_days THEN send_review_reminder"
    - "IF csp.milestone.due_date - today <= 7 THEN send_milestone_alert"
    - "IF opportunity.stage == 'Closed Won' THEN trigger_handoff"

# ==============================================================================
# CSP LIFECYCLE PHASES
# ==============================================================================
lifecycle_phases:
  initiate:
    stage: "Stage 2 (Scoping)"
    owner: "SA Agent"
    activities:
      - "Capture business context from discovery"
      - "Identify key stakeholders"
      - "Document preliminary business outcomes"
      - "Assess current state"
    outputs:
      - "CSP sections 1-3 populated"
      - "Stakeholder map initialized"

  develop:
    stage: "Stage 3 (Technical Evaluation)"
    owner: "SA Agent"
    activities:
      - "Define success criteria (max 5)"
      - "Create technical evaluation plan"
      - "Document resource requirements"
      - "Set timeline and milestones"
    outputs:
      - "CSP sections 4-5 populated"
      - "Success criteria documented"
      - "Evaluation plan with milestones"

  finalize:
    stage: "Stage 4 (Proposal)"
    owner: "SA Agent"
    activities:
      - "Confirm all sections complete"
      - "Add phased adoption journey"
      - "Document risks and mitigations"
      - "Review with customer"
      - "Gain mutual agreement"
    outputs:
      - "Complete CSP"
      - "Customer-reviewed and approved"
      - "Handoff ready"

  execute:
    stage: "Post-Sales (Adoption)"
    owner: "CA Agent"
    activities:
      - "Accept handoff from SA"
      - "Track value realization"
      - "Update metrics monthly"
      - "Refresh quarterly"
      - "Prepare QBR materials"
    outputs:
      - "Value tracking updated"
      - "Milestone progress documented"
      - "QBR talking points"

  handoff:
    trigger: "Deal closed won"
    from_agent: "SA Agent"
    to_agent: "CA Agent"
    checklist:
      - "All CSP sections complete"
      - "Open items documented"
      - "Context transfer meeting held"
      - "Ownership transferred"
      - "Ongoing cadence established"

# ==============================================================================
# REQUIRED INPUTS
# ==============================================================================
required_inputs:
  mandatory:
    - artifact: "{realm}/{node}/external-infohub/overview.md"
    - artifact: "Opportunity details (ARR, stage, products)"
    - artifact: "Discovery findings"
    - artifact: "Stakeholder information"

  optional:
    - artifact: "{realm}/{node}/internal-infohub/competitive/*.md"
      use: "Competitive context"
    - artifact: "Previous CSP version (for refresh)"
      use: "Historical context"
    - artifact: "Meeting notes"
      use: "Extract updates and action items"
    - artifact: "Value model from VE Agent"
      use: "Quantified outcomes"

  minimum_data_threshold:
    - "Business context captured"
    - "At least 1 business outcome identified"
    - "Key stakeholders known"

# ==============================================================================
# CSP SECTIONS
# ==============================================================================
csp_sections:
  section_1_executive_summary:
    name: "Executive Summary"
    owner: "SA Agent"
    content:
      - "Account overview"
      - "Strategic importance"
      - "Key objectives"
      - "Success criteria summary"

  section_2_business_context:
    name: "Business Context"
    owner: "SA Agent"
    content:
      - "Company background"
      - "Industry and market position"
      - "Strategic initiatives"
      - "Technology landscape"

  section_3_stakeholders:
    name: "Key Stakeholders"
    owner: "SA Agent / AE Agent"
    content:
      - "Executive sponsor"
      - "Champion"
      - "Technical decision makers"
      - "Influencers and blockers"
      - "Relationship status"

  section_4_success_criteria:
    name: "Success Criteria"
    owner: "SA Agent"
    content:
      - "Business outcomes (3-5 max)"
      - "Measurable targets"
      - "Baseline metrics"
      - "Success measurement plan"

  section_5_technical_plan:
    name: "Technical Evaluation Plan"
    owner: "SA Agent"
    content:
      - "Use cases to validate"
      - "Architecture approach"
      - "Evaluation timeline"
      - "Resource requirements"

  section_6_adoption_journey:
    name: "Adoption Journey"
    owner: "SA Agent / CA Agent"
    content:
      - "Phase definitions"
      - "Milestones with dates"
      - "Dependencies"
      - "Go-live criteria"

  section_7_risks:
    name: "Risks and Mitigations"
    owner: "SA Agent"
    content:
      - "Identified risks"
      - "Mitigation plans"
      - "Escalation path"

  section_8_value_tracking:
    name: "Value Tracking"
    owner: "CA Agent / VE Agent"
    content:
      - "Utilization metrics"
      - "Outcome progress"
      - "ROI realization"
      - "Value delivered vs. projected"

# ==============================================================================
# DECISION LOGIC
# ==============================================================================
decision_logic:
  rules:
    # CSP Creation Required
    - condition: "opportunity.stage == 'Stage 2' AND opportunity.arr > 100000 AND NOT csp_exists"
      output_type: "Initiative"
      decision: |
        CREATE Initiative:
          title: "Initialize Customer Success Plan for {node}"
          owner: "SA Agent"
          urgency: "HIGH"
          actions:
            - "Create CSP from template"
            - "Populate sections 1-3 from discovery"
            - "Identify initial stakeholders"
            - "Set preliminary business outcomes"

    # CSP Incomplete at Stage 4
    - condition: "opportunity.stage == 'Stage 4' AND csp_incomplete"
      severity: "HIGH"
      output_type: "Risk + Initiative"
      decision: |
        CREATE Risk:
          title: "Incomplete CSP blocking proposal for {node}"
          severity: "HIGH"
          category: "process"
          description: "CSP must be complete before advancing to proposal"

        CREATE Initiative:
          title: "Complete CSP urgently for {node}"
          owner: "SA Agent"
          urgency: "IMMEDIATE"
          actions:
            - "Complete all required CSP sections"
            - "Review with customer"
            - "Gain mutual agreement"
          blocker: "Proposal submission"

    # CSP Stale (Not Updated)
    - condition: "csp.last_updated > 30_days AND account.status == 'active'"
      severity: "MEDIUM"
      output_type: "Initiative"
      decision: |
        CREATE Initiative:
          title: "Refresh stale CSP for {node}"
          owner: "CA Agent"
          actions:
            - "Review all sections for accuracy"
            - "Update value tracking metrics"
            - "Check milestone status"
            - "Update risks if any changes"

    # CSP Very Stale - Escalate
    - condition: "csp.last_updated > 60_days AND account.status == 'active'"
      severity: "HIGH"
      output_type: "Risk"
      decision: |
        CREATE Risk:
          title: "CSP severely outdated for {node}"
          severity: "HIGH"
          category: "process"
          description: "CSP not updated in 60+ days, indicates disengagement"
          escalate_to: "CA Manager"

    # Handoff Required
    - condition: "opportunity.stage == 'Closed Won' AND handoff_not_complete"
      output_type: "Initiative"
      decision: |
        CREATE Initiative:
          title: "Complete SA to CA handoff for {node}"
          owner: "SA Agent"
          urgency: "HIGH"
          actions:
            - "Schedule handoff meeting with CA"
            - "Review CSP with CA"
            - "Transfer open items"
            - "Establish post-sales cadence"
            - "Update CSP ownership"

    # Milestone Due Soon
    - condition: "csp.milestone.due_date - today <= 7"
      output_type: "Initiative"
      decision: |
        CREATE Initiative:
          title: "Milestone approaching: {milestone_name} for {node}"
          owner: "CA Agent"
          actions:
            - "Review milestone status"
            - "Confirm on track or escalate"
            - "Prepare for milestone review meeting"

# ==============================================================================
# EXPECTED OUTPUTS
# ==============================================================================
expected_outputs:
  primary_artifact:
    path: "{realm}/{node}/external-infohub/csp/csp.yaml"
    format: "yaml"
    sections:
      - executive_summary
      - business_context
      - stakeholders
      - success_criteria
      - technical_plan
      - adoption_journey
      - risks
      - value_tracking
      - metadata

    schema:
      metadata:
        csp_id: "string"
        realm: "string"
        node: "string"
        created: "date"
        last_updated: "date"
        owner: "string (SA or CA Agent)"
        status: "enum[DRAFT|IN_REVIEW|ACTIVE|ARCHIVED]"
        lifecycle_phase: "enum[INITIATE|DEVELOP|FINALIZE|EXECUTE]"
        version: "string"

      success_criteria:
        - outcome_id: "string"
          description: "string"
          baseline_metric: "string"
          target_metric: "string"
          measurement_method: "string"
          status: "enum[NOT_STARTED|IN_PROGRESS|ACHIEVED|AT_RISK]"

      adoption_journey:
        phases:
          - phase_id: "string"
            name: "string"
            description: "string"
            start_date: "date"
            end_date: "date"
            status: "enum[PLANNED|IN_PROGRESS|COMPLETE|DELAYED]"
            milestones:
              - milestone_id: "string"
                name: "string"
                due_date: "date"
                status: "enum[PENDING|COMPLETE|OVERDUE]"

      value_tracking:
        last_review_date: "date"
        utilization_metrics: "object"
        outcomes_progress: "array"
        roi_status: "enum[EXCEEDED|ON_TRACK|BELOW_TARGET|NOT_MEASURED]"
        value_delivered: "string (quantified if possible)"

  version_history:
    path: "{realm}/{node}/external-infohub/csp/history/"
    format: "csp_v{version}_{date}.yaml"

  supporting_artifacts:
    path: "{realm}/{node}/external-infohub/csp/artifacts/"
    files:
      - "stakeholder_map.md"
      - "architecture_diagram.png"
      - "value_model.xlsx"

  notifications:
    - recipient: "SA Agent"
      condition: "csp_creation_required"
      message: "CSP initialization required for {node}"

    - recipient: "SA Agent"
      condition: "csp_incomplete AND stage == 'Stage 4'"
      message: "URGENT: Complete CSP for {node} before proposal"

    - recipient: "CA Agent"
      condition: "handoff_triggered"
      message: "CSP handoff ready from SA for {node}"

    - recipient: "CA Agent / SA Agent"
      condition: "csp_stale > 30_days"
      message: "CSP for {node} needs refresh - last updated {days} days ago"

    - recipient: "Current Owner"
      condition: "milestone_due <= 7_days"
      message: "Milestone '{milestone_name}' due in {days} days for {node}"

# ==============================================================================
# CSP HEALTH MONITORING
# ==============================================================================
csp_health:
  complete:
    criteria:
      - "All required sections populated"
      - "Success criteria defined (1-5)"
      - "Stakeholders identified"
      - "Adoption phases defined"
      - "Value metrics baselined"

  healthy:
    criteria:
      - "Updated within last 30 days"
      - "Milestones on track"
      - "No RED risks without mitigation"
      - "Customer reviewed within quarter"

  at_risk:
    indicators:
      - "Not updated in 60+ days"
      - "Milestones overdue"
      - "Value metrics declining"
      - "Customer not engaged"

  alerts:
    - condition: "CSP incomplete at Stage 4"
      action: "Block proposal until CSP complete"

    - condition: "CSP stale > 60 days (post-sales)"
      action: "Escalate to CA Manager"

# ==============================================================================
# CUSTOMER-FACING GUIDANCE
# ==============================================================================
customer_facing:
  what_to_share:
    - "Business outcomes and success criteria"
    - "Adoption journey and milestones"
    - "Value tracking progress"
    - "Joint responsibilities"

  what_to_keep_internal:
    - "Internal stakeholder assessments"
    - "Competitive context"
    - "Risk details (share mitigations only)"
    - "Commercial notes"

  review_cadence:
    pre_sales: "Per major milestone - align on success criteria"
    implementation: "Bi-weekly - track progress"
    post_go_live: "Monthly - value realization"
    steady_state: "Quarterly - strategic alignment"

# ==============================================================================
# STOP CONDITIONS
# ==============================================================================
stop_conditions:
  escalate_to_human:
    - condition: "customer_declines_csp"
      reason: "Customer explicitly does not want collaborative planning"
      action: "Document decision, adjust engagement approach"

    - condition: "conflicting_stakeholder_goals"
      reason: "Different stakeholders have contradictory success criteria"
      action: "Facilitate alignment meeting, escalate if unresolved"

    - condition: "csp_blocked_by_missing_info"
      reason: "Critical information unavailable"
      action: "Identify information source, schedule discovery"

  insufficient_data:
    - "No discovery completed (cannot populate business context)"
    - "Stakeholders unknown (cannot identify success criteria)"
    - "No technical evaluation (cannot define success metrics)"

  human_judgment_required:
    - "Prioritizing success criteria (what matters most)"
    - "Defining realistic milestones (timeline negotiation)"
    - "Handling stakeholder conflicts"
    - "Determining when CSP is customer-ready"

# ==============================================================================
# VALIDATION CHECKS
# ==============================================================================
validation_checks:
  pre_execution:
    - "Opportunity exists in system"
    - "ARR and stage information available"
    - "SA or CA Agent assigned"

  post_execution:
    - "All required sections have content"
    - "Success criteria are measurable (not vague)"
    - "Milestones have dates"
    - "Owner assigned for each phase"

  output_quality:
    - "No placeholder text ('TBD', 'To be defined')"
    - "Success criteria are SMART (Specific, Measurable, Achievable, Relevant, Time-bound)"
    - "Milestones are realistic (not all in first week)"
    - "Risks have mitigations defined"

# ==============================================================================
# EXECUTION METADATA
# ==============================================================================
estimated_execution_time: "15-30 minutes (initial creation), 10 minutes (refresh)"
frequency: "Created at Stage 2, updated monthly, refreshed quarterly"
human_review_required: true
approval_workflow:
  - reviewer: "SA Agent (pre-sales)"
    approval_gate: "Sections 1-7 complete before customer review"
  - reviewer: "Customer stakeholders"
    approval_gate: "Mutual agreement on success criteria"
  - reviewer: "CA Agent (post-sales)"
    approval_gate: "Accept handoff, validate context transfer"

last_updated: "2026-01-22"
version: "1.0"
status: "production_ready"
