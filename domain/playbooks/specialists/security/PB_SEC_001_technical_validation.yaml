# Security Technical Validation Playbook
# Purpose: Validate customer security requirements against platform capabilities

id: "PB_SEC_001"
name: "Security Technical Validation"
version: "1.0"
status: "ACTIVE"

metadata:
  category: "technical"
  framework: "Security Validation"
  team_owner: "specialists"
  specialty: "security"
  description: "Systematic validation of security use cases and requirements against platform capabilities"

# RACI Definition
raci:
  responsible:
    role: "security_specialist"
    agent: "security_specialist_agent"
    description: "Executes technical validation and documents results"

  accountable:
    role: "sa_lead"
    human_required: true
    description: "Reviews and approves validation findings"
    approval_actions:
      - "approve"
      - "request_revision"
      - "escalate"

  consulted:
    - role: "solution_architects"
      on_steps: ["architecture_review", "integration_assessment"]
    - role: "account_executives"
      on_steps: ["requirements_gathering", "stakeholder_alignment"]

  informed:
    - role: "management"
      notify_on: ["completion", "blockers_identified"]
    - role: "product_management"
      notify_on: ["gap_identified"]

# Triggers
triggers:
  - event: "opportunity_stage_change"
    conditions:
      - "stage == 'technical_validation'"
      - "security_use_cases_identified == true"
  - event: "specialist_request"
    conditions:
      - "request_type == 'security_validation'"
  - event: "manual_trigger"

# Inputs
inputs:
  required:
    - name: "customer_id"
      type: "string"
      description: "Customer identifier"
    - name: "opportunity_id"
      type: "string"
      description: "Associated opportunity"
    - name: "security_requirements"
      type: "list"
      description: "List of security requirements to validate"

  optional:
    - name: "existing_environment"
      type: "object"
      description: "Current security tool landscape"
    - name: "priority_use_cases"
      type: "list"
      description: "Use cases to prioritize in validation"
    - name: "timeline_constraints"
      type: "string"
      description: "Validation timeline requirements"

# Execution Steps
steps:
  - step_id: "gather_requirements"
    name: "Gather Security Requirements"
    action: "collect_and_structure"
    raci_role: "responsible"
    description: "Collect and structure all security requirements from customer"
    inputs:
      - "security_requirements"
      - "existing_environment"
    outputs:
      - "structured_requirements"
    prompts:
      - "List all security use cases mentioned by customer"
      - "Categorize by: Detection, Response, Compliance, Reporting"
      - "Identify data sources required for each"

  - step_id: "categorize_requirements"
    name: "Categorize & Prioritize"
    action: "analyze_and_prioritize"
    raci_role: "responsible"
    description: "Categorize requirements and assign priority"
    inputs:
      - "structured_requirements"
    outputs:
      - "prioritized_requirements"
    criteria:
      priority_factors:
        - "Business criticality (customer stated)"
        - "Technical complexity"
        - "Deal impact (blocker vs. nice-to-have)"
        - "Competitive differentiation opportunity"

  - step_id: "capability_mapping"
    name: "Map to Platform Capabilities"
    action: "map_requirements"
    raci_role: "responsible"
    description: "Map each requirement to platform capabilities"
    inputs:
      - "prioritized_requirements"
    outputs:
      - "capability_map"
    mapping_categories:
      - "fully_supported"
      - "partially_supported"
      - "requires_customization"
      - "gap_identified"
      - "roadmap_item"

  - step_id: "gap_analysis"
    name: "Identify & Assess Gaps"
    action: "analyze_gaps"
    raci_role: "responsible"
    description: "Deep dive into any identified gaps"
    inputs:
      - "capability_map"
    outputs:
      - "gap_analysis"
    gap_assessment:
      - "Gap description"
      - "Impact severity (blocker/major/minor)"
      - "Workaround available (yes/no)"
      - "Workaround description"
      - "Roadmap status"
      - "Competitive comparison"

  - step_id: "validation_testing"
    name: "Execute Validation Tests"
    action: "hands_on_validation"
    raci_role: "responsible"
    description: "Perform hands-on technical validation where possible"
    inputs:
      - "prioritized_requirements"
      - "capability_map"
    outputs:
      - "test_results"
    test_types:
      - "Feature demonstration"
      - "Performance benchmarking"
      - "Integration testing"
      - "Use case simulation"

  - step_id: "document_findings"
    name: "Document Validation Findings"
    action: "create_report"
    raci_role: "responsible"
    description: "Create comprehensive validation report"
    inputs:
      - "capability_map"
      - "gap_analysis"
      - "test_results"
    outputs:
      - "validation_report"

  - step_id: "stakeholder_review"
    name: "Stakeholder Review"
    action: "human_review"
    raci_role: "accountable"
    description: "Review findings with SA Lead and customer team"
    inputs:
      - "validation_report"
    outputs:
      - "approved_findings"
      - "action_items"

# Output Contract
outputs:
  format: "markdown"
  storage_path: "{realm}/{node}/external-infohub/specialists/security/validation_{date}.md"
  sections:
    - section_id: "executive_summary"
      name: "Executive Summary"
      description: "High-level validation outcome for stakeholders"
      template: |
        ## Executive Summary

        **Customer:** {{customer_name}}
        **Validation Date:** {{date}}
        **Overall Result:** {{overall_result}}

        ### Key Findings
        - Total Requirements Validated: {{total_requirements}}
        - Fully Supported: {{fully_supported_count}} ({{fully_supported_pct}}%)
        - Gaps Identified: {{gaps_count}}
        - Blockers: {{blockers_count}}

        ### Recommendation
        {{recommendation}}

    - section_id: "requirement_matrix"
      name: "Requirement Validation Matrix"
      description: "Detailed requirement-by-requirement assessment"

    - section_id: "gap_analysis"
      name: "Gap Analysis"
      description: "Detailed analysis of identified gaps"

    - section_id: "test_evidence"
      name: "Test Evidence"
      description: "Documentation of validation tests performed"

    - section_id: "recommendations"
      name: "Recommendations"
      description: "Next steps and recommendations"

    - section_id: "appendix"
      name: "Technical Appendix"
      description: "Detailed technical notes and artifacts"

# Quality Criteria
quality_criteria:
  - "All requirements have clear validation status"
  - "Gaps have impact assessment and mitigation"
  - "Evidence provided for capability claims"
  - "No unvalidated assumptions"
