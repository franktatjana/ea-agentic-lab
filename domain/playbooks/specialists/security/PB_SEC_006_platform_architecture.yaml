# Security Platform Architecture Playbook
# Purpose: Design security platform architecture for customer environment

id: "PB_SEC_006"
name: "Security Platform Architecture"
version: "1.0"
status: "ACTIVE"
playbook_mode: "GENERATIVE"
playbook_category: "technical_execution"

metadata:
  category: "technical"
  framework: "Architecture Design"
  team_owner: "specialists"
  specialty: "security"
  description: "Design comprehensive security platform architecture"

raci:
  responsible:
    role: "security_specialist"
    agent: "security_specialist_agent"
  accountable:
    role: "sa_lead"
    human_required: true
  consulted:
    - role: "solution_architects"
      on_steps: ["infrastructure_design", "integration_patterns"]
    - role: "customer_infrastructure"
      on_steps: ["network_requirements", "security_requirements"]
  informed:
    - role: "professional_services"
    - role: "account_executives"

triggers:
  - event: "architecture_design_requested"
  - event: "implementation_planning"

inputs:
  required:
    - name: "deployment_model"
      type: "enum"
      options: ["cloud", "on_premise", "hybrid"]
    - name: "scale_requirements"
      type: "object"
    - name: "availability_requirements"
      type: "object"
  optional:
    - name: "compliance_requirements"
      type: "list"
    - name: "network_constraints"
      type: "object"
    - name: "existing_infrastructure"
      type: "object"

steps:
  - step_id: "gather_requirements"
    name: "Gather Architecture Requirements"
    action: "requirements_gathering"
    outputs: ["architecture_requirements"]
    dimensions:
      - "Functional requirements"
      - "Performance requirements"
      - "Availability requirements"
      - "Security requirements"
      - "Compliance requirements"
      - "Operational requirements"

  - step_id: "design_data_architecture"
    name: "Design Data Architecture"
    action: "data_architecture"
    outputs: ["data_architecture"]
    components:
      collection:
        - "Agent-based collection"
        - "Agentless collection (syslog, API)"
        - "Cloud-native integrations"
        - "Network tap/span"
      processing:
        - "Parsing and normalization"
        - "Enrichment"
        - "Correlation"
      storage:
        - "Hot tier (real-time search)"
        - "Warm tier (recent history)"
        - "Cold tier (compliance archive)"

  - step_id: "design_compute_architecture"
    name: "Design Compute Architecture"
    action: "compute_architecture"
    outputs: ["compute_architecture"]
    tiers:
      - "Ingestion tier"
      - "Processing tier"
      - "Search tier"
      - "Visualization tier"
      - "ML/Analytics tier"

  - step_id: "design_network_architecture"
    name: "Design Network Architecture"
    action: "network_architecture"
    outputs: ["network_architecture"]
    considerations:
      - "Data flow paths"
      - "Firewall requirements"
      - "Load balancing"
      - "DNS requirements"
      - "Certificate management"

  - step_id: "design_high_availability"
    name: "Design High Availability"
    action: "ha_design"
    outputs: ["ha_architecture"]
    patterns:
      - "Component redundancy"
      - "Geographic distribution"
      - "Failover mechanisms"
      - "Backup and recovery"
      - "RPO/RTO targets"

  - step_id: "design_security_controls"
    name: "Design Security Controls"
    action: "security_design"
    outputs: ["security_architecture"]
    controls:
      - "Authentication and authorization"
      - "Encryption (transit and rest)"
      - "Network segmentation"
      - "Audit logging"
      - "Secret management"

  - step_id: "create_diagrams"
    name: "Create Architecture Diagrams"
    action: "diagram_creation"
    outputs: ["architecture_diagrams"]
    diagram_types:
      - "Logical architecture"
      - "Physical/deployment architecture"
      - "Data flow diagram"
      - "Network diagram"
      - "Integration diagram"

  - step_id: "document_architecture"
    name: "Document Architecture"
    action: "documentation"
    outputs: ["architecture_document"]

outputs:
  format: "markdown"
  storage_path: "{realm}/{node}/external-infohub/specialists/security/architecture_{date}.md"
  sections:
    - "Executive Summary"
    - "Requirements Summary"
    - "Logical Architecture"
    - "Data Architecture"
    - "Compute Architecture"
    - "Network Architecture"
    - "High Availability Design"
    - "Security Controls"
    - "Sizing Specifications"
    - "Architecture Diagrams"
    - "Implementation Considerations"
