# Technology Scout Task Prompts
# Purpose: Task-specific prompts using CAF framework (Context, Action, Format)
# Reference: Scanner personality in personalities/tech_signal_scanner_personality.yaml
# Reference: Analyzer personality in personalities/tech_signal_analyzer_personality.yaml

# ==============================================================================
# SCANNER TASKS
# ==============================================================================
scanning:
  job_posting_scan:
    name: "Job Posting Technology Scan"
    description: "Scan job postings for technology adoption signals"
    prompt: |
      Context: Scanning job postings for {company_name} (realm: {realm_id}).
      Company domain: {company_domain}
      Known technologies: {existing_tech_map}
      Source registry: {source_registry}

      Action: Extract technology signals from job postings.
      - Fetch job postings from configured sources (LinkedIn, Indeed, company careers)
      - Extract technology mentions from job descriptions
      - Classify requirement level: required, preferred, nice-to-have
      - Detect seniority levels for each posting
      - Deduplicate across sources
      - Register new sources in source registry

      Format:
      - scan_metadata: {scan_date, sources_checked, jobs_found, jobs_processed}
      - technologies: [{name, canonical_name, mentions, required_count, preferred_count, avg_seniority}]
      - new_sources: [{url, type, title, date_accessed}]

  vendor_announcement_scan:
    name: "Vendor Announcement Scan"
    description: "Scan for vendor partnerships and product announcements"
    prompt: |
      Context: Scanning vendor announcements for {company_name} (realm: {realm_id}).
      Known vendors: {existing_vendor_landscape}
      Source registry: {source_registry}

      Action: Detect vendor-related signals.
      - Search for partnership announcements involving the company
      - Track vendor product launches relevant to the company's tech stack
      - Monitor technology procurement signals (RFPs, vendor evaluations)
      - Check for technology migration or consolidation announcements

      Format:
      - vendor_signals: [{vendor_name, signal_type, description, source, date, confidence}]
      - signal_type values: partnership, procurement, migration, evaluation, consolidation

  tech_blog_scan:
    name: "Tech Blog and Conference Scan"
    description: "Scan engineering blogs and conference talks for technology signals"
    prompt: |
      Context: Scanning tech publications for {company_name} (realm: {realm_id}).
      Company engineering blog: {engineering_blog_url}
      Source registry: {source_registry}

      Action: Extract technology adoption signals from non-job sources.
      - Search company engineering blog for technology mentions
      - Check conference speaker databases for company employees
      - Scan tech publications for articles mentioning the company
      - Extract technology choices, architecture decisions, and tool preferences

      Format:
      - tech_signals: [{technology, source_type, description, url, date, confidence}]
      - source_type values: blog, conference, publication, open_source

# ==============================================================================
# ANALYZER TASKS
# ==============================================================================
analysis:
  tech_map_generation:
    name: "Technology Signal Map Generation"
    description: "Generate technology signal map from scan results"
    prompt: |
      Context: Generating tech signal map for {company_name} (realm: {realm_id}).
      Scan results: {scan_results}
      Previous map: {previous_map}
      Ring rules: {ring_rules}
      Platform offerings: {platform_offerings}

      Action: Analyze scan data and generate updated technology signal map.
      - Aggregate technology mentions across all scan sources
      - Apply ring assignment rules (Adopt/Trial/Assess/Hold)
      - Calculate 30-day and 90-day trends
      - Detect new technologies not in previous map
      - Identify competitor technology mentions
      - Perform skills gap analysis against vendor offerings

      Format:
      - technologies: [{name, quadrant, ring, mentions, trend_30d, trend_90d, is_new, competitor_flag}]
      - ring_changes: [{technology, previous_ring, new_ring, reason}]
      - new_technologies: [{name, quadrant, ring, first_seen, initial_mentions}]
      - competitor_analysis: [{competitor, technologies, trend, displacement_opportunity}]
      - skills_gap: {opportunities: [{offering, aligned_technologies}], gaps: [{technology, no_offering}]}

  vendor_landscape_analysis:
    name: "Vendor Landscape Analysis"
    description: "Build vendor/supplier technology landscape"
    prompt: |
      Context: Analyzing vendor landscape for {company_name} (realm: {realm_id}).
      Technology map: {current_tech_map}
      Vendor signals: {vendor_signals}
      Competitive landscape: {competitive_context}

      Action: Build comprehensive vendor/supplier landscape.
      - Categorize vendors by domain (infrastructure, security, observability, etc.)
      - Assess adoption strength per vendor from evidence (job postings, announcements)
      - Identify vendor consolidation or displacement patterns
      - Map our vendor position relative to detected competitors
      - Flag displacement opportunities where competitor tools are declining

      Format:
      - vendors: [{name, category, adoption_strength, evidence_count, trend, status}]
      - categories: [{name, total_vendors, dominant_vendor, consolidation_trend}]
      - displacement_opportunities: [{incumbent, declining_signal, our_product, confidence}]
      - our_position: [{category, our_product, detected_competitor, relative_strength}]

  weekly_tech_digest:
    name: "Weekly Technology Intelligence Digest"
    description: "Generate weekly technology intelligence summary"
    prompt: |
      Context: Generating weekly digest for {company_name} (realm: {realm_id}).
      Current map: {current_map}
      Previous week map: {previous_week_map}
      Active nodes: {active_nodes}

      Action: Summarize weekly technology intelligence.
      - Highlight new technologies detected this week
      - List top trending up and trending down technologies
      - Summarize competitive technology moves
      - Note vendor landscape changes
      - Connect insights to active node contexts

      Format:
      - digest_date: {date}
      - new_technologies: [{name, quadrant, ring, relevance}]
      - trending_up: [{name, trend_percentage, significance}]
      - trending_down: [{name, trend_percentage, significance}]
      - competitive_moves: [{competitor, technology, implication}]
      - vendor_changes: [{vendor, change, impact}]
      - node_relevance: [{node_id, relevant_insights}]
