# Senior Manager Agent Task Prompts
# Purpose: Task-specific prompts using CAF framework (Context, Action, Format)
# Reference: Agent config defined in agents/senior_manager_agent.yaml

# ============================================================================
# ESCALATION HANDLING PROMPTS
# ============================================================================
escalation_handling:

  triage_escalation:
    name: "Escalation Triage"
    description: "Assess incoming escalation and determine response approach"
    prompt: |
      Context: New escalation received from {source_agent} regarding {account_name}.
      Escalation type: {escalation_type}
      Urgency: {urgency_level}
      Current deal value: {deal_value}

      Action: Triage this escalation:
      - What is the specific decision needed?
      - What options have been considered?
      - What is the team's recommendation?
      - What is the deadline for decision?
      - Does this require my direct involvement or can I coach to resolution?

      Format:
      - Escalation summary (1-2 sentences)
      - Decision required: [YES/NO with specifics]
      - Options presented with pros/cons
      - Team recommendation assessment
      - My decision or coaching response
      - Response deadline and communication plan

  resolve_escalation:
    name: "Escalation Resolution"
    description: "Document escalation resolution and learnings"
    prompt: |
      Context: Resolving escalation {escalation_id} for {account_name}.
      Original issue: {issue_summary}
      Options considered: {options}
      Decision made: {decision}

      Action: Document resolution:
      - What was the final decision and rationale?
      - What factors were most important?
      - What should the team learn from this?
      - Are there systemic issues to address?

      Format:
      - Decision: {decision} with rationale
      - Key decision factors (prioritized list)
      - Learnings for team
      - Process improvements if any
      - Follow-up actions required

  pattern_recognition:
    name: "Escalation Pattern Analysis"
    description: "Identify patterns in escalations to address root causes"
    prompt: |
      Context: Review escalations from the last {time_period}.
      Total escalations: {count}
      By type: {type_breakdown}
      By source: {source_breakdown}

      Action: Identify patterns:
      - What types of escalations are recurring?
      - Which team members or accounts generate most escalations?
      - What root causes are driving escalations?
      - What systemic improvements would reduce escalations?

      Format:
      - Top 3 escalation patterns
      - Root cause analysis for each
      - Team members needing coaching (with approach)
      - Process/tool improvements recommended
      - 30-day action plan to reduce escalations

# ============================================================================
# BID/NO-BID DECISION PROMPTS
# ============================================================================
bid_decisions:

  bid_no_bid_assessment:
    name: "Bid/No-Bid Decision"
    description: "Make go/no-go decision on major pursuit"
    prompt: |
      Context: Bid/no-bid decision requested for {opportunity_name} at {account_name}.
      Deal value: {deal_value}
      Competitor(s): {competitors}
      Required resources: {resource_requirements}
      Team recommendation: {team_recommendation}

      Action: Assess opportunity:
      - What is the strategic value beyond revenue?
      - What do we learn even if we lose?
      - What other deals suffer if we pursue?
      - Is the customer worth the investment?
      - What's our realistic win probability?

      Format:
      - Decision: [BID / NO-BID / CONDITIONAL BID]
      - Strategic value assessment (1-10)
      - Win probability assessment (%)
      - Resource cost vs. expected value analysis
      - Conditions for bid (if conditional)
      - Communication to team and customer
      - Review checkpoint date (if bid)

  pursuit_prioritization:
    name: "Pursuit Prioritization"
    description: "Prioritize competing opportunities for resources"
    prompt: |
      Context: Multiple opportunities competing for limited resources.
      Opportunities:
      {opportunity_list_with_values}
      Available resources: {resource_availability}

      Action: Prioritize pursuits:
      - Rank opportunities by strategic value adjusted for win probability
      - Identify which opportunities to fully resource
      - Identify which to pursue with limited investment
      - Identify which to defer or decline

      Format:
      - Prioritized opportunity ranking with reasoning
      - Resource allocation per opportunity
      - Opportunities to decline/defer with customer message
      - Trade-offs and risks of this allocation
      - Review date for reassessment

  large_deal_review:
    name: "Large Deal Review"
    description: "Review strategic large deal progress and strategy"
    prompt: |
      Context: Regular review of large deal {opportunity_name} at {account_name}.
      Deal value: {deal_value}
      Current stage: {stage}
      Days in stage: {days_in_stage}
      MEDDPICC score: {meddpicc_score}

      Action: Review deal health and strategy:
      - Is the deal on track? What's changed since last review?
      - Are we engaging at the right level?
      - What's the competitive situation?
      - What risks need mitigation?
      - What executive engagement is needed?

      Format:
      - Deal health: [GREEN/YELLOW/RED] with evidence
      - Strategy assessment: On track / Needs adjustment
      - Key risks and mitigations
      - Executive engagement needed (if any)
      - Next 30-day action plan
      - Escalation to VP needed? [YES/NO with reasoning]

# ============================================================================
# COACHING PROMPTS
# ============================================================================
coaching:

  deal_coaching:
    name: "Deal Strategy Coaching"
    description: "Coach team member on deal strategy"
    prompt: |
      Context: Coaching session with {team_member} on {opportunity_name}.
      Deal value: {deal_value}
      Current challenge: {challenge_description}
      Team member's proposed approach: {proposed_approach}

      Action: Coach through questions, not answers:
      - Situation: What's the current state?
      - Options: What alternatives have been considered?
      - Recommendation: What does the team member recommend?
      - Risks: What's the main risk?
      - Learning: What would change their mind?

      Format:
      - Opening question to understand situation
      - 3-5 coaching questions (not answers)
      - Assessment of team member's thinking
      - Guidance on areas to explore further
      - Agreement on next steps (their actions, not mine)
      - Follow-up checkpoint

  skill_development:
    name: "Skill Development Plan"
    description: "Create development plan for team member"
    prompt: |
      Context: Development planning for {team_member}.
      Current role: {role}
      Tenure: {tenure}
      Recent performance: {performance_summary}
      Career aspirations: {aspirations}

      Action: Assess development needs:
      - What skills are strongest?
      - What skills need development?
      - What experiences would accelerate growth?
      - What coaching approach works best for this person?

      Format:
      - Strengths to leverage (top 3)
      - Development areas (top 2-3)
      - Recommended experiences/assignments
      - Coaching approach for this individual
      - 90-day development goals
      - Support/resources I'll provide

  post_mortem_coaching:
    name: "Win/Loss Coaching"
    description: "Extract learnings from win or loss"
    prompt: |
      Context: Post-mortem on {outcome} for {opportunity_name}.
      Deal value: {deal_value}
      Key team members: {team_members}
      Duration of pursuit: {duration}

      Action: Facilitate learning:
      - What worked well? (Reinforce)
      - What would we do differently? (Improve)
      - What patterns do we see? (Systemic learning)
      - How do we apply this to active deals?

      Format:
      - What worked well (celebrate and reinforce)
      - What to improve (constructive, forward-looking)
      - Patterns/insights for the team
      - Specific applications to current deals
      - Process/playbook updates if any
      - Recognition for team members

# ============================================================================
# EXECUTIVE ENGAGEMENT PROMPTS
# ============================================================================
executive_engagement:

  executive_call_prep:
    name: "Executive Call Preparation"
    description: "Prepare for executive-to-executive call"
    prompt: |
      Context: Executive call scheduled with {customer_executive} ({title})
      at {account_name}.
      Purpose: {call_purpose}
      Current relationship: {relationship_status}
      Deal context: {deal_context}

      Action: Prepare executive brief:
      - What does this executive care about?
      - What value have we delivered?
      - What's the ask/offer?
      - What might they push back on?

      Format:
      - Executive profile (priorities, style, history)
      - Key talking points (3-5 max)
      - Value delivered to date (quantified)
      - The ask (specific, clear)
      - Potential objections with responses
      - Meeting success criteria

  executive_escalation_response:
    name: "Executive Escalation Response"
    description: "Handle customer executive escalation"
    prompt: |
      Context: Customer executive {executive_name} has escalated issue:
      {issue_description}
      Account: {account_name}
      ARR: {arr}
      Relationship health: {health_score}

      Action: Prepare response:
      - What is the root cause?
      - What does the executive actually want?
      - What's the minimum intervention needed?
      - How do we resolve and strengthen relationship?

      Format:
      - Issue root cause (not just symptom)
      - Executive's underlying concern
      - Proposed resolution
      - Communication to executive (tone, content)
      - Internal follow-up to prevent recurrence
      - Relationship recovery plan

  ebr_strategy:
    name: "Executive Business Review Strategy"
    description: "Plan strategic executive business review"
    prompt: |
      Context: Planning EBR for {account_name}.
      Current ARR: {arr}
      Expansion opportunity: {expansion_value}
      Key executives to engage: {executives}
      Relationship health: {health}

      Action: Develop EBR strategy:
      - What message do we want to land?
      - What value story resonates with this executive team?
      - What's the ask?
      - How do we differentiate from vendor reviews?

      Format:
      - EBR theme/message
      - Value story with proof points
      - Strategic alignment discussion points
      - The ask (clear, specific)
      - Success metrics for the EBR
      - Follow-up plan

# ============================================================================
# PORTFOLIO OVERSIGHT PROMPTS
# ============================================================================
portfolio_oversight:

  weekly_pipeline_review:
    name: "Weekly Pipeline Review"
    description: "Review pipeline health and at-risk deals"
    prompt: |
      Context: Weekly pipeline review.
      Total pipeline: {pipeline_value}
      Target: {target}
      Coverage ratio: {coverage}
      Deals in forecast: {forecast_deals}

      Action: Assess pipeline health:
      - Is coverage sufficient?
      - Which deals are at highest risk?
      - Where is momentum stalling?
      - What interventions are needed this week?

      Format:
      - Pipeline health: [GREEN/YELLOW/RED]
      - Coverage assessment
      - Top 5 at-risk deals with required actions
      - Deals needing my engagement
      - Resource reallocation needed
      - Focus areas for this week

  monthly_performance_review:
    name: "Monthly Performance Review"
    description: "Review team and deal performance patterns"
    prompt: |
      Context: Monthly performance review for {month}.
      Wins: {win_count} totaling {win_value}
      Losses: {loss_count} totaling {loss_value}
      Win rate: {win_rate}%
      Average deal size: {avg_deal_size}

      Action: Analyze performance patterns:
      - What drove wins this month?
      - What patterns do we see in losses?
      - Which team members are excelling/struggling?
      - What strategic adjustments are needed?

      Format:
      - Performance summary vs. target
      - Win pattern analysis (what worked)
      - Loss pattern analysis (what to improve)
      - Team member performance highlights/concerns
      - Strategic adjustments for next month
      - Coaching priorities

  quarterly_strategy_review:
    name: "Quarterly Strategy Review"
    description: "Review and adjust territory strategy"
    prompt: |
      Context: Quarterly strategy review for {quarter}.
      Results: {quarterly_results}
      Market dynamics: {market_changes}
      Competitive landscape: {competitive_changes}
      Resource changes: {resource_changes}

      Action: Assess and adjust strategy:
      - Are we focused on the right accounts?
      - Is our competitive position strengthening?
      - What market changes affect our strategy?
      - What adjustments are needed?

      Format:
      - Quarterly results vs. plan
      - Strategic wins and learnings
      - Market/competitive assessment
      - Account tier adjustments (if any)
      - Resource allocation changes
      - Q+1 priorities and investments
      - Team development focus areas

# ============================================================================
# RESOURCE ALLOCATION PROMPTS
# ============================================================================
resource_allocation:

  resource_conflict_resolution:
    name: "Resource Conflict Resolution"
    description: "Resolve competing demands for limited resources"
    prompt: |
      Context: Resource conflict for {resource_type}.
      Competing requests:
      {request_list_with_details}
      Available capacity: {capacity}

      Action: Resolve conflict:
      - Assess strategic value of each opportunity
      - Calculate resource cost and availability
      - Consider relationship and momentum impact
      - Make decision, communicate clearly

      Format:
      - Decision: Resource allocation by opportunity
      - Rationale (strategic criteria applied)
      - Impact on each requesting team
      - Communication to affected parties
      - Mitigation for deprioritized opportunities
      - Review date if situation changes

  capacity_planning:
    name: "Resource Capacity Planning"
    description: "Plan resource allocation for upcoming quarter"
    prompt: |
      Context: Capacity planning for {quarter}.
      Pipeline: {pipeline_summary}
      Current resource utilization: {utilization}
      Anticipated major pursuits: {major_pursuits}

      Action: Plan resource allocation:
      - What capacity do we have?
      - What demand do we anticipate?
      - Where are the gaps?
      - What trade-offs must we make?

      Format:
      - Capacity by resource type
      - Demand forecast by month
      - Gap analysis
      - Allocation recommendations
      - Trade-offs and risks
      - Hiring/contractor recommendations

  strategic_investment_decision:
    name: "Strategic Investment Decision"
    description: "Decide on investment in strategic account"
    prompt: |
      Context: Investment decision for {account_name}.
      Proposed investment: {investment_description}
      Cost: {investment_cost}
      Expected return: {expected_return}
      Alternatives: {alternatives}

      Action: Assess investment:
      - What's the strategic value?
      - What's the risk-adjusted return?
      - What alternatives exist?
      - What opportunity cost?

      Format:
      - Decision: [APPROVE/DENY/MODIFY]
      - Strategic value assessment
      - Financial analysis (cost vs. return)
      - Risk factors
      - Conditions/guardrails if approved
      - Success metrics and review date
