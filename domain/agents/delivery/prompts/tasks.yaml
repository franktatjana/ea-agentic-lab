# Delivery Agent Task Prompts
# Purpose: Task-specific prompts using CAF framework (Context, Action, Format)
# Reference: Personality defined in personalities/delivery_personality.yaml

# ============================================================================
# PROJECT HEALTH PROMPTS
# ============================================================================
project_health:

  status_summary:
    name: "Project Status Summary"
    description: "Generate concise project status for account team"
    prompt: |
      Context: Review project {project_name} for {account_name}.
      Phase: {current_phase}
      Target go-live: {go_live_date}

      Action: Generate status summary:
      - Overall health assessment
      - Milestone status
      - Blockers and risks
      - What account team needs to know

      Format:
      - Health: [GREEN/YELLOW/RED] with 1-sentence justification
      - Milestones table (Milestone | Due | Status | Notes)
      - Blockers (if any)
      - Account team action needed: [YES/NO]
      - Next update: {date}

  go_live_readiness:
    name: "Go-Live Readiness Assessment"
    description: "Assess readiness for production go-live"
    prompt: |
      Context: {account_name} go-live planned for {go_live_date}.
      Current phase: {current_phase}
      Days until go-live: {days}

      Action: Assess go-live readiness:
      - What is complete?
      - What is still pending?
      - What are the risks?
      - Go/No-Go recommendation

      Format:
      - Readiness score: {percentage}
      - Complete items checklist
      - Pending items with owners and ETAs
      - Risks to go-live table
      - Recommendation: [GO/CONDITIONAL/NO-GO]
      - If CONDITIONAL: What must complete first

  weekly_report:
    name: "Weekly Delivery Report"
    description: "Generate weekly delivery report for stakeholders"
    prompt: |
      Context: Week ending {week_end_date}.
      Active projects: {project_list}

      Action: Generate weekly report:
      - Overall portfolio health
      - Project-by-project status
      - Key accomplishments
      - Issues requiring attention
      - Next week priorities

      Format:
      - Executive summary (3 sentences)
      - Portfolio health: {GREEN/YELLOW/RED count}
      - Project status table (Project | Health | Update | Risk)
      - Key accomplishments list
      - Issues requiring attention (with owners)
      - Next week focus areas

# ============================================================================
# BLOCKER MANAGEMENT PROMPTS
# ============================================================================
blocker_management:

  blocker_analysis:
    name: "Blocker Impact Analysis"
    description: "Analyze blocker impact and resolution path"
    prompt: |
      Context: Blocker: "{blocker_description}"
      Project: {project_name}
      Blocked since: {date}

      Action: Analyze blocker:
      - What is blocked by this?
      - What is the timeline impact?
      - Who can resolve it?
      - What are resolution options?

      Format:
      - Blocker summary
      - Impact: {HIGH/MEDIUM/LOW}
      - Timeline impact: {days delay}
      - Blocked items list
      - Resolution owner: {name}
      - Resolution options (prioritized)
      - Recommended action
      - Escalation needed: [YES/NO]

  escalation_brief:
    name: "Delivery Escalation Brief"
    description: "Prepare escalation brief for leadership"
    prompt: |
      Context: Project {project_name} requires escalation.
      Issue: {issue_description}
      Impact: {impact_description}

      Action: Prepare escalation brief:
      - What is the issue?
      - What has been tried?
      - What is the ask?
      - What are the options?

      Format:
      - Issue summary (2 sentences)
      - Background (what led to this)
      - Attempts to resolve
      - Current impact
      - Ask: What we need from leadership
      - Options with trade-offs
      - Recommended path

  dependency_tracker:
    name: "Dependency Status Update"
    description: "Track and report on project dependencies"
    prompt: |
      Context: Review dependencies for {project_name}.

      Action: Update dependency status:
      - What are we waiting on?
      - What is the status of each?
      - What is at risk?
      - What actions are needed?

      Format:
      - Dependencies table (Dependency | Owner | Due | Status | Risk)
      - At-risk dependencies (detail)
      - Actions to unblock
      - Escalation recommendations

# ============================================================================
# HANDOFF PROMPTS
# ============================================================================
handoff:

  support_handoff:
    name: "Support Team Handoff"
    description: "Prepare handoff documentation for support team"
    prompt: |
      Context: {project_name} for {account_name} completing delivery phase.
      Go-live date: {go_live_date}

      Action: Prepare support handoff:
      - What was implemented?
      - What are known issues?
      - What does support need to know?
      - Who are the contacts?

      Format:
      - Implementation summary
      - Architecture overview
      - Known issues and workarounds
      - Customer contacts and escalation
      - Common issues to expect
      - Documentation links
      - Handoff checklist

  account_team_brief:
    name: "Account Team Delivery Brief"
    description: "Brief account team on delivery outcomes"
    prompt: |
      Context: Delivery complete for {project_name}.
      Summarize for account team.

      Action: Create account team brief:
      - What was delivered?
      - How did it go?
      - What should AE know for conversations?
      - What follow-up opportunities exist?

      Format:
      - Delivery summary (3 sentences)
      - Delivered vs planned scope
      - Customer satisfaction indicators
      - Talking points for AE
      - Follow-up opportunities (expansion, services)
      - Lessons learned

  phase_transition:
    name: "Phase Transition Summary"
    description: "Document transition between project phases"
    prompt: |
      Context: {project_name} transitioning from {phase_from} to {phase_to}.

      Action: Document phase transition:
      - What was accomplished in completed phase?
      - What carries over?
      - What are the next phase priorities?
      - What risks need attention?

      Format:
      - Completed phase summary
      - Deliverables produced
      - Carry-over items
      - Next phase objectives
      - Next phase timeline
      - Risks for next phase
      - Team changes (if any)

# ============================================================================
# RISK AND ISSUE PROMPTS
# ============================================================================
risk_issue:

  risk_identification:
    name: "Delivery Risk Identification"
    description: "Identify risks from project status and signals"
    prompt: |
      Context: Review {project_name} status, communications, and metrics.

      Action: Identify delivery risks:
      - What could delay the project?
      - What could impact quality?
      - What could affect customer satisfaction?
      - What dependencies are fragile?

      Format:
      - Risks table (Risk | Likelihood | Impact | Mitigation | Owner)
      - Top 3 risks to monitor
      - New risks since last review
      - Risks that have materialized
      - Recommended actions

  issue_triage:
    name: "Issue Triage and Prioritization"
    description: "Triage and prioritize open issues"
    prompt: |
      Context: Open issues for {project_name}: {issue_count}
      Categories: {issue_categories}

      Action: Triage issues:
      - Which are blocking progress?
      - Which affect go-live?
      - Which can wait?
      - How should we prioritize?

      Format:
      - Issues by priority table (Issue | Severity | Impact | Owner | ETA)
      - Blocking issues (immediate attention)
      - Go-live affecting issues
      - Can defer list
      - Resource recommendations

  customer_impact:
    name: "Customer Impact Assessment"
    description: "Assess customer impact of delivery issue"
    prompt: |
      Context: Issue: "{issue_description}"
      Customer: {account_name}

      Action: Assess customer impact:
      - How does this affect the customer?
      - What is the business impact?
      - How should we communicate?
      - What is our recovery plan?

      Format:
      - Customer impact: [HIGH/MEDIUM/LOW]
      - Business impact description
      - Customer communication (draft)
      - Recovery plan
      - Timeline to resolution
      - Escalation status
