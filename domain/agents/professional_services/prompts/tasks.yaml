# Professional Services Agent Task Prompts
# Purpose: Task-specific prompts using CAF framework (Context, Action, Format)
# Reference: Agent config defined in agents/ps_agent.yaml

# ============================================================================
# PRE-SALES SCOPING PROMPTS
# ============================================================================
presales_scoping:

  scope_engagement:
    name: "Scope Professional Services Engagement"
    description: "Assess and scope PS engagement during pre-sales"
    prompt: |
      Context: Pre-sales engagement scoping needed.
      Customer: {customer_name}
      Opportunity: {opportunity_name}
      Technical requirements: {requirements_summary}
      Requested services: {service_types}

      Action: Scope the engagement:
      - Review technical requirements with SA
      - Assess customer readiness (team, infra, data)
      - Identify dependencies and prerequisites
      - Estimate effort and timeline
      - Flag delivery risks early

      Format:
      PS Scoping Assessment: {customer_name}
      Opportunity: {opportunity_name}

      Requested Services:
      - {service 1}
      - {service 2}

      Customer Readiness Assessment:
      | Area | Status | Notes |
      |------|--------|-------|
      | Team resources | {ready/partial/not_ready} | {notes} |
      | Infrastructure | {ready/partial/not_ready} | {notes} |
      | Data readiness | {ready/partial/not_ready} | {notes} |
      | Technical skills | {ready/partial/not_ready} | {notes} |

      Dependencies:
      - {dependency 1}
      - {dependency 2}

      Effort Estimate:
      | Phase | Days | Resources | Notes |
      |-------|------|-----------|-------|
      | Discovery | {days} | {count} | {notes} |
      | Implementation | {days} | {count} | {notes} |
      | Testing | {days} | {count} | {notes} |
      | Knowledge transfer | {days} | {count} | {notes} |
      | Total | {days} | | |

      Timeline:
      - Earliest start: {date}
      - Estimated duration: {weeks}
      - Go-live target: {date}

      Risks:
      - {risk 1}: Severity: {H/M/L}
      - {risk 2}: Severity: {H/M/L}

      Recommendation: {PROCEED / PROCEED_WITH_CONDITIONS / REASSESS}

  validate_sow:
    name: "Validate Statement of Work"
    description: "Review SOW against delivery reality"
    prompt: |
      Context: SOW review needed before customer signing.
      Customer: {customer_name}
      SOW: {sow_summary}
      Scoping assessment: {scoping_assessment}

      Action: Validate SOW against reality:
      - Does scope match scoping assessment?
      - Is pricing aligned with effort?
      - Are assumptions documented?
      - Are there scope gaps that will bite later?

      Format:
      SOW Validation: {customer_name}

      Scope Alignment:
      | SOW Section | Scoping | Match | Notes |
      |-------------|---------|-------|-------|
      | {section} | {scoping} | {YES/PARTIAL/NO} | {gap} |

      Pricing Review:
      - SOW price: {price}
      - Estimated effort: {days}
      - Effective day rate: {rate}
      - Assessment: {appropriate/underpriced/overpriced}

      Assumptions Review:
      - [ ] Customer resources documented
      - [ ] Environment prerequisites listed
      - [ ] Timeline dependencies noted
      - [ ] Change process defined
      - [ ] Acceptance criteria clear

      Gaps/Concerns:
      - {gap 1}: Impact: {description}

      Recommendation:
      - {APPROVE / REQUEST_CHANGES}

      Required Changes:
      - {change if any}

  assess_delivery_risk:
    name: "Assess Delivery Risk"
    description: "Evaluate delivery risk for deal review"
    prompt: |
      Context: Delivery risk assessment for deal review.
      Customer: {customer_name}
      Engagement: {engagement_summary}
      Team assessment: {team_notes}

      Action: Assess delivery risks:
      - Customer readiness risks
      - Scope risks
      - Timeline risks
      - Resource risks
      - Technical risks

      Format:
      Delivery Risk Assessment: {customer_name}

      Overall Risk Level: {HIGH/MEDIUM/LOW}

      Risk Matrix:
      | Risk Category | Level | Details | Mitigation |
      |---------------|-------|---------|------------|
      | Customer readiness | {H/M/L} | {details} | {mitigation} |
      | Scope clarity | {H/M/L} | {details} | {mitigation} |
      | Timeline | {H/M/L} | {details} | {mitigation} |
      | Resources | {H/M/L} | {details} | {mitigation} |
      | Technical | {H/M/L} | {details} | {mitigation} |

      Red Flags:
      - {flag if any}

      Conditions for Proceeding:
      - {condition 1}

      Recommendation for Deal Review:
      - {recommendation}

# ============================================================================
# PROJECT EXECUTION PROMPTS
# ============================================================================
project_execution:

  kickoff_prep:
    name: "Project Kickoff Preparation"
    description: "Prepare for project kickoff meeting"
    prompt: |
      Context: Preparing project kickoff.
      Customer: {customer_name}
      Project: {project_name}
      SOW: {sow_summary}
      Kick off date: {date}

      Action: Prepare kickoff materials:
      - Validate scope against signed SOW
      - Confirm customer resources and access
      - Establish communication cadence
      - Set expectations on change process

      Format:
      Kickoff Preparation: {project_name}
      Customer: {customer_name}
      Date: {date}

      Scope Validation:
      - [ ] SOW reviewed with delivery team
      - [ ] Deliverables list confirmed
      - [ ] Out-of-scope items documented

      Customer Readiness Checklist:
      - [ ] Customer PM identified: {name}
      - [ ] Technical resources assigned: {names}
      - [ ] Environment access granted
      - [ ] Data prepared for migration (if applicable)

      Communication Plan:
      - Status meeting: {cadence}
      - Attendees: {list}
      - Escalation path: {path}

      Change Management:
      - Change request process: {process}
      - Approval authority: {who}

      Kickoff Agenda:
      1. Introductions (10 min)
      2. Project overview and objectives (15 min)
      3. Scope review and deliverables (20 min)
      4. Timeline and milestones (15 min)
      5. Roles and responsibilities (10 min)
      6. Communication and change process (10 min)
      7. Questions and next steps (10 min)

      Pre-read Materials:
      - {document list}

  weekly_status_update:
    name: "Weekly Status Update"
    description: "Generate weekly project status update"
    prompt: |
      Context: Weekly status update for project.
      Customer: {customer_name}
      Project: {project_name}
      Week: {week_number}
      Progress: {progress_notes}
      Issues: {issues_list}

      Action: Create status update covering:
      - Overall status
      - Accomplishments this week
      - Planned for next week
      - Risks and issues
      - Decisions needed

      Format:
      Weekly Status: {project_name}
      Week: {week_number} | {date_range}
      Customer: {customer_name}

      Overall Status: {GREEN/YELLOW/RED}

      Progress Summary:
      {1-2 sentence summary}

      Accomplishments This Week:
      - {accomplishment 1}
      - {accomplishment 2}

      Planned Next Week:
      - {plan 1}
      - {plan 2}

      Milestone Status:
      | Milestone | Due | Status | Notes |
      |-----------|-----|--------|-------|
      | {milestone} | {date} | {on_track/at_risk/complete} | {notes} |

      Risks/Issues:
      | Item | Severity | Owner | Mitigation |
      |------|----------|-------|------------|
      | {item} | {H/M/L} | {owner} | {action} |

      Decisions Needed:
      - {decision}: By {date}

      Blockers:
      - {blocker if any}

  track_progress:
    name: "Track Project Progress"
    description: "Track detailed project progress against plan"
    prompt: |
      Context: Tracking project progress.
      Project: {project_name}
      Plan: {project_plan}
      Current status: {status_notes}

      Action: Track progress against milestones:
      - Compare actual vs. planned
      - Identify variances
      - Update forecasts
      - Flag risks

      Format:
      Progress Tracking: {project_name}
      As of: {date}

      Overall Progress: {x}% complete (planned: {y}%)
      Variance: {ahead/on_track/behind by X days}

      Phase Status:
      | Phase | Planned | Actual | Variance | Notes |
      |-------|---------|--------|----------|-------|
      | {phase} | {date} | {date} | {days} | {notes} |

      Deliverable Status:
      | Deliverable | Status | Notes |
      |-------------|--------|-------|
      | {deliverable} | {complete/in_progress/not_started} | {notes} |

      Resource Utilization:
      - Planned: {hours/days}
      - Actual: {hours/days}
      - Variance: {over/under}

      Forecast:
      - Current go-live estimate: {date}
      - Confidence: {HIGH/MEDIUM/LOW}

      Actions Needed:
      - {action to get back on track if needed}

# ============================================================================
# SCOPE MANAGEMENT PROMPTS
# ============================================================================
scope_management:

  process_change_request:
    name: "Process Change Request"
    description: "Handle scope change request"
    prompt: |
      Context: Change request received from customer.
      Customer: {customer_name}
      Project: {project_name}
      Request: {change_description}
      Requestor: {requestor}

      Action: Process change request:
      - Document what's being asked
      - Assess impact (effort, timeline, cost)
      - Present options with trade-offs
      - Prepare for approval process

      Format:
      Change Request: {cr_id}
      Project: {project_name}
      Customer: {customer_name}

      Request Description:
      {detailed description}

      Requestor: {name}
      Date requested: {date}

      Impact Assessment:
      | Dimension | Current | With Change | Delta |
      |-----------|---------|-------------|-------|
      | Effort (days) | {current} | {new} | +{delta} |
      | Timeline | {current} | {new} | +{delta} |
      | Cost | {current} | {new} | +{delta} |

      Options:
      1. Approve change
         - Impact: {description}
         - Timeline: {new timeline}
         - Cost: {additional cost}

      2. Partial scope
         - What's included: {description}
         - Impact: {reduced impact}

      3. Defer to phase 2
         - No current impact
         - Added to backlog

      4. Decline
         - Reason: {if applicable}

      Recommendation: {option number}
      Reasoning: {why}

      Approval Required From:
      - Customer: {name}
      - Internal: {name}

  flag_scope_creep:
    name: "Flag Scope Creep"
    description: "Identify and escalate scope creep"
    prompt: |
      Context: Potential scope creep detected.
      Project: {project_name}
      Customer: {customer_name}
      Observation: {what_you_noticed}

      Action: Document and escalate scope creep:
      - What work is being requested?
      - Is it in the SOW?
      - What's the impact?
      - How to address?

      Format:
      Scope Creep Alert: {project_name}

      Observation:
      {description of scope creep}

      SOW Check:
      - In SOW: {YES/NO}
      - Related SOW section: {section or N/A}
      - Gap: {description}

      Impact if Absorbed:
      - Additional effort: {days}
      - Timeline impact: {days}
      - Resource impact: {description}

      Risk:
      - Sets precedent for: {what}
      - Relationship impact if addressed: {LOW/MEDIUM/HIGH}

      Recommended Response:
      - {approach}

      Customer Communication:
      {suggested message to customer}

      Escalation:
      - Escalate to: {who}
      - By: {date}

# ============================================================================
# HANDOFF PROMPTS
# ============================================================================
handoff:

  sales_to_delivery_handoff:
    name: "Sales to Delivery Handoff"
    description: "Document handoff from sales to delivery"
    prompt: |
      Context: Project handoff from sales to delivery.
      Customer: {customer_name}
      Project: {project_name}
      Sales team: {sales_contacts}
      Delivery team: {delivery_contacts}

      Action: Document handoff information:
      - Compile all required inputs
      - Validate readiness
      - Identify gaps
      - Schedule transition meeting

      Format:
      Sales to Delivery Handoff: {project_name}
      Customer: {customer_name}

      Sales Team:
      - AE: {name}
      - SA: {name}

      Delivery Team:
      - PM: {name}
      - Consultants: {names}

      Handoff Checklist:
      - [ ] Signed SOW received
      - [ ] Technical requirements documented
      - [ ] Customer stakeholder map provided
      - [ ] Known risks documented
      - [ ] Timeline commitments documented
      - [ ] Customer expectations captured

      Key Information:
      | Item | Status | Location/Notes |
      |------|--------|----------------|
      | SOW | {received/pending} | {location} |
      | Technical requirements | {complete/partial} | {location} |
      | Stakeholder map | {complete/partial} | {location} |
      | Risk register | {complete/partial} | {location} |

      Gaps to Address:
      - {gap 1}: Owner: {who}

      Customer Context:
      - Relationship history: {brief}
      - Key stakeholder dynamics: {notes}
      - Sensitivities: {any to know}

      Handoff Meeting:
      - Date: {date}
      - Attendees: {list}
      - Agenda: {overview}

  delivery_to_operations_handoff:
    name: "Delivery to Operations Handoff"
    description: "Document handoff from delivery to support/CS"
    prompt: |
      Context: Project completion handoff.
      Customer: {customer_name}
      Project: {project_name}
      Go-live date: {date}
      Support team: {support_contacts}

      Action: Document completion and handoff:
      - What was delivered
      - Architecture and documentation
      - Known issues and workarounds
      - Support considerations

      Format:
      Delivery to Operations Handoff: {project_name}
      Customer: {customer_name}
      Go-live: {date}

      Delivered:
      - {deliverable 1}
      - {deliverable 2}

      Documentation:
      | Document | Location | Notes |
      |----------|----------|-------|
      | Architecture diagram | {location} | {notes} |
      | Runbook | {location} | {notes} |
      | Configuration guide | {location} | {notes} |

      Technical Summary:
      - Deployment: {description}
      - Integrations: {description}
      - Key configurations: {description}

      Known Issues/Workarounds:
      | Issue | Workaround | Tracking |
      |-------|------------|----------|
      | {issue} | {workaround} | {ticket} |

      Support Considerations:
      - SLA level: {level}
      - Primary contacts: {names}
      - Escalation path: {path}
      - Sensitivities: {any}

      Expansion Opportunities:
      - {opportunity 1}

      Handoff Meeting:
      - Date: {date}
      - Attendees: {list}

# ============================================================================
# LESSONS LEARNED PROMPTS
# ============================================================================
lessons_learned:

  capture_lessons_learned:
    name: "Capture Lessons Learned"
    description: "Document project lessons learned"
    prompt: |
      Context: Project completing, capture lessons learned.
      Customer: {customer_name}
      Project: {project_name}
      Duration: {duration}
      Outcome: {successful/challenging/etc}

      Action: Capture lessons learned:
      - What worked well?
      - What didn't work?
      - What would we do differently?
      - What should we share with others?

      Format:
      Lessons Learned: {project_name}
      Customer: {customer_name}
      Duration: {duration}
      Team: {team_members}

      Project Outcome:
      - {brief summary}

      What Worked Well:
      - {success 1}: Why: {reason}
      - {success 2}: Why: {reason}

      What Didn't Work:
      - {issue 1}: Impact: {impact}
      - {issue 2}: Impact: {impact}

      What We'd Do Differently:
      - {recommendation 1}
      - {recommendation 2}

      Process Improvements:
      - {suggestion for process change}

      Knowledge to Share:
      - Technical: {knowledge}
      - Customer: {knowledge}
      - Process: {knowledge}

      Reusable Assets Created:
      - {asset 1}: Location: {location}

      Reference-ability:
      - Customer agreed to be reference: {YES/NO}
      - Story: {brief reference story if yes}

  project_retrospective:
    name: "Project Retrospective"
    description: "Facilitate project retrospective"
    prompt: |
      Context: Running project retrospective.
      Project: {project_name}
      Team: {team_members}
      Project metrics: {metrics}

      Action: Facilitate retrospective covering:
      - What went well
      - What could improve
      - Action items for future projects

      Format:
      Project Retrospective: {project_name}
      Date: {date}
      Participants: {names}

      Project Metrics:
      - On-time delivery: {YES/NO}
      - Scope match: {%}
      - Customer satisfaction: {score}
      - Change requests: {count}

      What Went Well:
      - {item 1}
      - {item 2}

      What Could Improve:
      - {item 1}: Suggestion: {how to improve}
      - {item 2}: Suggestion: {how to improve}

      Start/Stop/Continue:
      - Start: {things to start doing}
      - Stop: {things to stop doing}
      - Continue: {things to keep doing}

      Action Items:
      | Action | Owner | Due |
      |--------|-------|-----|
      | {action} | {owner} | {date} |

      Key Takeaways:
      - {takeaway 1}
