# CI Agent Task Prompts
# Purpose: Task-specific prompts using CAF framework (Context, Action, Format)
# Reference: Personality defined in personalities/ci_personality.yaml

# ============================================================================
# COMPETITIVE SIGNAL DETECTION PROMPTS
# ============================================================================
signal_detection:

  competitor_mention_scan:
    name: "Competitor Mention Scan"
    description: "Scan communications for competitor mentions"
    prompt: |
      Context: Scan all communications for {account_name} in the last
      {time_period} for competitor mentions.

      Action: Identify competitor signals:
      - Which competitors were mentioned?
      - In what context?
      - What was the sentiment?
      - What action is needed?

      Format:
      - Competitors mentioned table (Competitor | Context | Sentiment | Threat level)
      - Key quotes with attribution
      - Threat assessment summary
      - Recommended actions

  threat_assessment:
    name: "Competitive Threat Assessment"
    description: "Assess competitive threat level in opportunity"
    prompt: |
      Context: Opportunity: {opportunity_name} at {account_name}
      Value: {deal_value}
      Stage: {deal_stage}
      Known competitors: {competitor_list}

      Action: Assess competitive threat:
      - What is each competitor's position?
      - What are their strengths here?
      - Where are we stronger?
      - What is our win probability?

      Format:
      - Threat level: [HIGH/MEDIUM/LOW]
      - Competitor analysis table (Competitor | Position | Strengths | Weaknesses)
      - Our competitive advantages (this deal)
      - Our vulnerabilities (this deal)
      - Win probability: {percentage}
      - Recommended competitive strategy

  bake_off_analysis:
    name: "Competitive Bake-Off Analysis"
    description: "Analyze competitive evaluation or POC"
    prompt: |
      Context: {account_name} is evaluating {vendor} against {competitors}.
      Evaluation criteria: {criteria}
      Timeline: {timeline}

      Action: Prepare competitive analysis:
      - What are the evaluation criteria?
      - How do we compare on each?
      - What are our risks?
      - How do we win?

      Format:
      - Evaluation criteria matrix (Criterion | Weight | Us | Competitor 1 | Competitor 2)
      - Our strong points (lead with these)
      - Risk areas (prepare for these)
      - Competitor likely attacks
      - Win strategy recommendations

# ============================================================================
# BATTLECARD PROMPTS
# ============================================================================
battlecard:

  quick_battlecard:
    name: "Quick Competitive Battlecard"
    description: "Generate quick competitive reference for call"
    prompt: |
      Context: Call with {account_name} in {time_until_call}.
      Competitor mentioned: {competitor_name}

      Action: Provide quick battlecard:
      - Top 3 differentiators vs this competitor
      - Their likely claims
      - Our responses
      - Trap questions to avoid

      Format:
      - Quick differentiators (3 bullets)
      - Their claims â†’ Our response (table)
      - Trap questions to avoid
      - Proof points to use

  objection_handling:
    name: "Competitive Objection Handling"
    description: "Prepare responses to competitor-driven objections"
    prompt: |
      Context: Customer objection: "{objection}"
      Likely source: {competitor_name}

      Action: Prepare response:
      - Is this objection valid?
      - What is the full truth?
      - How do we respond?
      - How do we redirect?

      Format:
      - Objection analysis
      - Validity: [TRUE/PARTIAL/FALSE]
      - Full truth (what customer should know)
      - Recommended response (customer-ready)
      - Redirect question (to shift focus)
      - Proof point to share

  displacement_playbook:
    name: "Competitive Displacement Strategy"
    description: "Strategy to displace incumbent competitor"
    prompt: |
      Context: {account_name} currently uses {competitor_name}.
      Contract status: {contract_status}
      Known pain points: {pain_points}

      Action: Develop displacement strategy:
      - What are their pain points with incumbent?
      - What is our entry point?
      - What is the switching cost?
      - How do we position?

      Format:
      - Incumbent analysis (what they have, what hurts)
      - Our entry strategy
      - Switching cost mitigation
      - Timeline to displacement
      - Stakeholders to target
      - Messaging by stakeholder

# ============================================================================
# WIN/LOSS ANALYSIS PROMPTS
# ============================================================================
win_loss:

  win_analysis:
    name: "Competitive Win Analysis"
    description: "Analyze why we won against competition"
    prompt: |
      Context: Won deal: {deal_name} against {competitors}.
      Value: {deal_value}

      Action: Analyze win factors:
      - What were the deciding factors?
      - What did we do well?
      - What almost cost us?
      - What can we replicate?

      Format:
      - Win factors (ranked by importance)
      - Competitive advantages that mattered
      - Close calls (what almost went wrong)
      - Replicable playbook elements
      - Lessons for similar deals

  loss_analysis:
    name: "Competitive Loss Analysis"
    description: "Analyze why we lost to competitor"
    prompt: |
      Context: Lost deal: {deal_name} to {competitor}.
      Value: {deal_value}
      Stated reasons: {stated_reasons}

      Action: Analyze loss factors:
      - What were the real reasons?
      - Where was competitor stronger?
      - What could we have done differently?
      - What do we learn?

      Format:
      - Loss factors (stated vs real)
      - Competitor advantages (this deal)
      - Our gaps exposed
      - What we should have done
      - Pattern: Is this a trend?
      - Recommendations for product/sales

  competitive_trends:
    name: "Competitive Win/Loss Trends"
    description: "Analyze competitive trends over time"
    prompt: |
      Context: Analyze competitive outcomes for {time_period}.
      Segment: {segment}

      Action: Identify trends:
      - Win rate vs each competitor
      - Common win factors
      - Common loss factors
      - Emerging patterns

      Format:
      - Win/loss by competitor table
      - Win rate trends (improving/declining)
      - Top win factors (frequency)
      - Top loss factors (frequency)
      - Emerging competitive threats
      - Recommendations

# ============================================================================
# MARKET INTELLIGENCE PROMPTS
# ============================================================================
market_intel:

  competitor_news:
    name: "Competitor News Analysis"
    description: "Analyze recent competitor news and implications"
    prompt: |
      Context: Recent news about {competitor_name}:
      {news_summary}

      Action: Analyze implications:
      - What does this mean for them?
      - What does this mean for us?
      - How should we respond?
      - What should field know?

      Format:
      - News summary (1 paragraph)
      - Competitor impact
      - Our opportunity/threat
      - Field messaging
      - Recommended actions

  market_positioning:
    name: "Market Positioning Update"
    description: "Update competitive positioning in market segment"
    prompt: |
      Context: Segment: {segment}
      Key competitors: {competitor_list}

      Action: Update positioning:
      - How is market evolving?
      - How are competitors positioning?
      - Where is our differentiation?
      - What messaging works?

      Format:
      - Market evolution summary
      - Competitor positioning table
      - Our differentiation points
      - Messaging recommendations
      - Proof points to emphasize

  analyst_prep:
    name: "Analyst Report Preparation"
    description: "Prepare for analyst briefing or report response"
    prompt: |
      Context: Analyst: {analyst_name}
      Report/Topic: {topic}
      Our position: {current_position}

      Action: Prepare for analyst interaction:
      - What is analyst's likely perspective?
      - What are our key messages?
      - What proof points to share?
      - What questions to expect?

      Format:
      - Analyst perspective
      - Key messages (3-5)
      - Proof points
      - Anticipated questions with answers
      - Competitor comparisons to address
