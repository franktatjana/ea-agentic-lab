# SK_SA_002: Decision Capture
# Extracted from: solution_architects/prompts/tasks.yaml decision_capture section
# Cross-agent: Imports SK_GOV_002 (Extract Decisions) for raw decision extraction,
# then adds technical framing, architecture impact, and ADR generation

skill_id: "SK_SA_002"
name: "Decision Capture"
description: "Capture technical decisions from meetings, frame their architecture impact, and generate ADRs when warranted"
version: 1
owner: "sa_agent"
category: "decision_management"

workflow:
  - step: 1
    action: "Extract raw decisions from meeting notes (delegates to governance decision extraction)"
    prompt_ref: "prompts/tasks.yaml#decision_capture.extract_decisions"
    inputs: ["meeting_notes"]
    outputs: ["raw_decisions"]

  - step: 2
    action: "Analyze architecture impact of each decision: what changes, risks, benefits, reversibility"
    prompt_ref: "prompts/tasks.yaml#decision_capture.decision_impact_analysis"
    inputs: ["raw_decisions", "architecture_summary"]
    outputs: ["impact_analysis"]

  - step: 3
    action: "Generate ADR for significant decisions: problem statement, rationale, alternatives, consequences"
    prompt_ref: "prompts/tasks.yaml#decision_capture.adr_generation"
    inputs: ["raw_decisions", "impact_analysis"]
    outputs: ["adrs"]

inputs:
  required:
    - name: "meeting_notes"
      type: "string"
      description: "Meeting notes containing technical decisions"
  optional:
    - name: "architecture_summary"
      type: "object"
      description: "Current architecture context for impact analysis"
    - name: "decision_log"
      type: "array"
      description: "Existing decisions for cross-reference"

outputs:
  - name: "technical_decisions"
    type: "array"
    format: "yaml"
    description: "Decisions with architecture impact: decision, maker, rationale, impact, ADR recommendation"

  - name: "adrs"
    type: "array"
    format: "markdown"
    description: "Architecture Decision Records for significant decisions"

quality_criteria:
  - "Each decision has architecture impact assessment"
  - "ADR recommendation provided for each decision (YES/NO)"
  - "Alternatives documented for significant decisions"
  - "Impact classified as reversible or irreversible"

guardrails:
  - "Separate technical decisions from business decisions"
  - "Do not generate ADRs for trivial decisions"
  - "Cross-reference with existing decision log"
  - "Flag decisions that conflict with existing ADRs"

imports:
  - "SK_GOV_002"  # Extract Decisions: raw decision extraction from governance

tags: ["architecture", "decisions", "adr", "technical"]
