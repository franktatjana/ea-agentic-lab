# ACI Agent Task Prompts
# Purpose: Task-specific prompts using CAF framework (Context, Action, Format)
# Reference: Personality defined in personalities/aci_personality.yaml

# ==============================================================================
# COMPANY RESEARCH TASKS
# ==============================================================================
company_research:
  company_deep_dive:
    name: "Company Deep-Dive Research"
    description: "Comprehensive company research from public sources"
    prompt: |
      Context: You are researching {company_name} (realm: {realm_id}).
      Industry: {industry}, Sub-industry: {sub_industry}.
      Current company profile: {existing_company_profile}
      Source registry: {source_registry} (check before fetching new URLs)

      Action: Conduct deep-dive research on this company.
      - Search annual reports, 10-K filings, and investor presentations
      - Extract business description, revenue segments, and geographic breakdown
      - Identify business lines and their relative revenue contribution
      - Map strategic initiatives and digital transformation programs
      - Note any recent M&A activity, partnerships, or restructuring

      Format:
      - company_overview: {founded, hq, employees, revenue, public_private}
      - business_description: 2-3 paragraph summary
      - business_lines: [{name, description, revenue_contribution, head}]
      - strategic_initiatives: [{initiative, timeframe, relevance_to_vendor, status}]
      - sources_used: [{url, title, date_accessed, type}]

  business_line_analysis:
    name: "Business Line Analysis"
    description: "Detailed analysis of company revenue segments and business units"
    prompt: |
      Context: Analyzing business lines for {company_name} (realm: {realm_id}).
      Latest annual report data: {annual_report_data}
      Existing business lines: {existing_business_lines}

      Action: Analyze the company's business line structure.
      - Extract revenue segments from latest financial disclosures
      - Identify each business line's strategic focus and growth trajectory
      - Determine geographic distribution per business line
      - Assess which business lines are most relevant to vendor engagement

      Format:
      - business_lines: [{id, name, revenue, growth_rate, focus_areas, geographic_markets}]
      - relevance_assessment: [{business_line_id, relevance_score, reason}]
      - sources: [{url, title, type}]

# ==============================================================================
# ORGANIGRAM TASKS
# ==============================================================================
organigram:
  leadership_extraction:
    name: "Leadership Extraction"
    description: "Extract C-suite and senior leadership from public sources"
    prompt: |
      Context: Building organigram for {company_name} (realm: {realm_id}).
      Company website: {company_website_url}
      Existing organigram: {existing_organigram}

      Action: Extract leadership structure from public sources.
      - Identify C-suite executives (CEO, CFO, CTO, CIO, CISO, COO, etc.)
      - Find VP and SVP-level leaders for key functions
      - Determine reporting relationships where publicly available
      - Cross-reference LinkedIn profiles with company website data
      - Flag any discrepancies between sources

      Format:
      - leaders: [{name, title, reports_to, source, confidence, linkedin_url}]
      - confidence levels: confirmed (official page), reported (press), inferred (LinkedIn)

  org_hierarchy_mapping:
    name: "Organizational Hierarchy Mapping"
    description: "Map leadership to business lines and build department structure"
    prompt: |
      Context: Mapping org hierarchy for {company_name} (realm: {realm_id}).
      Identified leaders: {leaders_list}
      Business lines: {business_lines}

      Action: Build organizational hierarchy organized by business lines.
      - Map each leader to their business line or corporate function
      - Identify department heads within each business line
      - Build decision chains for IT, security, and operations domains
      - Assess relevance of each department to vendor engagement
      - Mark engagement status (ACTIVE, EXPLORING, NOT_ENGAGED, BLOCKED)

      Format:
      - organigram:
          ceo: {name, title}
          business_lines: [{name, head, departments: [{name, head, relevance, engagement_status}]}]
          corporate_functions: [{name, head, sub_functions}]
          decision_chains: [{domain, chain: [{name, title, role_in_decision}]}]

# ==============================================================================
# OPPORTUNITY IDENTIFICATION TASKS
# ==============================================================================
opportunities:
  opportunity_mapping:
    name: "Opportunity Mapping"
    description: "Map company strategy to vendor capabilities and identify opportunities"
    prompt: |
      Context: Identifying opportunities for {company_name} (realm: {realm_id}).
      Company strategy: {strategic_initiatives}
      Organigram: {organigram_summary}
      Active nodes: {active_nodes}
      Vendor product catalog: {vendor_offerings}

      Action: Identify new business opportunities.
      - Map each strategic initiative to potentially relevant vendor capabilities
      - Identify business lines and departments not currently engaged
      - Assess which unengaged areas have the highest potential
      - Cross-reference with active nodes to avoid suggesting existing engagements

      Format:
      - opportunities: [{name, type, business_line, department, strategic_initiative, vendor_capability, estimated_potential, confidence, source}]
      - type values: expansion, cross_sell, new_use_case, geographic

  refresh_delta:
    name: "Refresh Delta Analysis"
    description: "Identify what has changed since last research cycle"
    prompt: |
      Context: Performing periodic refresh for {company_name} (realm: {realm_id}).
      Previous company profile: {previous_profile}
      Previous organigram: {previous_organigram}
      Recent news digest: {recent_news}
      Last refresh date: {last_refresh_date}

      Action: Identify meaningful changes since last refresh.
      - Compare current public information against previous profile
      - Detect leadership changes, new hires, departures
      - Identify new strategic initiatives or shifts in existing ones
      - Flag organizational restructuring or M&A integration changes

      Format:
      - changes: [{category, description, impact, source, date_detected}]
      - category values: leadership, strategy, structure, financial, other
      - impact values: HIGH, MEDIUM, LOW
