# CA Agent Task Prompts
# Purpose: Task-specific prompts using CAF framework (Context, Action, Format)
# Reference: Personality defined in personalities/ca_personality.yaml

# ============================================================================
# ADOPTION ANALYSIS PROMPTS
# ============================================================================
adoption:

  adoption_health:
    name: "Solution Adoption Health Check"
    description: "Assess customer adoption of {vendor} solution"
    prompt: |
      Context: Review {account_name} adoption metrics and engagement.
      Deployment age: {months_deployed}
      Use cases: {use_cases}

      Action: Assess adoption health:
      - What is the usage level?
      - Which features are adopted?
      - What is underutilized?
      - What is the trend?

      Format:
      - Adoption score: [HIGH/MEDIUM/LOW]
      - Usage metrics summary
      - Feature adoption table (Feature | Usage | Trend)
      - Underutilized capabilities
      - Adoption improvement recommendations
      - Churn risk indicators

  adoption_blockers:
    name: "Adoption Blocker Analysis"
    description: "Identify what's blocking customer adoption"
    prompt: |
      Context: {account_name} adoption is lower than expected.
      Expected: {expected_usage}
      Actual: {actual_usage}

      Action: Identify blockers:
      - What is preventing adoption?
      - Is it technical or organizational?
      - What can we do about it?
      - Who should take action?

      Format:
      - Blocker list (Blocker | Type | Impact | Remediation)
      - Root cause analysis
      - Quick wins available
      - Actions for {vendor} team
      - Actions for customer
      - Escalation needs

  use_case_expansion:
    name: "Use Case Expansion Opportunity"
    description: "Identify new use case opportunities"
    prompt: |
      Context: Current use cases at {account_name}: {current_use_cases}
      Customer business context: {business_context}

      Action: Identify expansion opportunities:
      - What adjacent use cases are possible?
      - What does customer need?
      - What would drive adoption?
      - How do we propose?

      Format:
      - Expansion opportunities table (Use case | Fit | Value | Complexity)
      - Prioritized recommendations
      - Customer stakeholders to engage
      - Proof points to share
      - Proposal approach

# ============================================================================
# CUSTOMER ARCHITECTURE PROMPTS
# ============================================================================
customer_architecture:

  architecture_discovery:
    name: "Customer Architecture Discovery"
    description: "Discover and document customer architecture"
    prompt: |
      Context: New or updated discovery for {account_name}.
      Information gathered: {gathered_info}

      Action: Document architecture:
      - What is their infrastructure?
      - What systems integrate with {vendor}?
      - What are the dependencies?
      - What are potential risks?

      Format:
      - Infrastructure summary
      - Technology stack
      - Integration points
      - Data flows (text description)
      - Dependencies on {vendor}
      - Architecture risks

  change_impact:
    name: "Customer Architecture Change Impact"
    description: "Assess impact of customer architecture change"
    prompt: |
      Context: {account_name} planning: {change_description}
      Current {vendor} integration: {integration_summary}

      Action: Assess impact:
      - How does this affect {vendor} integration?
      - What risks does it create?
      - What actions are needed?
      - What is the timeline?

      Format:
      - Change summary
      - Impact on {vendor}: [HIGH/MEDIUM/LOW]
      - Specific impacts list
      - Required {vendor} changes
      - Risk mitigation plan
      - Timeline alignment
      - SA involvement needed: [YES/NO]

  integration_health:
    name: "Integration Health Assessment"
    description: "Assess health of customer-{vendor} integrations"
    prompt: |
      Context: Review integrations for {account_name}.
      Integrations: {integration_list}

      Action: Assess integration health:
      - What is the status of each integration?
      - What issues exist?
      - What improvements are possible?
      - What risks exist?

      Format:
      - Integration health table (Integration | Status | Health | Issues)
      - Critical issues requiring attention
      - Improvement opportunities
      - Risk register additions
      - SA recommendations

# ============================================================================
# VALUE REALIZATION PROMPTS
# ============================================================================
value_realization:

  value_delivered:
    name: "Value Delivered Assessment"
    description: "Assess value delivered to customer"
    prompt: |
      Context: {account_name} using {vendor} for {use_cases}.
      Deployment: {deployment_duration}
      Original goals: {original_goals}

      Action: Assess value delivered:
      - What were the original goals?
      - What value has been realized?
      - What can be quantified?
      - What is the story?

      Format:
      - Goals vs outcomes table
      - Quantified value (where possible)
      - Qualitative improvements
      - Customer success story (draft)
      - Value not yet realized
      - Actions to unlock more value

  qbr_preparation:
    name: "Customer QBR Value Content"
    description: "Prepare value content for QBR"
    prompt: |
      Context: QBR for {account_name}.
      Period: {review_period}

      Action: Prepare value content:
      - What value was delivered this period?
      - What are the key metrics?
      - What should we celebrate?
      - What should we improve?

      Format:
      - Value highlights (top 3)
      - Metrics dashboard content
      - Success stories this period
      - Improvement areas
      - Forward-looking value opportunities

  success_story:
    name: "Customer Success Story Development"
    description: "Develop customer success story content"
    prompt: |
      Context: {account_name} has achieved {achievement}.
      Details: {details}

      Action: Develop success story:
      - What is the compelling narrative?
      - What are the key metrics?
      - What quotes can we use?
      - How should we tell this story?

      Format:
      - Story headline
      - Challenge (before state)
      - Solution (what we did)
      - Results (quantified outcomes)
      - Key quote
      - Use case for the story

# ============================================================================
# CUSTOMER HEALTH PROMPTS
# ============================================================================
customer_health:

  health_assessment:
    name: "Customer Health Assessment"
    description: "Comprehensive customer health review"
    prompt: |
      Context: Health review for {account_name}.
      Signals: {available_signals}

      Action: Assess overall health:
      - What is the technical health?
      - What is the adoption health?
      - What is the relationship health?
      - What is the risk level?

      Format:
      - Overall health: [GREEN/YELLOW/RED]
      - Technical health score with factors
      - Adoption health score with factors
      - Relationship signals
      - Risk indicators
      - Recommended actions

  early_warning:
    name: "Early Warning Detection"
    description: "Identify early warning signs of trouble"
    prompt: |
      Context: Monitor {account_name} for warning signs.
      Recent signals: {recent_signals}

      Action: Detect warning signs:
      - What signals are concerning?
      - What could they indicate?
      - What should we investigate?
      - What action is needed?

      Format:
      - Warning signals identified
      - Potential implications
      - Investigation needed
      - Preventive actions
      - Stakeholder alerts

  renewal_readiness:
    name: "Renewal Readiness Assessment"
    description: "Assess readiness for upcoming renewal"
    prompt: |
      Context: {account_name} renewal in {months_until_renewal}.
      Current ARR: {arr}

      Action: Assess renewal readiness:
      - What is the value story?
      - What are the risks?
      - What needs to happen before renewal?
      - What is our expansion opportunity?

      Format:
      - Renewal confidence: [HIGH/MEDIUM/LOW]
      - Value delivered summary
      - Risk factors
      - Pre-renewal actions
      - Expansion opportunity
      - Stakeholder engagement plan

# ============================================================================
# CUSTOMER SUCCESS PLAN PROMPTS (Post-Sales)
# Based on industry SA best practices
# ============================================================================
customer_success_plan:

  accept_csp_handoff:
    name: "Accept CSP Handoff from SA"
    description: "Receive and validate CSP handoff at deal close"
    prompt: |
      Context: {account_name} deal closed. CSP handoff from SA {sa_name}.
      CSP: {csp_link}
      Handoff notes: {handoff_notes}

      Action: Accept and validate handoff:
      - Review all CSP sections for completeness
      - Verify understanding of business outcomes
      - Confirm stakeholder context
      - Identify open items and owners
      - Plan first 30 days

      Format:
      - Handoff acceptance checklist
      - Questions for SA (if any)
      - Stakeholder engagement plan (first 30 days)
      - Open items with my ownership
      - First customer touchpoint plan

  update_csp_value:
    name: "Update CSP Value Tracking"
    description: "Monthly update of CSP value metrics"
    prompt: |
      Context: Monthly CSP value update for {account_name}.
      Current CSP: {csp_link}
      Period: {review_period}

      Action: Update value tracking:
      - Collect utilization metrics
      - Assess outcome progress
      - Update health indicators
      - Document wins and challenges
      - Identify value gaps

      Format: Updated CSP section 8:
      - Utilization metrics table (metric | baseline | current | target | trend)
      - Outcome progress table (outcome | status | evidence)
      - Health indicators update
      - Period highlights
      - Actions to unlock more value

  update_csp_milestones:
    name: "Update CSP Milestone Status"
    description: "Track and update adoption milestones"
    prompt: |
      Context: Milestone review for {account_name} CSP.
      Current phase: {current_phase}
      Milestones: {milestone_list}

      Action: Update milestone status:
      - Mark completed milestones
      - Assess in-progress milestones
      - Identify at-risk milestones
      - Plan mitigation for delays
      - Update phase progress

      Format:
      - Milestone status table (milestone | due | status | notes)
      - Phase completion percentage
      - At-risk items with mitigation
      - Updated timeline if changed
      - Next milestones to focus on

  quarterly_csp_refresh:
    name: "Quarterly CSP Refresh"
    description: "Comprehensive quarterly CSP review and update"
    prompt: |
      Context: Quarterly CSP refresh for {account_name}.
      Current CSP: {csp_link}
      Quarter: {quarter}

      Action: Comprehensive refresh:
      - Review and update all sections
      - Assess phase completion and plan next phase
      - Update business outcomes if changed
      - Refresh stakeholder map
      - Update risks and mitigations
      - Prepare for customer QBR

      Format:
      - Section-by-section update summary
      - Phase transition assessment
      - Stakeholder changes
      - Risk register refresh
      - QBR talking points
      - Next quarter focus areas

  csp_qbr_prep:
    name: "Prepare CSP for Customer QBR"
    description: "Extract QBR content from CSP"
    prompt: |
      Context: QBR preparation for {account_name}.
      CSP: {csp_link}
      QBR date: {qbr_date}

      Action: Prepare QBR from CSP:
      - Extract value delivered summary
      - Summarize adoption progress
      - Highlight wins and success stories
      - Identify discussion topics
      - Prepare next phase preview

      Format:
      - Executive summary (3 sentences)
      - Value delivered (quantified)
      - Adoption scorecard
      - Success highlights
      - Discussion topics for customer
      - Next phase preview
      - Asks/recommendations

  csp_risk_update:
    name: "Update CSP Risks"
    description: "Review and update CSP risk section"
    prompt: |
      Context: Risk review for {account_name} CSP.
      Current risks: {risk_list}
      Recent signals: {recent_signals}

      Action: Update CSP risks:
      - Review existing risks
      - Identify new risks from signals
      - Update mitigation status
      - Close resolved risks
      - Assess overall risk level

      Format:
      - Risk table (risk | likelihood | impact | mitigation | status)
      - New risks added
      - Risks closed
      - Overall risk assessment
      - Escalation recommendations

  csp_expansion_planning:
    name: "Plan CSP Expansion Phase"
    description: "Plan next adoption phase in CSP"
    prompt: |
      Context: {account_name} completing {current_phase}.
      CSP: {csp_link}
      Expansion opportunities: {opportunities}

      Action: Plan expansion phase:
      - Define next phase objectives
      - Identify new use cases
      - Set milestones and timeline
      - Identify stakeholders to engage
      - Assess resource requirements

      Format:
      - Phase definition (name, duration, objectives)
      - New use cases table (use case | value | complexity)
      - Milestones for phase
      - Stakeholder engagement plan
      - Prerequisites and dependencies
      - Success criteria for phase

# ============================================================================
# CUSTOMER JOURNEY MAPPING PROMPTS (Post-Sales)
# Based on industry B2B customer experience best practices
# ============================================================================
customer_journey:

  accept_journey_handoff:
    name: "Accept Journey Map Handoff from SA"
    description: "Receive and validate journey map at deal close"
    prompt: |
      Context: {account_name} deal closed. Journey map handoff from SA {sa_name}.
      Journey map: {journey_map_link}
      CSP: {csp_link}

      Action: Accept and validate journey handoff:
      - Review pre-sales journey documentation
      - Understand key stakeholder journeys
      - Note moments of truth and friction
      - Capture close sentiment baseline
      - Plan post-sales journey continuation

      Format:
      - Handoff checklist (sections reviewed)
      - Key insights from pre-sales journey
      - Stakeholder sentiment summary
      - Known friction to monitor
      - First 30-day touchpoint plan

  map_onboarding_journey:
    name: "Map Onboarding Journey"
    description: "Document customer experience during onboarding"
    prompt: |
      Context: {account_name} in onboarding phase.
      Go-live target: {go_live_date}
      Key milestones: {milestones}

      Action: Map onboarding journey:
      - Document all onboarding touchpoints
      - Capture stakeholder experience at each milestone
      - Note friction points and delays
      - Track sentiment evolution
      - Identify moments of truth

      Format:
      - Onboarding touchpoint log
      - Milestone journey (planned vs actual experience)
      - Stakeholder sentiment during onboarding
      - Friction points encountered
      - Go-live experience documentation

  map_adoption_journey:
    name: "Map Ongoing Adoption Journey"
    description: "Track customer experience during adoption phase"
    prompt: |
      Context: {account_name} in adoption phase.
      Deployment age: {months_since_golive}
      Current adoption level: {adoption_level}

      Action: Map adoption journey:
      - Document recent touchpoints
      - Track feature discovery journey
      - Note usage milestones achieved
      - Capture support journey patterns
      - Identify expansion interest signals

      Format:
      - Recent touchpoint log
      - Usage milestone timeline
      - Support interaction journey
      - Stakeholder engagement map
      - Journey health assessment

  analyze_journey_health:
    name: "Analyze Journey Health"
    description: "Assess overall customer journey health"
    prompt: |
      Context: Journey health review for {account_name}.
      Journey map: {journey_map_link}
      Recent signals: {signals}

      Action: Analyze journey health:
      - What is the overall journey health?
      - Which stages are healthy/unhealthy?
      - What friction persists?
      - What improvements are needed?

      Format:
      - Overall journey health score
      - Stage-by-stage health assessment
      - Friction point summary
      - Moments of truth analysis
      - Recommended journey improvements
      - Action plan for improvement

  identify_journey_friction:
    name: "Identify Journey Friction Points"
    description: "Discover and document friction in customer journey"
    prompt: |
      Context: Friction analysis for {account_name}.
      Recent feedback: {feedback}
      Support patterns: {support_data}
      Usage data: {usage_signals}

      Action: Identify friction points:
      - Where is the customer struggling?
      - What causes friction at each stage?
      - What is the impact on relationship?
      - How can we reduce friction?

      Format:
      - Friction point inventory (friction | stage | cause | impact)
      - Root cause analysis
      - Impact on journey health
      - Remediation recommendations
      - Quick wins available

# ============================================================================
# VOICE OF CUSTOMER (VoC) PROMPTS
# Based on industry VoC program best practices
# ============================================================================
voice_of_customer:

  initiate_voc_tracking:
    name: "Initialize VoC Tracking"
    description: "Set up VoC tracking for new customer"
    prompt: |
      Context: Setting up VoC tracking for {account_name}.
      Account tier: {tier}
      Stakeholders: {stakeholders}

      Action: Initialize VoC tracking:
      - Define VoC collection cadence
      - Identify feedback channels
      - Set baseline metrics
      - Plan first survey touchpoints
      - Establish closed-loop process

      Format:
      - VoC program plan for account
      - Collection cadence by metric type
      - Stakeholder survey plan
      - Baseline to establish
      - Closed-loop workflow

  collect_nps_feedback:
    name: "Collect and Process NPS"
    description: "Administer NPS survey and process results"
    prompt: |
      Context: NPS survey for {account_name}.
      Survey date: {date}
      Respondents: {respondent_count}
      Results: {results}

      Action: Process NPS results:
      - What is the NPS score?
      - Who are promoters/passives/detractors?
      - What themes emerge from comments?
      - What closed-loop actions are needed?

      Format:
      - NPS score and breakdown
      - Respondent analysis (role, sentiment, verbatim)
      - Theme analysis
      - Detractor follow-up plan
      - Promoter advocacy opportunity
      - Trend vs previous surveys

  collect_csat_feedback:
    name: "Collect CSAT After Interaction"
    description: "Capture satisfaction after key touchpoints"
    prompt: |
      Context: CSAT survey after {interaction_type} with {account_name}.
      Interaction date: {date}
      Participants: {participants}
      Results: {results}

      Action: Process CSAT results:
      - What is the satisfaction score?
      - What feedback was provided?
      - What drove the score?
      - What follow-up is needed?

      Format:
      - CSAT score and breakdown
      - Verbatim feedback
      - Root cause if score is low
      - Follow-up action plan
      - Improvement recommendations

  capture_qualitative_feedback:
    name: "Capture Qualitative Customer Feedback"
    description: "Document and categorize qualitative feedback"
    prompt: |
      Context: Feedback received from {account_name}.
      Source: {source_type}
      Date: {date}
      Stakeholder: {stakeholder}

      Action: Capture and categorize feedback:
      - What feedback was shared?
      - What is the sentiment?
      - What category does it fall into?
      - What action is needed?

      Format:
      - Feedback summary (verbatim where possible)
      - Sentiment: POSITIVE | NEUTRAL | NEGATIVE
      - Category: PRODUCT | SERVICE | RELATIONSHIP | VALUE | PROCESS
      - Impact assessment
      - Recommended action
      - Closed-loop status

  analyze_support_voc:
    name: "Analyze Support Ticket VoC"
    description: "Extract VoC insights from support interactions"
    prompt: |
      Context: Support ticket analysis for {account_name}.
      Period: {time_period}
      Ticket volume: {count}
      Ticket data: {summary}

      Action: Analyze support-based VoC:
      - What patterns emerge from tickets?
      - What pain points are recurring?
      - What sentiment is expressed?
      - What product feedback is embedded?

      Format:
      - Ticket volume and trend
      - Top issue categories
      - Recurring pain points
      - Sentiment analysis
      - Product feedback extracted
      - Recommendations for improvement

  extract_meeting_voc:
    name: "Extract VoC from Meeting Notes"
    description: "Identify VoC signals from customer meetings"
    prompt: |
      Context: Meeting notes from {account_name} meeting.
      Meeting date: {date}
      Meeting type: {type}
      Notes: {notes_summary}

      Action: Extract VoC from meeting:
      - What feedback was shared?
      - What concerns were raised?
      - What praise was given?
      - What sentiment was expressed?

      Format:
      - VoC signals identified
      - Feedback categorization
      - Sentiment assessment
      - Action items from feedback
      - Journey map update needed

  voc_trend_analysis:
    name: "Analyze VoC Trends"
    description: "Review VoC metrics and identify trends"
    prompt: |
      Context: VoC trend analysis for {account_name}.
      Period: {time_period}
      Metrics available: {metrics}

      Action: Analyze VoC trends:
      - How are scores trending?
      - What themes persist?
      - What is improving/declining?
      - What correlations exist?

      Format:
      - Metric trend analysis (NPS, CSAT, CES)
      - Theme evolution
      - Improvement areas
      - Declining areas requiring attention
      - Correlation with journey events
      - Recommendations

  closed_loop_action:
    name: "Execute Closed-Loop Action"
    description: "Follow up on VoC feedback"
    prompt: |
      Context: VoC feedback requiring follow-up for {account_name}.
      Feedback: {feedback_summary}
      Stakeholder: {stakeholder}
      Sentiment: {sentiment}

      Action: Execute closed-loop:
      - Acknowledge feedback received
      - Determine appropriate response
      - Take action to address
      - Communicate back to customer
      - Document resolution

      Format:
      - Feedback acknowledged: YES/NO
      - Response approach
      - Actions taken
      - Customer communication sent
      - Resolution status
      - Impact on sentiment

  voc_qbr_content:
    name: "Prepare VoC Content for QBR"
    description: "Compile VoC insights for quarterly review"
    prompt: |
      Context: QBR preparation for {account_name}.
      Quarter: {quarter}
      VoC data: {voc_summary}

      Action: Prepare VoC QBR content:
      - What does VoC data show?
      - What trends to highlight?
      - What improvements made based on feedback?
      - What to discuss with customer?

      Format:
      - VoC metrics summary
      - Trend analysis
      - Actions taken from feedback
      - Customer discussion points
      - Asks for continued feedback

  product_feedback_aggregation:
    name: "Aggregate Product Feedback from VoC"
    description: "Compile product-related VoC for PM team"
    prompt: |
      Context: Product feedback aggregation for {account_name}.
      Period: {time_period}
      VoC sources: {sources}

      Action: Aggregate product feedback:
      - What product feedback has been captured?
      - What are feature requests?
      - What are pain points?
      - What should PM team know?

      Format:
      - Product feedback summary
      - Feature requests with priority
      - Pain points with frequency
      - Competitive gaps mentioned
      - Recommendation for PM agent
