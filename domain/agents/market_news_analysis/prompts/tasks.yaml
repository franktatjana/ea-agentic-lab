# MNA Agent Task Prompts
# Purpose: Task-specific prompts using CAF framework (Context, Action, Format)
# Reference: Personality defined in personalities/mna_personality.yaml

# ============================================================================
# REALM-LEVEL NEWS ANALYSIS
# ============================================================================
realm_news:

  company_news_scan:
    name: "Company News Scan"
    description: "Scan news sources for realm-associated company developments"
    prompt: |
      Context: Scan news for {company_name} ({realm_id}).
      Industry: {industry} / {sub_industry}
      Region: {region}
      Known strategic initiatives: {strategic_initiatives}
      Scan period: last {scan_days} days

      Action: Identify and classify company news:
      - Earnings, financial performance, M&A activity
      - Leadership changes (C-suite, board, key hires)
      - Strategic announcements (partnerships, expansions, pivots)
      - Regulatory developments affecting the company
      - Public statements from known stakeholders

      Format:
      - News items table (Date | Headline | Category | Source | Relevance Score)
      - High-impact items with detailed relevance assessment
      - Connection to known strategic initiatives
      - Recommended actions for account team

  strategic_initiative_tracking:
    name: "Strategic Initiative Tracking"
    description: "Track progress of known company strategic initiatives"
    prompt: |
      Context: Company: {company_name}
      Known initiatives:
      {strategic_initiatives_list}
      Last update: {last_updated}

      Action: Find updates on each initiative:
      - Any public announcements or progress reports?
      - New initiatives not previously tracked?
      - Changes in timeline, scope, or leadership?
      - How does each initiative affect our engagement?

      Format:
      - Initiative status table (Initiative | Previous Status | Current Status | Source)
      - New initiatives discovered
      - Implications for our engagement (per node)

  leadership_monitoring:
    name: "Leadership Change Detection"
    description: "Detect leadership changes at realm companies"
    prompt: |
      Context: Company: {company_name}
      Known stakeholders: {stakeholder_names}
      Key relationships: {key_relationships}

      Action: Detect leadership changes:
      - C-suite appointments or departures
      - Board changes
      - Key stakeholder role changes
      - New hires in relevant departments

      Format:
      - Changes detected (Person | Previous Role | New Role | Date | Source)
      - Impact assessment on our engagement
      - Urgency: [IMMEDIATE|MONITOR|BACKGROUND]
      - Recommended relationship actions

# ============================================================================
# NODE-LEVEL NEWS ANALYSIS
# ============================================================================
node_news:

  solution_domain_scan:
    name: "Solution Domain News Scan"
    description: "Scan industry and solution news relevant to a specific node"
    prompt: |
      Context: Node: {node_name} ({node_id})
      Domain: {domain} (e.g., security, observability, search)
      Engagement type: {operating_mode}
      Active competitors: {competitors}
      Scan period: last {scan_days} days

      Action: Find domain-relevant news:
      - Analyst reports (Gartner, Forrester, IDC) on {domain}
      - Competitor product launches, pricing changes, partnerships
      - Technology trend shifts affecting {domain}
      - Regulatory changes impacting {domain} solutions
      - Industry adoption patterns and benchmarks

      Format:
      - News items by category:
        - Analyst & Market Reports
        - Competitor Moves
        - Technology Trends
        - Regulatory & Compliance
      - Each item: Date | Headline | Source | Relevance | Impact on Node
      - Top 3 implications for this engagement
      - Recommended talking points for next customer meeting

  competitor_news_scan:
    name: "Competitor News Scan"
    description: "Focused scan on competitors active in a node"
    prompt: |
      Context: Node: {node_name}
      Primary competitor: {primary_competitor}
      Secondary competitors: {secondary_competitors}
      Our competitive position: {competitive_summary}

      Action: Find competitor news:
      - Product announcements or releases
      - Pricing or packaging changes
      - Partnership announcements
      - Customer wins or losses
      - Leadership changes at competitor
      - Analyst positioning changes

      Format:
      - Competitor news table (Competitor | Date | News | Impact on Us)
      - Threat assessment: Has our competitive position changed?
      - Opportunities created by competitor moves
      - Recommended counter-actions
      - Urgency: [IMMEDIATE|THIS_WEEK|NEXT_REVIEW]

  regulatory_impact_scan:
    name: "Regulatory Impact Scan"
    description: "Scan for regulatory changes affecting node's solution domain"
    prompt: |
      Context: Node domain: {domain}
      Customer industry: {industry}
      Customer region: {region}
      Known compliance requirements: {compliance_requirements}

      Action: Identify regulatory developments:
      - New regulations or standards affecting {domain}
      - Enforcement actions relevant to customer's industry
      - Compliance deadline changes
      - Industry body guideline updates

      Format:
      - Regulatory items (Regulation | Effective Date | Impact | Source)
      - Customer impact assessment
      - Opportunity or risk for our solution
      - Recommended discussion points

# ============================================================================
# DIGEST GENERATION
# ============================================================================
digests:

  weekly_realm_digest:
    name: "Weekly Realm News Digest"
    description: "Generate weekly news digest for a realm"
    prompt: |
      Context: Realm: {realm_name} ({realm_id})
      Industry: {industry}
      Active nodes: {active_nodes}
      Digest period: {start_date} to {end_date}
      Previous digest highlights: {previous_highlights}

      Action: Compile weekly digest:
      - Aggregate all news from the scan period
      - Prioritize by relevance and impact
      - Group by category
      - Highlight changes from previous digest
      - Identify emerging patterns

      Format:
      digest:
        period: "{start_date} to {end_date}"
        executive_summary: "2-3 sentence overview"
        high_impact:
          - headline, date, source, relevance, recommended_action
        company_news:
          - headline, date, source, category, relevance_score
        industry_trends:
          - headline, date, source, impact_assessment
        regulatory_updates:
          - headline, date, source, compliance_impact
        emerging_patterns:
          - pattern, evidence, implication

  weekly_node_digest:
    name: "Weekly Node Market Intelligence Digest"
    description: "Generate weekly solution-domain digest for a node"
    prompt: |
      Context: Node: {node_name} ({node_id})
      Domain: {domain}
      Operating mode: {operating_mode}
      Active competitors: {competitors}
      Current deal stage: {deal_stage}
      Digest period: {start_date} to {end_date}

      Action: Compile node-specific intelligence digest:
      - Solution domain market developments
      - Competitor activity relevant to this deal
      - Technology trends affecting the engagement
      - Analyst insights and positioning changes
      - Customer industry developments affecting buying behavior

      Format:
      digest:
        period: "{start_date} to {end_date}"
        executive_summary: "2-3 sentence overview focused on this deal"
        competitive_moves:
          - competitor, news, our_response
        market_signals:
          - signal, source, implication_for_deal
        analyst_insights:
          - analyst, report, key_finding, our_positioning
        talking_points:
          - "Customer-ready insight for next meeting"
        risks_surfaced:
          - risk, source, recommended_mitigation

# ============================================================================
# IMPACT ASSESSMENT
# ============================================================================
impact:

  news_impact_assessment:
    name: "News Impact Assessment"
    description: "Assess impact of specific news item on engagement"
    prompt: |
      Context: News item: "{headline}"
      Source: {source}
      Date: {date}
      Affected realm: {realm_name}
      Affected nodes: {affected_nodes}

      Action: Assess impact:
      - What does this mean for the company?
      - How does it affect our active engagements?
      - Does it change competitive dynamics?
      - Does it create urgency or opportunity?
      - Who on our team needs to know?

      Format:
      - Impact level: [CRITICAL|HIGH|MEDIUM|LOW]
      - Impact summary (2-3 sentences)
      - Affected nodes and how
      - Competitive implications
      - Recommended actions (by role: AE, SA, CSM)
      - Timeline: When to act
      - Stakeholders to brief

  trend_pattern_analysis:
    name: "Trend Pattern Analysis"
    description: "Analyze emerging patterns across multiple news items"
    prompt: |
      Context: Recent news items for {realm_name}:
      {news_items_summary}
      Time period: {period}

      Action: Identify patterns:
      - Are there recurring themes?
      - Is the company shifting strategy?
      - Are industry dynamics changing?
      - What do these patterns mean for our position?

      Format:
      - Patterns identified (Pattern | Evidence Count | Confidence)
      - Strategic interpretation
      - Impact on our engagement strategy
      - Recommended strategic response
